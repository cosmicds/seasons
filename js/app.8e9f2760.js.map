{"version":3,"file":"js/app.8e9f2760.js","mappings":"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","sources":["webpack://@cosmicds/seasons-story/./src/timezones.ts","webpack://@cosmicds/seasons-story/./src/utils.ts","webpack://@cosmicds/seasons-story/./src/horizon_sky.ts","webpack://@cosmicds/seasons-story/./src/text.ts","webpack://@cosmicds/seasons-story/./src/wwt-hacks.ts","webpack://@cosmicds/seasons-story/./src/composables/useSun.ts","webpack://@cosmicds/seasons-story/./src/SeasonsStory.vue?1cd0","webpack://@cosmicds/seasons-story/./src/SeasonsStory.vue","webpack://@cosmicds/seasons-story/./src/SeasonsStory.vue?2939","webpack://@cosmicds/seasons-story/./src/components/SplashScreen.vue?7db6","webpack://@cosmicds/seasons-story/./src/components/SplashScreen.vue","webpack://@cosmicds/seasons-story/./src/components/SplashScreen.vue?7107","webpack://@cosmicds/seasons-story/./src/components/LocationSearch.vue?4f80","webpack://@cosmicds/seasons-story/./src/components/LocationSearch.vue","webpack://@cosmicds/seasons-story/./src/components/LocationSearch.vue?99f6","webpack://@cosmicds/seasons-story/./src/components/TimeDisplay.vue?8b16","webpack://@cosmicds/seasons-story/./src/components/TimeDisplay.vue","webpack://@cosmicds/seasons-story/./src/components/TimeDisplay.vue?2cde","webpack://@cosmicds/seasons-story/./src/components/DaylightPieChart.vue","webpack://@cosmicds/seasons-story/./src/components/DaylightPieChart.vue?1d08","webpack://@cosmicds/seasons-story/./src/components/DaylightPieChart.vue?de05","webpack://@cosmicds/seasons-story/./src/components/QuestionDialog.vue?7511","webpack://@cosmicds/seasons-story/./src/components/QuestionDialog.vue","webpack://@cosmicds/seasons-story/./src/components/QuestionDialog.vue?5359","webpack://@cosmicds/seasons-story/./plugins/vuetify.ts","webpack://@cosmicds/seasons-story/./src/main.ts","webpack://@cosmicds/seasons-story/webpack/bootstrap","webpack://@cosmicds/seasons-story/webpack/runtime/chunk loaded","webpack://@cosmicds/seasons-story/webpack/runtime/compat get default export","webpack://@cosmicds/seasons-story/webpack/runtime/define property getters","webpack://@cosmicds/seasons-story/webpack/runtime/global","webpack://@cosmicds/seasons-story/webpack/runtime/hasOwnProperty shorthand","webpack://@cosmicds/seasons-story/webpack/runtime/make namespace object","webpack://@cosmicds/seasons-story/webpack/runtime/jsonp chunk loading","webpack://@cosmicds/seasons-story/webpack/startup"],"sourcesContent":["import { Ref, computed} from 'vue';\nimport { getTimezoneOffset, formatInTimeZone } from \"date-fns-tz\";\nimport tzlookup from \"tz-lookup\";\nimport { LocationDeg } from './types';\n\n\nexport function useTimezone(selectedLocation: Ref<LocationDeg>) {\n  // selectedDate keeps track of the time the user has selected\n  \n  const selectedTimezone = computed(() => tzlookup(selectedLocation.value.latitudeDeg, selectedLocation.value.longitudeDeg));\n\n  // what we add to utc time to get the localized time\n  const selectedTimezoneOffset = computed(() => getTimezoneOffset(selectedTimezone.value));\n  const shortTimezone = computed(() => formatInTimeZone(new Date(), selectedTimezone.value, \"zzz\"));\n\n  const browserTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  // this is added to (new Date()).getHours() to get UTC hours\n  const browserTimezoneOffset = new Date().getTimezoneOffset() * 60 * 1000; // in milliseconds\n  \n  console.log('Browser timezone:', browserTimezone);\n  console.log('Browser timezone offset:', browserTimezoneOffset);\n  console.log('Selected timezone:', selectedTimezone.value);\n  console.log('Selected timezone offset:', selectedTimezoneOffset.value);\n  \n  return {\n    selectedTimezone,\n    shortTimezone,\n    selectedTimezoneOffset,\n    browserTimezone,\n    browserTimezoneOffset,\n  };\n}","import { D2R, R2D } from \"@cosmicds/vue-toolkit\";\nimport { HorizontalRad, EquatorialRad } from \"./types\";\n\n// WWT does have all of this functionality built in\n// but it doesn't seem to be exposed\n// We should do that, but for now we just copy the web engine code\n// https://github.com/Carifio24/wwt-webgl-engine/blob/master/engine/wwtlib/Coordinates.cs\nexport function altAzToHADec(altRad: number, azRad: number, latRad: number): { ra: number; dec: number; } {\n  azRad = Math.PI - azRad;\n  if (azRad < 0) {\n    azRad += 2 * Math.PI;\n  }\n  let ra = Math.atan2(Math.sin(azRad), Math.cos(azRad) * Math.sin(latRad) + Math.tan(altRad) * Math.cos(latRad));\n  if (ra < 0) {\n    ra += 2 * Math.PI;\n  }\n  const dec = Math.asin(Math.sin(latRad) * Math.sin(altRad) - Math.cos(latRad) * Math.cos(altRad) * Math.cos(azRad));\n  return { ra, dec };\n}\n\nexport function getJulian(utc: Date): number {\n  let year = utc.getUTCFullYear();\n  let month = utc.getUTCMonth()+1;\n  const day = utc.getUTCDate();\n  const hour = utc.getUTCHours();\n  const minute = utc.getUTCMinutes();\n  const second = utc.getUTCSeconds() + utc.getUTCMilliseconds() / 1000.0;\n\n  if (month == 1 || month == 2)\n  {\n    year -= 1;\n    month += 12;\n  }\n\n  const a = Math.floor(year / 100);\n  const b = 2 - a + Math.floor(a / 4.0);\n  const c = Math.floor(365.25 * year);\n  const d = Math.floor(30.6001 * (month + 1));\n\n  // gives julian date: number of days since Jan 1, 4713 BC\n  const jd = b + c + d + 1720994.5 + day + (hour + minute / 60.00 + second / 3600.00) / 24.00;\n  return jd;\n}\n\nexport function mstFromUTC2(utc: Date, longRad: number): number {\n  const lng = longRad * R2D;\n\n  const modifiedJD = getJulian(utc)  - 2451545;\n\n  const julianCenturies = modifiedJD / 36525.0;\n  // this form wants julianDays - 2451545\n  let mst = 280.46061837 + 360.98564736629 * modifiedJD + 0.000387933 * julianCenturies * julianCenturies - julianCenturies * julianCenturies * julianCenturies / 38710000 + lng;\n\n  if (mst > 0.0) {\n    while (mst > 360.0) {\n      mst = mst - 360.0;\n    }\n  } else {\n    while (mst < 0.0) {\n      mst = mst + 360.0;\n    }\n  }\n\n  return mst;\n}\n\nexport function horizontalToEquatorial(altRad: number, azRad: number, latRad: number, longRad: number, utc: Date): EquatorialRad {\n  const st = mstFromUTC2(utc, longRad); // siderial time \n\n  const haDec = altAzToHADec(altRad, azRad, latRad); // get Hour Angle and Declination\n  \n  const ha = haDec.ra * R2D;\n\n  let ra = st + ha;\n  if (ra < 0) {\n    ra += 360;\n  }\n  if (ra > 360) {\n    ra -= 360;\n  }\n  // ra -= 180;\n  // console.log(`Alt: ${(altRad*R2D).toFixed(2)} Az: ${(azRad*R2D).toFixed(2)} Ra: ${ra.toFixed(2)} Dec: ${(haDec.dec*R2D).toFixed(2)}`)\n\n  return { raRad: D2R * ra, decRad: haDec.dec };\n}\n\nexport function equatorialToHorizontal(raRad: number, decRad: number, latRad: number, longRad: number, utc: Date): HorizontalRad {\n  let hourAngle = mstFromUTC2(utc, longRad) - R2D * raRad;\n  if (hourAngle < 0) {\n    hourAngle += 360;\n  }\n\n  const ha = D2R * hourAngle;\n  const dec = decRad;\n  const lat = latRad;\n  \n  const sinAlt = Math.sin(dec) * Math.sin(lat) + Math.cos(dec) * Math.cos(lat) * Math.cos(ha);\n  const altitude = Math.asin(sinAlt);\n  const cosAz = (Math.sin(dec) - Math.sin(altitude) * Math.sin(lat)) / (Math.cos(altitude) * Math.cos(lat));\n  let azimuth = Math.acos(cosAz);\n\n  azimuth = azimuth + (Math.PI * 80) % (Math.PI * 2);\n\n  if (Math.sin(ha) > 0) {\n    azimuth = 2 * Math.PI - azimuth;\n  }\n  return { altRad: altitude, azRad: azimuth };\n\n}\n\nexport function skyOpacityForSunAlt(sunAltRad: number) {\n  const civilTwilight = -6 * D2R;\n  const astronomicalTwilight = 3 * civilTwilight;\n  \n  return Math.min(Math.max((1 + Math.atan(Math.PI * sunAltRad / (-astronomicalTwilight))) / 2, 0), 1);\n}\n\nexport const MILLISECONDS_PER_DAY = 24 * 60 * 60 * 1000;\nexport function dayFractionForTimestamp(timestamp: number): number {\n  return (timestamp % MILLISECONDS_PER_DAY) / MILLISECONDS_PER_DAY;\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n/* eslint-disable */\n\n\n// We need this import for WWT types that aren't exported\n// from the engine at the JS level\nimport * as wwtlib from \"@wwtelescope/engine\";\nimport {\n  Color,\n  Coordinates,\n  Place,\n  RenderContext,\n  Settings,\n  SpaceTimeController,\n  WWTControl,\n} from \"@wwtelescope/engine\";\nimport { Classification, SolarSystemObjects } from \"@wwtelescope/engine-types\";\nimport { HorizonSkyOptions } from \"./types\";\nimport { equatorialToHorizontal, horizontalToEquatorial, skyOpacityForSunAlt } from \"./utils\";\nimport { D2R, R2D } from \"@cosmicds/vue-toolkit\";\n\nexport const sunPlace = new Place();\nsunPlace.set_names([\"Sun\"]);\nsunPlace.set_classification(Classification.solarSystem);\nsunPlace.set_target(SolarSystemObjects.sun);\nsunPlace.set_zoomLevel(20);\n\n\nexport const drawHorizon = (renderContext: RenderContext, options: HorizonSkyOptions) => {\n  const n = 6;\n  const delta = 2 * Math.PI / n;\n  const triangleList = new wwtlib.TriangleList();\n  const color = Color.load(options.color);\n  color.a = Math.round(255 * options.opacity ?? 1);\n  const settings = Settings.get_active();\n  const longitudeRad = settings.get_locationLng() * D2R;\n  const latitudeRad = settings.get_locationLat() * D2R;\n  const now = SpaceTimeController.get_now();\n  for (let i = 0; i < n; i++) {\n    let points: [number, number][] = [\n      [0, i * delta],\n      [-Math.PI / 2, i * delta],\n      [0, (i + 1) * delta]\n    ];\n    points = points.map((point) => {\n      const raDecRad = horizontalToEquatorial(...point, latitudeRad, longitudeRad, now);\n      return Coordinates.raDecTo3d(R2D * raDecRad.raRad / 15, R2D * raDecRad.decRad);\n    });\n    triangleList.addSubdividedTriangles(...points, color, new wwtlib.Dates(0, 1), 2);\n    \n  }\n  triangleList.draw(renderContext, 1, true);\n\n};\n\n\nexport const drawSky = (renderContext: RenderContext, options: HorizonSkyOptions) => {\n  const n = 6;\n  const delta = 2 * Math.PI / n;\n  const triangleList = new wwtlib.TriangleList();\n  const color = Color.load(options.color);\n  const settings = Settings.get_active();\n  const longitudeRad = settings.get_locationLng() * D2R;\n  const latitudeRad = settings.get_locationLat() * D2R;\n\n  const sunAltAz = equatorialToHorizontal(sunPlace.get_RA() * 15 * D2R,\n                                          sunPlace.get_dec() * D2R,\n                                          latitudeRad,\n                                          longitudeRad,\n                                          SpaceTimeController.get_now());\n  const opacity = skyOpacityForSunAlt(sunAltAz.altRad);\n  color.a = Math.round(255 * opacity);\n  WWTControl.scriptInterface.setForegroundOpacity((1 - opacity) * 100);\n  const now = SpaceTimeController.get_now();\n  for (let i = 0; i < n; i++) {\n    let points: [number, number][] = [\n      [0, i * delta],\n      [0, (i + 1) * delta],\n      [Math.PI / 2, i * delta] // In addition to using +pi/2 instead of -pi/2, I had to switch the order of the 2nd & 3rd points relative to the horizon set. I don't know why, but before I switched them, the polygons didn't render.\n    ];\n    points = points.map((point) => {\n      const raDecRad = horizontalToEquatorial(...point, latitudeRad, longitudeRad, now);\n      return Coordinates.raDecTo3d(R2D * raDecRad.raRad / 15, R2D * raDecRad.decRad);\n    });\n    triangleList.addSubdividedTriangles(...points, color, new wwtlib.Dates(0, 1), 2);\n    \n  }\n  triangleList.draw(renderContext, 1, true);\n\n};\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n/* eslint-disable */\n\nimport { Coordinates, Place, RenderContext, SpaceTimeController, Text3d, Text3dBatch, Vector3d } from \"@wwtelescope/engine\";\nimport { Classification, SolarSystemObjects } from \"@wwtelescope/engine-types\";\n\nfunction nameForObject(object: SolarSystemObjects): string {\n  // For creating a place based on a name, WWT requires that the name be capitalized\n  let name = SolarSystemObjects[object];\n  name = name.charAt(0).toUpperCase() + name.slice(1);\n  return name;\n}\n\nfunction placeForObject(object: SolarSystemObjects): Place {\n  const place = new Place();\n  const name = nameForObject(object);\n  place.set_names([name]);\n  place.set_classification(Classification.solarSystem);\n  place.set_target(object);\n  return place;\n}\n\nconst maxFOV = 90;\nconst minFOV = 0.1;\nconst maxFactor = 0.9;\nconst minFactor = 0.1;\nconst gMax = Math.log(maxFactor / (1 - maxFactor));\nconst gMin = Math.log(minFactor/ (1 - minFactor));\nconst b = (gMax - gMin) / (maxFOV - minFOV);\nconst a = gMax - b * maxFOV;\n\nconst planetTextOffsetsY = [\n  115,  // Sun\n  -60,  // Mercury\n  85,  // Venus\n  100,  // Mars\n  100,  // Jupiter\n  120,  // Saturn\n  90,  // Uranus\n  90,  // Neptune\n  100,  // Pluto\n  -70,  // Moon\n];\n\nconst planetTextOffsetsX = [\n  85,  // Sun\n  -275,  // Mercury\n  0,  // Venus\n  0,  // Mars\n  0,  // Jupiter\n  0,  // Saturn\n  0,  // Uranus\n  0,  // Neptune\n  0,  // Pluto\n  0,  // Moon\n];\n\nfunction textOverlayForSolarSystemObject(renderContext: RenderContext, object: SolarSystemObjects, text: string, glyphHeight: number): Text3d {\n  const zoom = renderContext.viewCamera.zoom;\n  const fov = zoom / 6;\n  const exp = Math.exp(a + b * fov);\n  const scale = 0.0002 * ((1.4 * exp / (1 + exp)) + 1);\n  const sign = SpaceTimeController.get_location().get_lat() < 0 ? -1 : 1;\n  const up = Vector3d.create(0, sign, 0);\n\n  const place = placeForObject(object);\n  const location = Coordinates.raDecTo3d(place.get_RA(), place.get_dec());\n  location.y -= planetTextOffsetsY[object] * scale ?? 0.035;\n  location.x -= planetTextOffsetsX[object] * scale ?? 0;\n  return new Text3d(location, up, text, glyphHeight, scale);\n}\n\nexport function makeTextOverlays(renderContext: RenderContext): Text3dBatch {\n  const glyphHeight = 75 * 0.5;\n  const batch = new Text3dBatch(glyphHeight);\n  const values = Object.keys(SolarSystemObjects).filter(key => !isNaN(Number(key)))\n  values.forEach(object => {\n    if (Number(object) <= SolarSystemObjects.moon) {\n      const name = nameForObject(object);\n      const text = textOverlayForSolarSystemObject(renderContext, object, name, glyphHeight);\n      batch.add(text);\n    }\n  });\n  return batch;\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n/* eslint-disable */\n\nimport {\n  Annotation,\n  Color,\n  Colors,\n  Constellations,\n  Coordinates,\n  CT,\n  DT,\n  GlyphCache,\n  Grids,\n  Matrix3d,\n  Planets,\n  RenderContext,\n  RenderTriangle,\n  Settings,\n  SimpleLineList,\n  SpaceTimeController,\n  Text3d,\n  Text3dBatch,\n  Texture,\n  Tile,\n  TileCache,\n  TourPlayer,\n  URLHelpers,\n  Vector3d,\n  WebFile,\n  WWTControl,\n} from \"@wwtelescope/engine\";\n\nimport { drawHorizon, drawSky } from \"./horizon_sky\";\nimport { makeTextOverlays } from \"./text\";\n\nconst nsewBatch = null;\n\nexport function resetNSEWText() {\n  nsewBatch = null;\n}\n\nexport function makeNSEWText() {\n  if (nsewBatch == null) {\n    const glyphHeight = 130;  \n    nsewBatch = new Text3dBatch(glyphHeight);\n    const sign = SpaceTimeController.get_location().get_lat() < 0 ? -1 : 1;\n    const alt = 0.03 * sign;\n    const up = Vector3d.create(0, sign, 0);\n    const directions = [\n      [[0, alt, -1], \"N\"],\n      [[-sign, alt, 0], \"E\"],\n      [[0, alt, 1], \"S\"],\n      [[sign, alt,  0], \"W\"],\n    ]\n    directions.forEach(([v, text]) => {\n      nsewBatch.add(new Text3d(Vector3d.create(...v), up, text, 75, 0.00018));\n    });\n    useCustomGlyphs(nsewBatch);\n  }\n}\n\nexport function drawNSEWText(renderContext, opacity, drawColor) {\n  var zenithAltAz = new Coordinates(0, 0);\n  var zenith = Coordinates.horizonToEquitorial(zenithAltAz, SpaceTimeController.get_location(), SpaceTimeController.get_now());\n  var raPart = -((zenith.get_RA() - 6) / 24 * (Math.PI * 2));\n  var decPart = -(zenith.get_dec() / 360 * (Math.PI * 2));\n  var raText = Coordinates.formatDMS(zenith.get_RA());\n  var mat = Matrix3d._rotationY(-raPart - Math.PI);\n  mat._multiply(Matrix3d._rotationX(decPart));\n  mat.invert();\n  makeNSEWText();\n  var matOldWorld = renderContext.get_world().clone();\n  var matOldWorldBase = renderContext.get_worldBase().clone();\n  renderContext.set_worldBase(Matrix3d.multiplyMatrix(mat, renderContext.get_world()));\n  renderContext.set_world(renderContext.get_worldBase().clone());\n  renderContext.makeFrustum();\n  nsewBatch.viewTransform = Matrix3d.invertMatrix(mat);\n  nsewBatch.draw(renderContext, opacity, drawColor);\n  renderContext.set_worldBase(matOldWorldBase);\n  renderContext.set_world(matOldWorld);\n  renderContext.makeFrustum();\n  return true;\n}\n\nconst GLYPH_CACHE = function(): GlyphCache {\n  const cache = new GlyphCache();\n  let root = window.location.origin + window.location.pathname;\n  if (root.endsWith(\"/\")) {\n    root= root.slice(0, root.length - 1);\n  }\n  const imageUrl = `${root}/glyphs2.png`;\n  const xmlUrl = `${root}/glyphs2.xml`;\n  cache._texture = Texture.fromUrl(imageUrl);\n  cache._webFile = new WebFile(xmlUrl);\n  cache._webFile.onStateChange = GlyphCache.prototype._glyphXmlReady.bind(cache);\n  cache._webFile.send();\n\n  return cache;\n}();\n\nexport function useCustomGlyphs(batch: Text3dBatch) {\n  batch._glyphCache = GLYPH_CACHE;\n  batch.prepareBatch();\n}\n\nexport function drawPlanets(renderContext: RenderContext, _opacity: number) {\n  if (Planets._planetTextures == null) {\n      Planets._loadPlanetTextures();\n    }\n    var elong = Planets._geocentricElongation(Planets._planetLocations[9].RA, Planets._planetLocations[9].dec, Planets._planetLocations[0].RA, Planets._planetLocations[0].dec);\n    var raDif = Planets._planetLocations[9].RA - Planets._planetLocations[0].RA;\n    if (Planets._planetLocations[9].RA < Planets._planetLocations[0].RA) {\n      raDif += 24;\n    }\n    var phaseAngle = Planets._phaseAngle(elong, Planets._planetLocations[9].distance, Planets._planetLocations[0].distance);\n    // var limbAngle = Planets._positionAngle(Planets._planetLocations[9].RA, Planets._planetLocations[9].dec, Planets._planetLocations[0].RA, Planets._planetLocations[0].dec);\n    if (raDif < 12) {\n      phaseAngle += 180;\n    }\n    var dista = (Math.abs(Planets._planetLocations[9].RA - Planets._planetLocations[0].RA) * 15) * Math.cos(Coordinates.degreesToRadians(Planets._planetLocations[0].dec));\n    var distb = Math.abs(Planets._planetLocations[9].dec - Planets._planetLocations[0].dec);\n    var sunMoonDist = Math.sqrt(dista * dista + distb * distb);\n    var eclipse = false;\n    var coronaOpacity = 0;\n    var moonEffect = (Planets._planetScales[9] / 2 - sunMoonDist);\n    // var darkLimb = Math.min(32, sunMoonDist * 32);\n\n    // For this story, we only want to draw the Sun\n    // which has planet ID 0\n    Planets._drawPlanet(renderContext, 0);\n    return true;\n}\n\nexport function renderOneFrame(showHorizon=true,\n                               showSky=true,\n                               showPlanetLabels=true) {\n  if (this.renderContext.get_backgroundImageset() != null) {\n    this.renderType = this.renderContext.get_backgroundImageset().get_dataSetType();\n  } else {\n    this.renderType = 2;\n  }\n\n  var sizeChange = false;\n  if (this.canvas.width !== this.canvas.parentNode.clientWidth) {\n    this.canvas.width = this.canvas.parentNode.clientWidth;\n    sizeChange = true;\n  }\n  if (this.canvas.height !== this.canvas.parentNode.clientHeight) {\n    this.canvas.height = this.canvas.parentNode.clientHeight;\n    sizeChange = true;\n  }\n  if (sizeChange && this.explorer != null) {\n    this.explorer.refresh();\n  }\n  if (this.canvas.width < 1 || this.canvas.height < 1) {\n    return;\n  }\n  if (sizeChange) {\n    this._crossHairs = null;\n  }\n  Tile.lastDeepestLevel = Tile.deepestLevel;\n  RenderTriangle.width = this.renderContext.width = this.canvas.width;\n  RenderTriangle.height = this.renderContext.height = this.canvas.height;\n  Tile.tilesInView = 0;\n  Tile.tilesTouched = 0;\n  Tile.deepestLevel = 0;\n  SpaceTimeController.set_metaNow(new Date());\n  if (this.get__mover() != null) {\n    SpaceTimeController.set_now(this.get__mover().get_currentDateTime());\n    Planets.updatePlanetLocations(this.get_solarSystemMode());\n    if (this.get__mover() != null) {\n      const newCam = this.get__mover().get_currentPosition();\n      this.renderContext.targetCamera = newCam.copy();\n      this.renderContext.viewCamera = newCam.copy();\n      if (this.renderContext.space && Settings.get_active().get_galacticMode()) {\n        const gPoint = Coordinates.j2000toGalactic(newCam.get_RA() * 15, newCam.get_dec());\n        this.renderContext.targetAlt = this.renderContext.alt = gPoint[1];\n        this.renderContext.targetAz = this.renderContext.az = gPoint[0];\n      }\n      else if (this.renderContext.space && Settings.get_active().get_localHorizonMode()) {\n        const currentAltAz = Coordinates.equitorialToHorizon(Coordinates.fromRaDec(newCam.get_RA(), newCam.get_dec()), SpaceTimeController.get_location(), SpaceTimeController.get_now());\n        this.renderContext.targetAlt = this.renderContext.alt = currentAltAz.get_alt();\n        this.renderContext.targetAz = this.renderContext.az = currentAltAz.get_az();\n      }\n      if (this.get__mover().get_complete()) {\n        WWTControl.scriptInterface._fireArrived(this.get__mover().get_currentPosition().get_RA(), this.get__mover().get_currentPosition().get_dec(), WWTControl.singleton.renderContext.viewCamera.zoom);\n        this.set__mover(null);\n        this._notifyMoveComplete();\n      }\n    }\n  }\n  else {\n    SpaceTimeController.updateClock();\n    Planets.updatePlanetLocations(this.get_solarSystemMode());\n    this._updateViewParameters();\n  }\n  this.renderContext.clear();\n\n  this.renderContext.setupMatricesSpace3d(this.renderContext.width, this.renderContext.height);\n  this.renderContext.drawImageSet(this.renderContext.get_backgroundImageset(), 100);\n  if (this.renderContext.get_foregroundImageset() != null) {\n    if (this.renderContext.get_foregroundImageset().get_dataSetType() !== this.renderContext.get_backgroundImageset().get_dataSetType()) {\n      this.renderContext.set_foregroundImageset(null);\n    }\n    else {\n      if (this.renderContext.viewCamera.opacity !== 100 && this.renderContext.gl == null) {\n        if (this._foregroundCanvas.width !== this.renderContext.width || this._foregroundCanvas.height !== this.renderContext.height) {\n          this._foregroundCanvas.width = this.renderContext.width;\n          this._foregroundCanvas.height = this.renderContext.height;\n        }\n        var saveDevice = this.renderContext.device;\n        this._fgDevice.clearRect(0, 0, this.renderContext.width, this.renderContext.height);\n        this.renderContext.device = this._fgDevice;\n        this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(), 100);\n        this.renderContext.device = saveDevice;\n        this.renderContext.device.save();\n        this.renderContext.device.globalAlpha = this.renderContext.viewCamera.opacity / 100;\n        this.renderContext.device.drawImage(this._foregroundCanvas, 0, 0);\n        this.renderContext.device.restore();\n      }\n      else {\n        this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(), this.renderContext.viewCamera.opacity);\n      }\n    }\n  }\n  if (this.uiController != null) {\n    this.uiController.render(this.renderContext);\n  }\n  else {\n    if (showSky) {\n      drawSky(this.renderContext, { opacity: 0.95, color: \"#4190ED\" });\n    }\n    Annotation.prepBatch(this.renderContext);\n    for (const item of this._annotations) {\n      item.draw(this.renderContext);\n    }\n    Annotation.drawBatch(this.renderContext);\n    if ((Date.now() - this._lastMouseMove) > 400) {\n      var raDecDown = this.getCoordinatesForScreenPoint(this._hoverTextPoint.x, this._hoverTextPoint.y);\n      this._annotationHover(raDecDown.x, raDecDown.y, this._hoverTextPoint.x, this._hoverTextPoint.y);\n      this._lastMouseMove = new Date(2100, 1, 1);\n    }\n    if (this._hoverText) {\n      this._drawHoverText(this.renderContext);\n    }\n  }\n\n  for (const imageset in this.renderContext.get_catalogHipsImagesets()) {\n    if (imageset.get_hipsProperties().get_catalogSpreadSheetLayer().enabled && imageset.get_hipsProperties().get_catalogSpreadSheetLayer().lastVersion === imageset.get_hipsProperties().get_catalogSpreadSheetLayer().get_version()) {\n      this.renderContext.drawImageSet(imageset, 100);\n    }\n  }\n  this.constellation = Constellations.containment.findConstellationForPoint(this.renderContext.viewCamera.get_RA(), this.renderContext.viewCamera.get_dec());\n  this._drawSkyOverlays();\n  Planets.drawPlanets(this.renderContext, 1);\n\n  if (showPlanetLabels) {\n    this._planetTextOverlays = makeTextOverlays(this.renderContext);\n    useCustomGlyphs(this._planetTextOverlays);\n    this._planetTextOverlays.viewTransform = Grids._altAzTextBatch?.viewTransform;\n    this._planetTextOverlays.draw(this.renderContext, 1, Color.fromArgb(255, 255, 255, 255));\n  }\n\n  if (showHorizon) {\n    drawHorizon(this.renderContext, { opacity: 0.9, color: \"#01362C\" });\n  }\n\n  const worldSave = this.renderContext.get_world();\n  const viewSave = this.renderContext.get_view();\n  const projSave = this.renderContext.get_projection();\n  if (Settings.get_current().get_showCrosshairs()) {\n    this._drawCrosshairs(this.renderContext);\n  }\n\n  const tilesAllLoaded = !TileCache.get_queueCount();\n  this.renderContext.setupMatricesOverlays();\n  this._fadeFrame();\n  this._frameCount++;\n  TileCache.decimateQueue();\n  TileCache.processQueue(this.renderContext);\n  Tile.currentRenderGeneration++;\n  if (!TourPlayer.get_playing()) {\n    this.set_crossFadeFrame(false);\n  }\n  this.renderContext.set_world(worldSave);\n  this.renderContext.set_view(viewSave);\n  this.renderContext.set_projection(projSave);\n  const now = Date.now();\n  const ms = now - this._lastUpdate;\n  if (ms > 1000) {\n    this._lastUpdate = now;\n    this._frameCount = 0;\n    RenderTriangle.trianglesRendered = 0;\n    RenderTriangle.trianglesCulled = 0;\n  }\n  if (this.capturingVideo) {\n    if ((this.dumpFrameParams != null) && (!this.dumpFrameParams.waitDownload || tilesAllLoaded)) {\n      this.captureFrameForVideo(this._videoBlobReady, this.dumpFrameParams.width, this.dumpFrameParams.height, this.dumpFrameParams.format);\n      SpaceTimeController.nextFrame();\n    }\n    if (SpaceTimeController.get_doneDumping()) {\n      SpaceTimeController.frameDumping = false;\n      SpaceTimeController.cancelFrameDump = false;\n      this.capturingVideo = false;\n    }\n  }\n}\n\nexport function drawEcliptic(renderContext: RenderContext, opacity: number, drawColor: Color, drawCircle: boolean = true) {\n    var col = drawColor;\n    var year = SpaceTimeController.get_now().getUTCFullYear();\n    if (Grids._eclipticOverviewLineList == null || year !== Grids._eclipticYear) {\n        if (Grids._eclipticOverviewLineList != null) {\n            Grids._eclipticOverviewLineList.clear();\n            Grids._eclipticOverviewLineList = null;\n        }\n        Grids._eclipticYear = year;\n        var obliquity = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow());\n        var mat = Matrix3d._rotationX((-obliquity / 360 * (Math.PI * 2)));\n        var daysPerYear = 365.25;\n        if (DT.isLeap(year, true)) {\n            Grids._monthDays[1] = 29;\n            daysPerYear = 366;\n        } else {\n            Grids._monthDays[1] = 28;\n            daysPerYear = 365;\n        }\n        var count = 2 * daysPerYear;\n        Grids._eclipticCount = daysPerYear;\n        var jYear = SpaceTimeController.utcToJulian(new Date(year, 0, 1, 12, 0, 0));\n        var index = 0;\n        var d = 0;\n        var dPrev = 0;\n        var dStart = 0;\n        Grids._eclipticOverviewLineList = new SimpleLineList();\n        Grids._eclipticOverviewLineList.set_depthBuffered(false);\n        for (var m = 0; m < 12; m++) {\n            var daysThisMonth = Grids._monthDays[m];\n            for (var i = 0; i < daysThisMonth; i++) {\n                var sunRaDec = Planets.getPlanetLocationJD('Sun', jYear);\n                var sunEcliptic = CT.eq2Ec(sunRaDec.RA, sunRaDec.dec, obliquity);\n                d = sunEcliptic.x;\n                if (i == 0 && m == 0) {\n                  dStart = d;\n                }\n                var width = 0.005;\n                if (!i) {\n                    width = 0.01;\n                }\n                var dd = d;\n                Grids._eclipticOverviewLineList.addLine(Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), width, Math.sin((dd * Math.PI * 2) / 360)), mat), Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), -width, Math.sin((dd * Math.PI * 2) / 360)), mat));\n                if (drawCircle && !(i == 0 && m == 0)) {\n                  Grids._eclipticOverviewLineList.addLine(Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), 0, Math.sin((dd * Math.PI * 2) / 360)), mat), Vector3d._transformCoordinate(Vector3d.create(Math.cos((dPrev * Math.PI * 2) / 360), 0, Math.sin((dPrev * Math.PI * 2) / 360)), mat));\n                }\n                index++;\n                jYear += 1;\n                dPrev = d;\n            }\n            d += Grids._monthDays[m];\n        }\n        if (drawCircle) {\n          Grids._eclipticOverviewLineList.addLine(Vector3d._transformCoordinate(Vector3d.create(Math.cos((dStart * Math.PI * 2) / 360), 0, Math.sin((dStart * Math.PI * 2) / 360)), mat), Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), 0, Math.sin((dd * Math.PI * 2) / 360)), mat));\n        }\n    }\n    Grids._eclipticOverviewLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nexport function drawSkyOverlays() {\n    if (Settings.get_active().get_showConstellationPictures() && !this.freestandingMode) {\n        Constellations.drawArtwork(this.renderContext);\n    }\n    if (Settings.get_active().get_showConstellationFigures()) {\n        if (WWTControl.constellationsFigures == null) {\n            WWTControl.constellationsFigures = Constellations.create(\n                'Constellations',\n                URLHelpers.singleton.engineAssetUrl('figures.txt'),\n                false,  // \"boundry\"\n                false,  // \"noInterpollation\"\n                false,  // \"resource\"\n            );\n        }\n        WWTControl.constellationsFigures.draw(this.renderContext, false, 'UMA', false);\n    }\n    if (Settings.get_active().get_showEclipticGrid()) {\n        Grids.drawEclipticGrid(this.renderContext, 1, Settings.get_active().get_eclipticGridColor());\n        if (Settings.get_active().get_showEclipticGridText()) {\n            Grids.drawEclipticGridText(this.renderContext, 1, Settings.get_active().get_eclipticGridColor());\n        }\n    }\n    if (Settings.get_active().get_showGalacticGrid()) {\n        Grids.drawGalacticGrid(this.renderContext, 1, Settings.get_active().get_galacticGridColor());\n        if (Settings.get_active().get_showGalacticGridText()) {\n            Grids.drawGalacticGridText(this.renderContext, 1, Settings.get_active().get_galacticGridColor());\n        }\n    }\n    if (Settings.get_active().get_showAltAzGrid()) {\n        Grids.drawAltAzGrid(this.renderContext, 1, Settings.get_active().get_altAzGridColor());\n    }\n    if (Settings.get_active().get_showAltAzGridText()) {\n        Grids.drawAltAzGridText(this.renderContext, 1, Settings.get_active().get_altAzGridColor());\n    }\n    drawNSEWText(this.renderContext, 1, Settings.get_active().get_altAzGridColor());\n    if (Settings.get_active().get_showPrecessionChart()) {\n        Grids.drawPrecessionChart(this.renderContext, 1, Settings.get_active().get_precessionChartColor());\n    }\n    if (Settings.get_active().get_showEcliptic()) {\n        Grids.drawEcliptic(this.renderContext, 1, Settings.get_active().get_eclipticColor());\n        if (Settings.get_active().get_showEclipticOverviewText()) {\n            Grids.drawEclipticText(this.renderContext, 1, Settings.get_active().get_eclipticColor());\n        }\n    }\n    if (Settings.get_active().get_showGrid()) {\n        Grids.drawEquitorialGrid(this.renderContext, 1, Settings.get_active().get_equatorialGridColor());\n        if (Settings.get_active().get_showEquatorialGridText()) {\n            Grids.drawEquitorialGridText(this.renderContext, 1, Settings.get_active().get_equatorialGridColor());\n        }\n    }\n    if (Settings.get_active().get_showConstellationBoundries()) {\n        if (WWTControl.constellationsBoundries == null) {\n            WWTControl.constellationsBoundries = Constellations.create(\n                'Constellations',\n                URLHelpers.singleton.engineAssetUrl('constellations.txt'),\n                true,   // \"boundry\"\n                false,  // \"noInterpollation\"\n                false,  // \"resource\"\n            );\n        }\n        WWTControl.constellationsBoundries.draw(this.renderContext, Settings.get_active().get_showConstellationSelection(), this.constellation, false);\n    }\n    if (Settings.get_active().get_showConstellationLabels()) {\n        Constellations.drawConstellationNames(this.renderContext, 1, Colors.get_yellow());\n    }\n}\n","/* eslint-disable prefer-const */\nimport { Ref, ref, computed, isRef, type MaybeRef } from \"vue\";\nimport { Classification, SolarSystemObjects } from \"@wwtelescope/engine-types\";\nimport { Place} from \"@wwtelescope/engine\";\nimport { AltAzRad, EquatorialRad, LocationDeg, LocationRad } from \"../types\";\nimport { AstroCalc } from \"@wwtelescope/engine\";\nimport { equatorialToHorizontal, getJulian } from \"../utils\";\nimport { D2R } from \"@cosmicds/vue-toolkit\";\nimport { engineStore } from \"@wwtelescope/engine-pinia\";\ntype WWTEngineStore = ReturnType<typeof engineStore>;\n\n\nconst SECONDS_PER_DAY = 60 * 60 * 24;\nconst MILLISECONDS_PER_DAY = 1000 * SECONDS_PER_DAY;\n\nconst secondsInterval = 40;\nconst MILLISECONDS_PER_INTERVAL = 1000 * secondsInterval;\nconst RADIANS_TO_ARCSECONDS = (180 / Math.PI) * 3600; //\nconst R2S = RADIANS_TO_ARCSECONDS;\n\ntype RefOrType<T> = Ref<T> | T;\n\ninterface SunPos extends AltAzRad {\n  decRad: number;\n  raRad: number;\n}\n\ninterface SunAltOptions {\n    useLimb?: boolean;\n    useRefraction?: boolean;\n  }\n\nexport interface UseSunOptions {\n  store: WWTEngineStore;\n  location: Ref<LocationDeg>;\n  selectedTime: MaybeRef<number> | MaybeRef<Date>;\n  selectedTimezoneOffset: RefOrType<number>;\n  zoomLevel?: number;\n  onStart?: () => void;\n}\n\nexport function useSun(options: UseSunOptions) {\n  \n  options.store.waitForReady().then(async () => {\n    if (options.onStart) {\n      options.onStart();\n    }\n  });\n\n  let time = isRef(options.selectedTime) ? options.selectedTime.value : options.selectedTime;\n  time = typeof time === \"number\" ? time : time.getTime();\n  \n  const selectedTime = ref(time);\n  const selectedTimezoneOffset = ref(options.selectedTimezoneOffset);\n  \n  const locationRad = computed<LocationRad>(() => {\n    return {\n      latitudeRad: options.location.value.latitudeDeg * D2R,\n      longitudeRad: options.location.value.longitudeDeg * D2R,\n    };\n  });\n\n  const sunPlace = new Place();\n  sunPlace.set_names([\"Sun\"]);\n  sunPlace.set_classification(Classification.solarSystem);\n  sunPlace.set_target(SolarSystemObjects.sun);\n  sunPlace.set_zoomLevel(options.zoomLevel ?? 20);\n  \n  const sunPosition = computed<EquatorialRad>(() =>{\n    return {\n      raRad: sunPlace.get_RA() * 15 * D2R,\n      decRad: sunPlace.get_dec() * D2R,\n    } as EquatorialRad;\n  });\n  \n\n  \n  function getSunPositionAtTime(time: Date): SunPos {\n    const jd = getJulian(time);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    const currentRaDec = AstroCalc.getPlanet(jd, 0, locationRad.value.latitudeRad, locationRad.value.longitudeRad, 0);\n    const sunAltAz = equatorialToHorizontal(currentRaDec.RA * 15 * D2R, currentRaDec.dec * D2R, locationRad.value.latitudeRad, locationRad.value.longitudeRad, time);\n    return {...sunAltAz, decRad: currentRaDec.dec * D2R, raRad: currentRaDec.RA * 15 * D2R };\n  }\n  \n  function lerp(x0: number, y0: number, x1: number, y1: number, x: number): number {\n    // return y0 + (y1 - y0) * ((x - x0) / (x1 - x0));\n    const m = (y1 - y0) / (x1 - x0);\n    const b = y0 - m * x0;\n    return m * x + b;\n  }\n  \n  function _interpolateSunAltitude(time: number, step: number, desiredAltDeg: number): number {\n    const alt1 = getSunPositionAtTime(new Date(time - step)).altRad;\n    const alt2 = getSunPositionAtTime(new Date(time + step)).altRad;\n    const out =  lerp(alt1, time - step, alt2, time + step, desiredAltDeg * D2R);\n    return out;\n  }\n  \n  function meridionalAltitude(sunDec: number, latitude: number, offset = 0) {\n    const upperCulmination = 90 * D2R - Math.abs(latitude - sunDec) + offset;\n    const lowerCulmination = -90 * D2R + Math.abs(latitude + sunDec) + offset;\n    const alwaysAbove = lowerCulmination > 0;\n    const alwaysBelow = upperCulmination < 0;\n    return {upperCulmination, lowerCulmination, always: (alwaysAbove ? 'up' :  (alwaysBelow ? 'down' : null)) };\n  }\n  \n  // function that finds at what time the center of the sun will reach a given altitude during the current day to within 15 minutes\n  \n  function getTimeforSunAlt(altDeg: number, referenceTime?: number, options?: SunAltOptions ): { rising: number | null; setting: number | null; always: 'up' | 'down' | null } {\n    // takes about 45ms to run\n    // search for time when sun is at given altitude\n    // start at 12:00am and search every MINUTES_PER_INTERVAL\n    // const minTime = selectedTime.value - (selectedTime.value % MILLISECONDS_PER_DAY) - selectedTimezoneOffset.value + 0.5 * MILLISECONDS_PER_DAY;\n    // const maxTime = minTime + 0.5 * MILLISECONDS_PER_DAY;\n    \n    const useLimb = options && options.useLimb ? options.useLimb : false;\n    const useRefraction = options && options.useRefraction ? options.useRefraction : false;\n    \n    const rSunDeg = ((0.009291568 / 2) / D2R); // from WWT planets.js // Sun's ang size in AU = it's ang size in Radians\n    const extraDeg = (useLimb ? rSunDeg : 0) + (useRefraction ? 0.5667 : 0);\n    altDeg = altDeg - extraDeg;\n    \n    const refTime = referenceTime ?? selectedTime.value;\n    const startOfDay = refTime - (refTime % MILLISECONDS_PER_DAY) - selectedTimezoneOffset.value; \n    let endOfDay = startOfDay + MILLISECONDS_PER_DAY - 1;\n    \n    \n    // let's begin search at the start of the day\n    let time = startOfDay;\n    // eslint-disable-next-line prefer-const\n    let { altRad: sunAlt, decRad : sunDec }  = getSunPositionAtTime(new Date(time)); \n    // when we correct for refraction and limb, the effect point we use for the meridional altitude changes\n    // in particular, it increases the upper and lower culmination\n    const circumstances =  meridionalAltitude(sunDec, locationRad.value.latitudeRad, extraDeg * D2R);\n    let upperCulmination = circumstances.upperCulmination;\n    let lowerCulmination = circumstances.lowerCulmination;\n    \n    console.log(`Upper culmination: ${upperCulmination * R2S} arcsec`);\n    console.log(`Lower culmination: ${lowerCulmination * R2S} arcsec`);\n\n    \n    \n    // eslint-disable-next-line prefer-const\n    let always: 'up' | 'down' | null = circumstances.always as ('up' | 'down' | null);\n    \n    // if the sign a 0.6 days later is the same, then the sun either never rises or never sets\n    // don't short circuit because timezones mess up the time. you would have to correct to solar\n    if (always === 'up') {\n      return { rising: null, setting: null, always: always };\n    } else if (always === 'down') {\n      return { rising: null, setting: null,  always: always };\n    } \n    \n    // if it culminates \n    if (upperCulmination * R2S < 2 && always === null) {\n      console.error(`Upper culmination is too close to the horizon = ${upperCulmination * R2S} arcsec.`);\n      return { rising: null, setting: null, always: 'down' };\n    }\n    \n    if (lowerCulmination * R2S > -2 && always === null) {\n      console.error(`Lower culmination is too close to the horizon = ${lowerCulmination * R2S} arcsec.`);\n      return { rising: null, setting: null, always: 'up' };\n    }\n    \n    function searchRise(time) {\n    // find the two times it crosses the given altitude\n      while ((sunAlt < altDeg * D2R) && (time < endOfDay)) {\n        time += MILLISECONDS_PER_INTERVAL;\n        sunAlt = getSunPositionAtTime(new Date(time)).altRad;\n        upperCulmination = Math.max(upperCulmination, sunAlt);\n        lowerCulmination = Math.min(lowerCulmination, sunAlt);\n      }\n      const interp = () => _interpolateSunAltitude(time, MILLISECONDS_PER_INTERVAL, altDeg);\n      const rising = time >= endOfDay ? null : interp();\n      return {rising, time};\n    }\n    function searchSet(time) {\n      let doOnce = true;\n      while ((sunAlt > altDeg * D2R) && (time < endOfDay)) {\n        time += MILLISECONDS_PER_INTERVAL;\n        sunAlt = getSunPositionAtTime(new Date(time)).altRad;\n        upperCulmination = Math.max(upperCulmination, sunAlt);\n        lowerCulmination = Math.min(lowerCulmination, sunAlt);\n        // if we wrap to the next day, log it\n        if (doOnce && time >= startOfDay + MILLISECONDS_PER_DAY) {\n          console.error(\"Extending search to next day\");\n          doOnce = false;\n        }\n      }\n      const interp = () =>_interpolateSunAltitude(time, MILLISECONDS_PER_INTERVAL, altDeg);\n      const setting = time >= endOfDay ? null : interp();\n      return {setting, time};\n    }\n      \n    const sunGoingUp = getSunPositionAtTime(new Date(time)).altRad < getSunPositionAtTime(new Date(time + MILLISECONDS_PER_INTERVAL / 2)).altRad;\n    let rising: number | null = null;\n    let setting: number | null = null;\n    \n    if (sunGoingUp) { // The sun is going up at midnight\n      console.log(\"At local midnight, the sun is going up.\");\n      if (sunAlt > altDeg * D2R) {\n        console.error(\"However, the sun is already above the horizon at local midnight. This could be an edge case.\");\n      }\n    } else {\n      console.log(\"At local midnight, the sun is going down.\");\n      if (sunAlt < altDeg * D2R) {\n        console.log(\"and the sun is below the horizon\");\n      } else {\n        console.error(\"but the sun is above the horizon\");\n      }\n    }\n    \n    if (sunAlt >= altDeg * D2R )  { // the sun is already up and the next thing to happen is setting\n      console.error(\"Sun is above the horizon at local midnight. Searching for setting first.\");\n      const s = searchSet(time); // we look for it to set.\n      setting = s.setting;\n      if (setting === null) {\n        console.log(\"Error: could not find setting time when sun is going up first and above the horizon.\");\n        return { 'rising': null, 'setting': null, 'always': 'up',};\n      }\n      \n      console.log(`Found setting time at ${setting ? new Date(setting).toLocaleString(undefined, { timeZone: 'UTC' }) : 'null'} UTC`);\n      endOfDay = time + MILLISECONDS_PER_DAY; //  startOfDay + 24 hours < endOfDay < startOfDay + 48 hours\n      \n      const r = searchRise(s.time);\n      rising = r.rising;\n      \n      if (rising === null) {\n        console.error(\"The sun set this day, but did not rise in the next 24 hours. Setting to always down.\");\n        return { 'rising': null, 'setting': setting, 'always': 'down',};\n      }\n      \n      console.log(`Found rising time at ${rising ? new Date(rising).toLocaleString(undefined, { timeZone: 'UTC' }) : 'null'} UTC`);\n      endOfDay += r.time + MILLISECONDS_PER_DAY; // startOfDay + 24 hours < endOfDay < startOfDay + 48 hours\n      const s2 = searchSet(r.time);\n      if (s2.setting === null) {\n        console.error(\"Error: could not find second setting time after rising. Must be entering polar day.\");\n        return { 'rising': rising, 'setting': null, 'always': 'up',};\n      }\n      setting = s2.setting;\n      console.log(`Found and using next setting time at ${setting ? new Date(setting).toLocaleString(undefined, { timeZone: 'UTC' }) : 'null'} UTC`);\n      \n    } else {\n      console.error(\"Sun is going down and is below the horizon. Search for the next rise and extend to next day for setting.\");\n      const r = searchRise(time);\n      rising = r.rising; \n      if (rising === null) {\n        console.error(\"The sun never rose in 24 hours. It is always down for this date.\");\n        return { 'rising': null, 'setting': null, 'always': 'down',};\n      }\n      \n      console.log(`Found rising time at ${rising ? new Date(rising).toLocaleString(undefined, { timeZone: 'UTC' }) : 'null'} UTC`);\n      endOfDay += time + MILLISECONDS_PER_DAY; // startOfDay + 24 hours < endOfDay < startOfDay + 48 hours\n      \n      const s = searchSet(r.time);\n      setting = s.setting;\n      \n      if (setting === null) {\n        console.error(\"The sun rose this day, but did not set in the next 24 hours. We are entering polar day.\");\n        return { 'rising': rising, 'setting': null, 'always': 'up',};\n      }\n      \n      console.log(`Found setting time at ${setting ? new Date(setting).toLocaleString(undefined, { timeZone: 'UTC' }) : 'null'} UTC`);\n    }\n    \n    \n    \n    \n    // check some of the edge cases and log errors\n    // always = null implies that it truly rises and sets\n    if (always === null ) {\n      // if either is null, that means we could not detect it.\n      if (rising === null || setting === null) {\n        console.error(\n          \"Error calculating sun rise/set times\", \n          `Rising: ${rising}, Setting: ${setting}.`,\n          `Upper culmination: ${upperCulmination / D2R}, Lower culmination: ${lowerCulmination / D2R}, \n          Desired alt: ${altDeg}`);\n        // we can't trust the results. if the upper culmination is small, then it's always down\n        // if the lower culmination is small, then it's always up\n        always = Math.abs(upperCulmination) < Math.abs(lowerCulmination) ? 'down' : 'up';\n        return {\n          'rising': null,\n          'setting': null,\n          'always': always,\n        };\n      }\n    }\n    console.log(`Rise and Set from the search`);\n    console.log(\"   Rising time:\", rising ? new Date(rising).toLocaleString(undefined, { timeZone: 'UTC' }) : 'null', ' UTC');\n    console.log(\"   Setting time:\", setting ? new Date(setting).toLocaleString(undefined, { timeZone: 'UTC' }) : 'null',' UTC');\n    return {\n      'rising': rising,\n      'setting': setting,\n      'always': always,\n    };\n  }\n  \n  \n  return { getTimeforSunAlt, getSunPositionAtTime, sunPlace, sunPosition };\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, Transition as _Transition, withCtx as _withCtx, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, withKeys as _withKeys, normalizeClass as _normalizeClass, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, resolveDirective as _resolveDirective, createTextVNode as _createTextVNode, unref as _unref, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = { id: \"main-content\" }\nconst _hoisted_2 = {\n  class: \"modal\",\n  id: \"modal-loading\"\n}\nconst _hoisted_3 = [\"inert\"]\nconst _hoisted_4 = { id: \"left-buttons\" }\nconst _hoisted_5 = { class: \"location-display\" }\nconst _hoisted_6 = {\n  id: \"location-title\",\n  class: \"event-title\"\n}\nconst _hoisted_7 = {\n  key: 0,\n  class: \"mb-1\"\n}\nconst _hoisted_8 = { id: \"geolocation-close\" }\nconst _hoisted_9 = { id: \"geolocation-controls\" }\nconst _hoisted_10 = { class: \"options\" }\nconst _hoisted_11 = { id: \"right-buttons\" }\nconst _hoisted_12 = {\n  id: \"date-title\",\n  class: \"event-title\"\n}\nconst _hoisted_13 = { class: \"mb-1\" }\nconst _hoisted_14 = { class: \"date-buttons\" }\nconst _hoisted_15 = [\"onClick\"]\nconst _hoisted_16 = { class: \"date-picker-section date-button\" }\nconst _hoisted_17 = [\"color\"]\nconst _hoisted_18 = [\"inert\"]\nconst _hoisted_19 = { id: \"time-slider-chips\" }\nconst _hoisted_20 = { class: \"slider-container\" }\nconst _hoisted_21 = { class: \"thumb-label\" }\nconst _hoisted_22 = { class: \"time-chips\" }\nconst _hoisted_23 = {\n  key: 1,\n  id: \"small-play-pie-chart\"\n}\nconst _hoisted_24 = [\"inert\"]\nconst _hoisted_25 = [\"inert\"]\nconst _hoisted_26 = { class: \"video-wrapper\" }\nconst _hoisted_27 = { class: \"ml-5 pt-3\" }\nconst _hoisted_28 = { class: \"pb-3\" }\n\nimport { ref, reactive, computed, markRaw, onMounted, nextTick, watch } from \"vue\";\nimport { useDisplay } from \"vuetify\";\nimport { storeToRefs } from \"pinia\";\nimport { getTimezoneOffset } from \"date-fns-tz\";\nimport tzlookup from \"tz-lookup\";\nimport { v4 } from \"uuid\";\n\nimport { AstroTime, Seasons } from \"astronomy-engine\";\n\nimport { Color, Grids, Planets, Settings, WWTControl } from \"@wwtelescope/engine\";\nimport { GotoRADecZoomParams, engineStore } from \"@wwtelescope/engine-pinia\";\nimport {\n  BackgroundImageset,\n  LocationDeg,\n  skyBackgroundImagesets,\n  supportsTouchscreen,\n  blurActiveElement,\n  useWWTKeyboardControls,\n  D2R,\n  R2D,\n  API_BASE_URL,\n} from \"@cosmicds/vue-toolkit\";\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch, textForLocation } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\nimport { useTimezone } from \"./timezones\";\nimport { dayFractionForTimestamp, equatorialToHorizontal, horizontalToEquatorial } from \"./utils\";\nimport { resetNSEWText, drawPlanets, renderOneFrame, drawEcliptic, drawSkyOverlays } from \"./wwt-hacks\";\nimport { useSun } from \"./composables/useSun\";\nimport { formatInTimeZone } from \"date-fns-tz\";\nimport { sunPlace } from \"./horizon_sky\";\n\ntype SheetType = \"text\" | \"video\";\ntype CameraParams = Omit<GotoRADecZoomParams, \"instant\">;\nexport interface SeasonsStoryProps {\n  wwtNamespace?: string;\n  initialCameraParams?: CameraParams;\n}\n\nconst sliderMin = 0;\nconst sliderMax = 500;\nconst highAltDeg = 70;\ntype EventOfInterest = typeof EVENTS_OF_INTEREST[number];\n\nconst NIGHTTIME = \"rgb(120, 120, 120)\";\n\ninterface LocationInfo {\n  name: string;\n  latitude: string;\n  longitude: string;\n}\n\nconst MAX_ZOOM = 500;\n\nconst infoFraction = 34;\nconst OPT_OUT_KEY = \"seasons-optout\" as const;\nconst AHA_OPT_OUT_KEY = \"seasons-aha-optout\" as const;\nconst UUID_KEY = \"seasons-uuid\" as const;\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SeasonsStory',\n  setup(__props) {\n\nconst store = engineStore();\nconst {\n  currentTime,\n} = storeToRefs(store);\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst wwtSettings: Settings = Settings.get_active();\n\nuseWWTKeyboardControls(store);\n\nconst touchscreen = supportsTouchscreen();\nconst { smAndDown } = useDisplay();\n\nconst splash = new URLSearchParams(window.location.search).get(\"splash\")?.toLowerCase() !== \"false\";\nconst showSplashScreen = ref(splash);\nconst splashReady = computed(() => splash && selectedEvent.value !== null);\nconst splashScreenRef = ref<HTMLElement | null>(null);\nconst backgroundImagesets = reactive<BackgroundImageset[]>([]);\nconst sheet = ref<SheetType | null>(null);\nconst layersLoaded = ref(false);\nconst positionSet = ref(false);\nconst trackSun = ref(true);\nconst pathInFoV = ref(false);\nconst forceCamera = computed(() => trackSun.value && !pathInFoV.value);\nconst showQuestion = ref(false);\nlet questionTimeout: ReturnType<typeof setTimeout> | null = null;\n\n\nconst tab = ref(0);\nlet howToUseTimeMs = 0;\nlet whatToExploreTimeMs = 0;\nlet howToUseStartTimestamp = null as number | null;\nlet whatToExploreStartTimestamp = null as number | null;\n\nconst playing = ref(false);\nconst showLocationSelector = ref(false);\n\nconst showHorizon = ref(true);\n\nconst startAzOffset = ref(40 * D2R);\nconst endAzOffset = ref(-startAzOffset.value);\nconst azOffsetSlope = computed(() => (endAzOffset.value - startAzOffset.value) / (endTime.value - startTime.value));\n\nconst sunDistance = ref(sunPlace.get_distance());\n\n// Get the next 4 \"dates of interest\"\n// i.e. equinoxes and solstices\nconst currentDate = new Date();\nconst currentYear = currentDate.getUTCFullYear();\nconst datesOfInterest = Seasons(currentYear);\n\n// Find dates that have passed and sort them by date\nconst pastEvents = Object.entries(datesOfInterest)\n  .filter(([_key, value]: [string, AstroTime]) => value.date < currentDate)\n  .map(entry => entry[0]);\n\n// If we have more than 1 past event, replace the older ones with next year's events\n// Keep only the most recent past event as our starting point\nif (pastEvents.length > 0) {\n  const nextSeasonsInfo = Seasons(currentYear + 1);\n  pastEvents.forEach(key => {\n    datesOfInterest[key] = nextSeasonsInfo[key];\n  });\n}\n\nconst startTime = ref(0);\nconst endTime = ref(0);\nconst sliderRange = sliderMax - sliderMin;\nconst sliderValue = computed({\n  get() {\n    const fraction = (currentTime.value.getTime() - startTime.value) / (endTime.value - startTime.value);\n    return sliderMin + fraction * sliderRange;\n  },\n  set(value: number) {\n    const fraction = (value - sliderMin) / sliderRange;\n    const time = fraction * (endTime.value - startTime.value) + startTime.value;\n    store.setTime(new Date(time));\n  }\n});\n\nconst middayTime = computed(() => 0.5 * (startTime.value + endTime.value));\nconst middayAltAz = computed(() => getSunPositionAtTime(new Date(middayTime.value)));\nconst highAltTimes = computed(() => {\n  const { rising: start, setting: end} = getTimeforSunAlt(highAltDeg, middayTime.value);\n  return { start, end }; \n});\nconst highAltCoordinates = computed(() => {\n  if (!(highAltTimes.value.start && highAltTimes.value.end)) {\n    return { start: null, end : null };\n  }\n  return {\n    start: getSunPositionAtTime(new Date(highAltTimes.value.start)),\n    end: getSunPositionAtTime(new Date(highAltTimes.value.end)),\n  };\n});\n\nconst sortedDatesOfInterest = computed(() => {\n  const entries: ([EventOfInterest, AstroTime])[] = Object.entries(datesOfInterest) as [EventOfInterest, AstroTime][];\n  const sortedEntries = entries.sort((a, b) => a[1].date.getTime() - b[1].date.getTime());\n  \n  // Add \"today\" as the first entry\n  const today: [EventOfInterest, AstroTime] = [\"today\", { date: new Date() } as AstroTime];\n  return [today, ...sortedEntries];\n});\n\nconst EVENTS_OF_INTEREST = [\n  \"today\",\n  \"mar_equinox\",\n  \"jun_solstice\",\n  \"sep_equinox\",\n  \"dec_solstice\",\n  \"custom\",\n] as const;\nconst selectedEvent = ref<EventOfInterest | null>(null);\n// const selectedDateType = ref<DateSelection | null>(null);\nconst selectedCustomDate = ref<Date | null>(null);\nconst showDatePicker = ref(false);\n\nconst getDateForEvent = (event: EventOfInterest): Date => {\n  if (event === \"today\") {\n    return new Date();\n  } else if (event === \"custom\" && selectedCustomDate.value) {\n    return selectedCustomDate.value;\n  } else {\n    return datesOfInterest[event].date;\n  }\n};\n\n\nconst handleDateSelection = (date: Date | null) => {\n  if (date) {\n    showDatePicker.value = false;\n    selectedCustomDate.value = date;\n    selectedEvent.value = 'custom';\n  }\n};\n\nfunction eventName(event: EventOfInterest): string {\n  const isSmall = smallSize.value;\n  switch (event) {\n  case \"today\":\n    return \"Today\";\n  case \"mar_equinox\":\n    return isSmall ? \"Mar Equinox\" : \"March Equinox\";\n  case \"jun_solstice\":\n    return isSmall ? \"Jun Solstice\" : \"June Solstice\";\n  case \"sep_equinox\":\n    return isSmall ? \"Sep Equinox\" : \"September Equinox\";\n  case \"dec_solstice\":\n    return isSmall ? \"Dec Solstice\" : \"December Solstice\";\n  case \"custom\":\n    return \"Custom\";\n  }\n}\n\nfunction getCurrentSeason(event: string, latitude: number): 'spring' | 'summer' | 'autumn' | 'winter' {\n\n  if (latitude >= 0) {\n    switch (event) {\n    case \"mar_equinox\":\n      return \"spring\";\n    case \"jun_solstice\":\n      return \"summer\";\n    case \"sep_equinox\":\n      return \"autumn\";\n    case \"dec_solstice\":\n      return \"winter\";      \n    }\n  } else {\n    switch (event) {\n    case \"mar_equinox\":\n      return \"autumn\";\n    case \"jun_solstice\":\n      return \"winter\";\n    case \"sep_equinox\":\n      return \"spring\";\n    case \"dec_solstice\":\n      return \"summer\";      \n    }\n  }\n  return \"spring\"; // fallback\n}\n\nfunction getCurrentSeasonForDate(date: Date, latitude: number): 'spring' | 'summer' | 'autumn' | 'winter' {\n  const year = date.getFullYear();\n  const seasonsForYear = Seasons(year);\n  \n  // Get the season dates for the year\n  const marEquinox = seasonsForYear.mar_equinox.date;\n  const junSolstice = seasonsForYear.jun_solstice.date;\n  const sepEquinox = seasonsForYear.sep_equinox.date;\n  const decSolstice = seasonsForYear.dec_solstice.date;\n  \n  // Determine which season the date falls into\n  let season: 'spring' | 'summer' | 'autumn' | 'winter';\n  \n  const getDate = (d: Date) => new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  \n  if (getDate(date) >= getDate(marEquinox) && getDate(date) < getDate(junSolstice)) {\n    season = 'spring';\n  } else if (getDate(date) >= getDate(junSolstice) && getDate(date) < getDate(sepEquinox)) {\n    season = 'summer';\n  } else if (getDate(date) >= getDate(sepEquinox) && getDate(date) < getDate(decSolstice)) {\n    season = 'autumn';\n  } else {\n    // Either before March equinox or after December solstice (winter)\n    season = 'winter';\n  }\n  \n  // Adjust for hemisphere\n  if (latitude < 0) {\n    // Southern hemisphere - seasons are opposite\n    switch (season) {\n    case 'spring': return 'autumn';\n    case 'summer': return 'winter';\n    case 'autumn': return 'spring';\n    case 'winter': return 'summer';\n    }\n  }\n  \n  return season;\n}\n\nconst seasonalColors = {\n  spring: '#FFA0D7',  \n  summer: '#F7EB67',  \n  autumn: '#FEB770',  \n  winter: '#c1e2fc'   \n};\n\nconst accentColor = computed(() => {\n\n  const event = selectedEvent.value;\n  if (!event) {\n    return seasonalColors.spring;\n  }\n  const latitude = selectedLocation.value.latitudeDeg;\n  // Handle \"today\" case\n  if (event === 'today') {\n    const today = new Date();\n    const currentSeason = getCurrentSeasonForDate(today, latitude);\n    return seasonalColors[currentSeason];\n  }\n  \n  // Handle custom date case\n  if (event === 'custom' && selectedCustomDate.value) {\n    const customSeason = getCurrentSeasonForDate(selectedCustomDate.value, latitude);\n    return seasonalColors[customSeason];\n  }\n  \n  const currentSeason = getCurrentSeason(event, latitude);\n  return seasonalColors[currentSeason];\n});\n\nconst displayedDate = computed(() => {\n  if (selectedEvent.value === 'today') {\n    return new Date();\n  } else if (selectedEvent.value === 'custom' && selectedCustomDate.value) {\n    return selectedCustomDate.value;\n  } else if (selectedEvent.value) {\n    return datesOfInterest[selectedEvent.value].date;\n  }\n  return new Date(); // fallback\n});\n\nconst currentDayInfo = computed(() => {\n  const day = getDateForEvent(selectedEvent.value || 'today');\n  return getStartAndEndTimes(day);\n});\n\nconst sunAlways = computed<\"up\" | \"down\" | null>(() => {\n  let polarInfo: ReturnType<typeof getStartAndEndTimes>[2] | null = null;\n  if (selectedEvent.value != null) {\n    polarInfo = currentDayInfo.value[2];\n  } else if (selectedCustomDate.value != null) {\n    polarInfo = getStartAndEndTimes(selectedCustomDate.value)[2];\n  }\n  return polarInfo != null ? \n    (polarInfo.sunAlwaysUp ? \"up\" : (polarInfo.sunAlwaysDown ? \"down\" : null)) :\n    null;\n});\n\nfunction updatePathInFoV() {\n  // If the Sun is always up, no need to do the width check, which is problematic then anyways\n  if (sunAlways.value === \"up\") {\n    pathInFoV.value = false;\n    return;\n  }\n  const startPos = getSunPositionAtTime(new Date(startTime.value));\n  const endPos = getSunPositionAtTime(new Date(endTime.value));\n  const context = WWTControl.singleton.renderContext;\n  let azWidth = Math.abs(endPos.azRad - startPos.azRad) * R2D;\n  const widthToFit = 47.8 * Math.log(0.9 * context.width) - 245;\n  const peakNorth = Math.min(Math.abs(middayAltAz.value.azRad), Math.abs(middayAltAz.value.azRad - 2 * Math.PI)) < Math.abs(middayAltAz.value.azRad - Math.PI);\n  if (peakNorth) {\n    azWidth = 360 - azWidth;\n  }\n  pathInFoV.value = (azWidth < widthToFit);\n}\n\nfunction dayString(date: Date) {\n  return date.toLocaleString(\"en-US\", {\n    year: \"numeric\",\n    month: smallSize.value ? \"short\" : \"long\",\n    day: \"numeric\",\n  });\n}\n\nfunction formatDayLength(milliseconds: number, polarInfo: { sunAlwaysUp: boolean; sunAlwaysDown: boolean }): string {\n  if (polarInfo.sunAlwaysDown) {\n    return \"0h 0m\";\n  }\n  \n  if (polarInfo.sunAlwaysUp) {\n    return \"24h 0m\";\n  }\n  \n  // Normal calculation for days with sunrise/sunset\n  const totalMinutes = Math.round(milliseconds / 60000);\n  const hours = Math.floor(totalMinutes / 60);\n  const minutes = totalMinutes % 60;\n  return `${hours}h ${minutes}m`;\n}\n\nfunction goToSun() {\n  const sunPos = getSunPositionAtTime(currentTime.value);\n  const radec = horizontalToEquatorial(\n    sunPos.altRad, \n    sunPos.azRad, \n    selectedLocation.value.latitudeDeg * D2R,\n    selectedLocation.value.longitudeDeg * D2R,  \n    currentTime.value\n  );\n  store.gotoRADecZoom({\n    ...radec,\n    zoomDeg: Math.min(store.zoomDeg, 180),\n    instant: false,\n  });\n}\nfunction getStartAndEndTimes(day: Date): [Date, Date, { sunAlwaysUp: boolean; sunAlwaysDown: boolean }] {\n  const time = day.getTime();\n  const { rising: dayStart, setting: dayEnd, always } = getTimeforSunAlt(0, time);\n\n  let start: Date;\n  let end: Date;\n  const sunAlwaysUp = always === 'up';\n  const sunAlwaysDown = always === 'down';\n\n  if (dayStart === null || dayEnd === null) {\n    console.log(\"Polar day or night detected\");\n    // moved checking for polar day/night to useSun\n    \n    // It don't know if it really make sense to have the slider go \n    // from 00:00 to 23:59 when for both polar night and noon\n    //  But I think that is the only choice we have\n    // utcMidnight = time - (time % (24 * 60 * 60 * 1000))\n    // localMidnight = utcMidnight - timezone offset\n    const localMidnight = time - (time % (24 * 60 * 60 * 1000)) - selectedTimezoneOffset.value;\n    start = new Date(localMidnight);\n    end = new Date(localMidnight + 86400000 - 60);\n  } else {\n    start = new Date(dayStart);\n    end = new Date(dayEnd);\n  }\n\n  return [start, end, { sunAlwaysUp, sunAlwaysDown }];\n}\n\nfunction updateSliderBounds(_newLocation: LocationDeg, oldLocation: LocationDeg) {\n  if (selectedEvent.value === null) {\n    return;\n  }\n  const [start, end, _polarInfo] = getStartAndEndTimes(getDateForEvent(selectedEvent.value));\n  startTime.value = start.getTime();\n  endTime.value = end.getTime();\n\n  const oldOffset = getTimezoneOffset(tzlookup(oldLocation.latitudeDeg, oldLocation.longitudeDeg));\n\n  const diff = oldOffset - selectedTimezoneOffset.value;\n  let newSelectedTime = currentTime.value.getTime() + diff;\n  newSelectedTime = Math.min(Math.max(startTime.value, newSelectedTime), endTime.value);\n  selectedTime.value = newSelectedTime;\n  \n  // Update time in WWT to reflect the new location's timing\n  store.setTime(new Date(newSelectedTime));\n}\n\nfunction handlePlaying(play: boolean) {\n  if (forceCamera.value) {\n    resetView(MAX_ZOOM);\n  }\n  // Auto-pause when time reaches sunset or sunrise, accounting for playing direction\n  if (playing.value && ((currentTime.value.getTime() >= endTime.value && store.clockRate >= 0) || ( currentTime.value.getTime() <= startTime.value && store.clockRate <= 0))) {\n    playing.value = false;\n    return;\n  }  \n\n  playing.value = play;\n  wwtStats.playPauseCount += 1;\n  events.push(play ? 'wwt_play' : 'wwt_pause');\n}\n\nfunction centerOnMidday(altitudeDeg: number | null =null) {\n  let altToUse: number;\n  if (altitudeDeg == null) {\n    const currentAltAz = equatorialToHorizontal(\n      store.raRad,\n      store.decRad,\n      selectedLocation.value.latitudeDeg * D2R,\n      selectedLocation.value.longitudeDeg * D2R,\n      store.currentTime,\n    );\n    altToUse = currentAltAz.altRad;\n  } else {\n    altToUse = altitudeDeg * D2R;\n  }\n  const middayRADec = horizontalToEquatorial(\n    altToUse,\n    middayAltAz.value.azRad,\n    selectedLocation.value.latitudeDeg * D2R,\n    selectedLocation.value.longitudeDeg * D2R,\n    store.currentTime,\n  );\n  store.gotoRADecZoom({\n    raRad: middayRADec.raRad,\n    decRad: middayRADec.decRad,\n    zoomDeg: store.zoomDeg,\n    instant: true,\n  });\n}\n\nfunction goToEvent(event: EventOfInterest) {\n  const day = getDateForEvent(event);\n  if (event !== 'custom') {\n    selectedCustomDate.value = day;\n  }\n  updateSliderBounds(selectedLocation.value, selectedLocation.value);\n  resetView();\n}\n\nconst wwtStats = markRaw({\n  timeResetCount: 0,\n  reverseCount: 0,\n  playPauseCount: 0,\n  speedups: [] as number[],\n  slowdowns: [] as number[],\n  rateSelections: [] as number[],\n  startTime: Date.now(),\n});\n\n// get lat and lon url query parameters for initial location\nconst urlParams = new URLSearchParams(window.location.search);\nconst urlLat = urlParams.get(\"lat\");\nconst urlLon = urlParams.get(\"lon\");\nlet initialLat: number = 42.3581;\nlet initialLon: number = -71.1056;\nif (urlLat && urlLon) {\n  initialLat = parseFloat(urlLat);\n  initialLon = parseFloat(urlLon);\n}\nconst selectedLocation = ref<LocationDeg>({\n  longitudeDeg: initialLon,\n  latitudeDeg: initialLat,\n  // latitudeDeg: 72.40 // test polar latitude\n});\n\nfunction createQueryUrl(): string {\n  const lat = `${selectedLocation.value.latitudeDeg}`;\n  const lon = `${selectedLocation.value.longitudeDeg}`;\n  const params = new URLSearchParams(window.location.search);\n  params.set(\"lat\", lat);\n  params.set(\"lon\", lon);\n  return `${window.location.origin}/?${params.toString()}`;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(window as any).createQueryUrl = createQueryUrl;\n\nconst selectedLocationInfo = ref<LocationInfo>({ name: \"\", latitude: \"\", longitude: \"\" });\nconst searchErrorMessage = ref<string | null>(null);\nconst geocodingOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  access_token: process.env.VUE_APP_MAPBOX_ACCESS_TOKEN ?? \"\", \n};\n\nfunction updateLocationFromMap(location: LocationDeg) {\n  console.log(\"Updating location from map:\", location);\n  selectedLocation.value = location;\n  userSelectedLocations.push([location.latitudeDeg, location.longitudeDeg]);\n  events.push(`location_update ${location.latitudeDeg} ${location.longitudeDeg}`);\n}\n\nfunction latText(latitudeDeg: number): string {\n  const ns = latitudeDeg >= 0 ? 'N' : 'S';\n  const lat = Math.abs(latitudeDeg).toFixed(2);\n  return `${lat} ${ns}`;\n}\n\nfunction lonText(longitudeDeg: number): string {\n  const ew = longitudeDeg >= 0 ? 'E' : 'W';\n  const lon = Math.abs(longitudeDeg).toFixed(2);\n  return `${lon} ${ew}`;\n}\n\nasync function getLocationInfo(longitudeDeg: number, latitudeDeg: number): Promise<LocationInfo> {\n  let location: string = \"\";\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  try {\n    location = await textForLocation(longitudeDeg, latitudeDeg, geocodingOptions);\n  } catch (err) {\n    console.error(\"Error getting location text:\", err);\n  }\n  const locationName = !startsWithNumber(location) ? `${location}` : \"\";\n  const formattedLat = latText(latitudeDeg);\n  const formattedLon = lonText(longitudeDeg);\n\n  return {\n    name: locationName,\n    latitude: formattedLat,\n    longitude: formattedLon,\n  };\n}\n\nfunction startsWithNumber(text: string): boolean {\n  return text.charAt(0).match(/[0-9]|-/) !== null;\n}\n\nfunction setLocationFromFeature(feature: MapBoxFeature) {\n  selectedLocation.value = { longitudeDeg: feature.center[0], latitudeDeg: feature.center[1] };\n  getLocationInfo(feature.center[0], feature.center[1]).then(locationInfo => {\n    selectedLocationInfo.value = locationInfo;\n  }).catch(_err => {\n    searchErrorMessage.value = \"An error occurred while searching\";\n  });\n  userSelectedLocations.push(feature.center);\n  events.push(`location_update ${feature.center[0]} ${feature.center[1]}`);\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  setLocationFromFeature(feature);\n}\n\nasync function updateSelectedLocationInfo() {\n  const locationInfo = await getLocationInfo(selectedLocation.value.longitudeDeg, selectedLocation.value.latitudeDeg);\n  selectedLocationInfo.value = locationInfo;\n}\n\nfunction searchProvider(text: string): Promise<MapBoxFeatureCollection> {\n  return geocodingInfoForSearch(text, geocodingOptions);\n}\n\nconst selectedTime = ref(Date.now());\n// setInterval(() => {\n//   if (playing.value) {\n//     selectedTime.value = currentTime.value.getTime();\n//   }\n// }, 40);\n\nconst { selectedTimezone, selectedTimezoneOffset } = useTimezone(selectedLocation);\n  \nconst { getTimeforSunAlt, getSunPositionAtTime } = useSun({\n  store,\n  location: selectedLocation,\n  selectedTime: currentTime,\n  selectedTimezoneOffset,\n  zoomLevel: 360,\n});\n\nconst selectedLocaledTimeDateString = computed(() => {\n  const formatString = \"h:mm aa (zzz)\";\n  return formatInTimeZone(currentTime.value, selectedTimezone.value, formatString);\n});\n\n// import { getTimezoneOffset } from \"date-fns-tz\";\n// const testTime = ref(new Date('Sep 22 2025 00:00:00 GMT-0400').getTime());\n// const testSun = useSun({\n//   store,\n//   location: selectedLocation,\n//   selectedTime: testTime,\n//   selectedTimezoneOffset: getTimezoneOffset(\"America/New_York\", testTime.value),\n//   zoomLevel: 360,\n// });\n// console.log(\"Testing sun values\");\n// const { rising: testRising, setting: testSetting } = testSun.getTimeforSunAlt(0);\n// if (testRising !== null && testSetting !== null) {\n//   console.log(`Test Sun Rising: ${new Date(testRising)}`);\n//   console.log(`Test Sun Setting: ${new Date(testSetting)}`);\n// }\n\nfunction aspectRatioSetup() {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error WWTControl does have a canvas element (that's not TS-exposed)\n  const canvas = WWTControl.singleton.canvas as HTMLCanvasElement;\n\n  function updateAzOffsets() {\n    const aspectRatio = canvas.width / canvas.height;\n    startAzOffset.value = 0.35 * (60 * aspectRatio + 13.5) * D2R;\n    endAzOffset.value = -startAzOffset.value;\n  }\n\n  const observer = new ResizeObserver((entries) => {\n    for (const entry of entries) {\n      if (entry.target === canvas) {\n        updateAzOffsets();\n        resetView();\n        return;\n      }\n    }\n  });\n\n  observer.observe(canvas);\n  updateAzOffsets();\n}\n\nonMounted(() => {\n  updateSelectedLocationInfo();\n  store.waitForReady().then(async () => {\n    WWTControl.singleton.set_zoomMax(MAX_ZOOM);\n    skyBackgroundImagesets.forEach(iset => backgroundImagesets.push(iset));\n\n    updateWWTLocation(selectedLocation.value);\n    \n    aspectRatioSetup();\n\n    store.setClockSync(false);\n    store.setClockRate(0);\n\n    // Adding Alt-Az grid here\n    store.applySetting([\"showAltAzGrid\", true]);\n    store.applySetting([\"showAltAzGridText\", true]);\n    store.applySetting([\"altAzGridColor\", Color.fromArgb(255, 255, 255, 255)]);\n    store.applySetting([\"localHorizonMode\", true]);\n\n    doWWTModifications();\n\n    // Set the initial event after everything is ready\n    selectedEvent.value = sortedDatesOfInterest.value[0][0];\n\n    // If there are layers to set up, do that here!\n    positionSet.value = true;\n    layersLoaded.value = true;\n\n    questionDisplaySetup();\n  });\n\n  createUserEntry();\n});\n\nconst ready = computed(() => layersLoaded.value && positionSet.value);\n\n/* `isLoading` is a bit redundant here, but it could potentially have independent logic */\nconst isLoading = computed(() => !ready.value);\n\nconst inNorthernHemisphere = computed(() => selectedLocation.value.latitudeDeg > 0);\n\n/* Properties related to device/screen characteristics */\nconst smallSize = computed(() => smAndDown.value);\nconst mobile = computed(() => smallSize.value && touchscreen);\n\nconst infoSheetLocation = computed(() => smallSize.value ? \"bottom\" : \"left\");\nconst infoSheetHeight = computed(() => infoSheetLocation.value === \"bottom\" ? `${infoFraction}%` : \"100%\");\nconst infoSheetWidth = computed(() => infoSheetLocation.value === \"bottom\" ? \"100%\" : `${infoFraction}%`);\nconst infoTextHeight = computed(() => infoSheetLocation.value === \"bottom\" ? `calc(${infoFraction}vh - 25px)` : \"calc(100vh - 25px)\");\nconst infoSheetTransition = computed(() => infoSheetLocation.value === \"bottom\" ? \"dialog-bottom-transition\" : \"slide-x-transition\");\n\n/* This lets us inject component data into element CSS */\nconst cssVars = computed(() => {\n  return {\n    \"--accent-color\": accentColor.value,\n    \"--app-content-height\": showTextSheet.value && infoSheetLocation.value === \"bottom\" ? `${100 - infoFraction}vh` : \"100dvh\",\n    \"--app-content-width\": showTextSheet.value && infoSheetLocation.value === \"left\" ? `${100 - infoFraction}vw` : \"100dvw\",\n    \"--time-slider-width\": `${daylightPercentage.value.toFixed(2)}%`,\n    \"--time-slider-left\": `${(100 * Math.min(1, dayFractionForTimestamp(startTime.value + selectedTimezoneOffset.value))).toFixed(2)}%`,\n    \"--thumb-label-color\": sunAlways.value === \"down\" ? NIGHTTIME : accentColor.value,\n    \"--info-sheet-width\": infoSheetWidth.value,\n    \"--info-sheet-height\": infoSheetHeight.value,\n    \"--info-text-height\": infoTextHeight.value,\n  };\n});\n\nconst daylightPercentage = computed(() => 100 * Math.min(1, dayFractionForTimestamp(endTime.value - startTime.value)));\n\n\n\n/**\n  Computed flags that control whether the relevant dialogs display.\n  The `sheet` data member stores which sheet is open, so these are just\n  computed wrappers around modifying/querying that which can be used as\n  dialog v-model values\n*/\nconst showTextSheet = computed({\n  get() {\n    return sheet.value === \"text\";\n  },\n  set(_value: boolean) {\n    selectSheet(\"text\");\n  }\n});\n\nconst showVideoSheet = computed({\n  get() {\n    return sheet.value === \"video\";\n  },\n  set(value: boolean) {\n    selectSheet(\"video\");\n    if (!value) {\n      const video = document.querySelector(\"#info-video\") as HTMLVideoElement;\n      video.pause();\n    }\n  }\n});\n\n/**\n  This is convenient if there's any other logic that we want to run\n  when the splash screen is closed\n*/\nfunction closeSplashScreen() {\n  showSplashScreen.value = false;\n}\n\nfunction selectSheet(sheetType: SheetType | null) {\n  if (sheet.value === sheetType) {\n    sheet.value = null;\n    nextTick(() => {\n      blurActiveElement();\n    });\n  } else {\n    sheet.value = sheetType;\n  }\n}\n\nfunction resetView(zoomDeg?: number, withAzOffset=true) {\n\n  let altDeg = 33;\n  updatePathInFoV();\n  if (pathInFoV.value) {\n    setTimeout(() => centerOnMidday(altDeg), 100);\n    return;\n  }\n\n  const time = store.currentTime;\n  const t = time.getTime();\n\n  const latRad = selectedLocation.value.latitudeDeg * D2R;\n  const lonRad = selectedLocation.value.longitudeDeg * D2R;\n\n  const sunAltAz = getSunPositionAtTime(time);\n  let az = sunAltAz.azRad;\n\n  const middayAltDeg = middayAltAz.value.altRad * R2D;\n  const middayAzDeg = middayAltAz.value.azRad * R2D;\n  const peakNorth = Math.min(Math.abs(middayAzDeg), Math.abs(middayAzDeg - 360)) < Math.abs(middayAzDeg - 180);\n  if (middayAltDeg > highAltDeg) {\n\n    // Altitude modifications\n    const dayFrac  = (time.getTime() - startTime.value) / (endTime.value - startTime.value);\n    const dayAzFactor = -2 * Math.abs(0.5 - dayFrac) + 1;\n    altDeg = middayAltDeg * dayAzFactor;\n    altDeg = Math.max(90 - Math.abs(altDeg - 90), 33);\n\n    // Azimuth modifications\n    const { start: highStartTime, end: highEndTime } = highAltTimes.value;\n    const { start, end } = highAltCoordinates.value;\n    if (highStartTime && highEndTime && start && end && t > highStartTime && t < highEndTime) {\n      const topStartAz = start.azRad;\n      let topEndAz = end.azRad;\n      const tSouth = (Math.PI - topStartAz) / (topEndAz - topStartAz);\n      const passThroughSouth = tSouth >= 0 && tSouth <= 1;\n      if (peakNorth === passThroughSouth) {\n        topEndAz -= 2 * Math.PI;\n      }\n\n      const tTop = (t - highStartTime) / (highEndTime - highStartTime);\n      az = tTop * (topEndAz - topStartAz) + topStartAz;\n    }\n  }\n  const alt = altDeg * D2R;\n\n  if (t > 0 && withAzOffset) {\n    const offset = (azOffsetSlope.value * (t - startTime.value) + startAzOffset.value);\n    const sgn = peakNorth ? -1 : 1;\n    az += (offset * sgn);\n  }\n  const raDec = horizontalToEquatorial(\n    alt,\n    az,\n    latRad,\n    lonRad,\n    time,\n  );\n\n  store.gotoRADecZoom({\n    raRad: raDec.raRad,\n    decRad: raDec.decRad,\n    zoomDeg: zoomDeg ?? MAX_ZOOM,\n    instant: true,\n  });\n}\n\nfunction updateWWTLocation(location: LocationDeg) {\n  wwtSettings.set_locationLat(location.latitudeDeg);\n  wwtSettings.set_locationLng(location.longitudeDeg);\n}\n\nfunction doWWTModifications() {\n  Grids.drawEcliptic = drawEcliptic;\n\n  // We need to render one frame ahead of time\n  // as there's a lot of setup done on the first frame\n  // render that we need to use\n  WWTControl.singleton.renderOneFrame();\n\n  const boundRenderOneFrame = renderOneFrame.bind(WWTControl.singleton);\n  const newFrameRender = function() { \n    boundRenderOneFrame(\n      showHorizon.value,\n      showHorizon.value,\n      false,\n    );\n  };\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton._drawSkyOverlays = drawSkyOverlays.bind(WWTControl.singleton);\n\n  // as well as our custom text overlays\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton.renderOneFrame = newFrameRender;\n\n  const originalUpdatePlanetLocations = Planets.updatePlanetLocations;\n  function newUpdatePlanetLocations(threeD: boolean) {\n    originalUpdatePlanetLocations(threeD);\n    // Only scale the Sun (index 0)\n    // Use smaller scale (1) during polar night, normal scale (4) otherwise\n    const polarInfo = currentDayInfo.value[2];\n    Planets._planetScales[0] = Planets._planetScales[0] * (polarInfo.sunAlwaysDown ? 1 : 4);\n  }\n  Planets.updatePlanetLocations = newUpdatePlanetLocations;\n  Planets.drawPlanets = drawPlanets;\n}\n\nwatch(selectedLocation, (location: LocationDeg, oldLocation: LocationDeg) => {\n  updateSelectedLocationInfo();\n  updateWWTLocation(location);\n  updateSliderBounds(location, oldLocation);\n  resetView();\n});\n\nwatch(currentTime, (_time: Date) => {\n  // Auto-pause when time reaches sunset or sunrise, accounting for playing direction\n  if (playing.value && ((_time.getTime() >= endTime.value && store.clockRate >= 0) || ( _time.getTime() <= startTime.value && store.clockRate <= 0))) {\n    playing.value = false;\n    return;\n  }  \n  if (forceCamera.value) {\n    resetView(store.zoomDeg);\n  }\n  sunDistance.value = sunPlace.get_distance();\n});\n\nwatch(forceCamera, (value: boolean) => {\n  if (value) {\n    resetView();\n  }\n});\n\nwatch(selectedEvent, (event: EventOfInterest | null) => {\n  if (!event) {\n    return;\n  }\n\n  goToEvent(event);\n  const representation = event === \"custom\" ? `event_custom ${selectedCustomDate.value?.toISOString()}` : event as string;\n  userSelectedDates.push(representation);\n  events.push(representation);\n});\n\nwatch(selectedCustomDate, (date: Date | null) => {\n  if (date && selectedEvent.value === \"custom\") {\n    goToEvent(\"custom\");\n\n    const representation = `event_custom ${selectedCustomDate.value?.toISOString()}`;\n    userSelectedDates.push(representation);\n    events.push(representation);\n  }\n});\n\nwatch(inNorthernHemisphere, (_inNorth: boolean) => resetNSEWText());\nwatch(splashReady, (ready: boolean) => {\n  if (ready) {\n    nextTick(() => {\n      if (splashScreenRef.value) {\n        const firstFocusable = splashScreenRef.value.querySelector<HTMLElement>('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n        if (firstFocusable) {\n          firstFocusable.focus();\n        }\n      }\n    });\n  }\n});\n\nfunction updateTabTime(leavingTab: number, timestamp: number) {\n  if (leavingTab === 0) {\n    howToUseTimeMs += (timestamp - (howToUseStartTimestamp ?? timestamp));\n    howToUseStartTimestamp = null;\n  } else {\n    whatToExploreTimeMs += (timestamp - (whatToExploreStartTimestamp ?? timestamp));\n    whatToExploreStartTimestamp = null;\n  }\n}\n\nfunction startTabTime(enteringTab: number, timestamp: number) {\n  if (enteringTab === 0) {\n    howToUseStartTimestamp = timestamp;\n  } else {\n    whatToExploreStartTimestamp = timestamp;    \n  }\n}\n\nwatch(showTextSheet, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    startTabTime(tab.value, now);\n  } else {\n    updateTabTime(tab.value, now);\n  }\n});\n\nwatch(tab, (newTab: number) => {\n  // This shouldn't ever happen\n  if (!showTextSheet.value) {\n    return;\n  }\n  // We're going to `newTab`\n  // The tab indices are 0 and 1, so we're leaving `1 - newTab`\n  const now = Date.now();\n  startTabTime(newTab, now);\n  updateTabTime(1 - newTab, now);\n});\n\n\nconst STORY_DATA_URL = `${API_BASE_URL}/seasons/data`;\nconst storedOptOut = window.localStorage.getItem(OPT_OUT_KEY);\nconst storedAhaOptOut = window.localStorage.getItem(AHA_OPT_OUT_KEY);\nconst maybeUUID = window.localStorage.getItem(UUID_KEY);\nconst optOut = typeof storedOptOut === \"string\" ? storedOptOut === \"true\" : null;\nconst responseOptOut = ref(optOut);\nconst ahaOptOut = ref(typeof storedAhaOptOut === \"string\" ? storedAhaOptOut === \"true\" : null);\nconst showPrivacyDialog = ref(false);\nconst existingUser = maybeUUID !== null;\nconst uuid = maybeUUID ?? v4();\nif (!existingUser) {\n  window.localStorage.setItem(UUID_KEY, uuid);\n}\n\nlet timeSliderUsedCount = 0;\nlet events: string[] = [];\nlet userSelectedDates: string[] = [];\nlet userSelectedLocations: [number, number][] = [];\nlet ahaMomentResponses: string[] = [];\nlet appStartTimestamp = Date.now();\n\nfunction onTimeSliderEnd(_value: number) {\n  timeSliderUsedCount += 1;\n  events.push(\"time_slider_used\");\n}\n\nasync function questionDisplaySetup() {\n  if (responseOptOut.value || ahaOptOut.value) {\n    return;\n  }\n\n  const existingDataResponse = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" }\n  });\n\n  const existingDataContent = await existingDataResponse.json();\n  const alreadyAnswered = existingDataResponse.status === 200 && existingDataContent.response.aha_moment_responses.length > 0;\n\n  if (alreadyAnswered) {\n    return;\n  }\n\n  setQuestionTimeout();\n}\n\nfunction setQuestionTimeout(timeout=4 * 60_000) {\n  questionTimeout = setTimeout(() => {\n    showQuestion.value = true;\n  }, timeout);\n}\n\nasync function createUserEntry() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const response = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" },\n  });\n  const content = await response.json();\n  const exists = response.status === 200 && content.response?.user_uuid != undefined;\n  if (exists) {\n    return;\n  }\n\n  fetch(`${STORY_DATA_URL}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_uuid: uuid,\n    }),\n  });\n}\n\nfunction resetData() {\n  howToUseTimeMs = 0;\n  whatToExploreTimeMs = 0;\n\n  timeSliderUsedCount = 0;\n  events = [];\n  userSelectedDates = [];\n  userSelectedLocations = [];\n  ahaMomentResponses = [];\n  Object.assign(wwtStats, {\n    timeResetCount: 0,\n    reverseCount: 0,\n    playPauseCount: 0,\n    speedups: [],\n    slowdowns: [],\n    rateSelections: [],\n    startTime: selectedTime.value,\n  });\n\n  const now = Date.now();\n  appStartTimestamp = now;\n  howToUseStartTimestamp = (showTextSheet.value && tab.value == 0) ? now : null;\n  whatToExploreStartTimestamp = (showTextSheet.value && tab.value == 1) ? now : null;\n}\n\nfunction updateUserData() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const now = Date.now();\n  const howToUseTime = (showTextSheet.value && howToUseStartTimestamp !== null) ? now - howToUseStartTimestamp : howToUseTimeMs;\n  const whatToExploreTime = (showTextSheet.value && whatToExploreStartTimestamp !== null) ? now - whatToExploreStartTimestamp : whatToExploreTimeMs;\n  const body = {\n    events,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    time_slider_used_count: timeSliderUsedCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    user_selected_dates: userSelectedDates,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    user_selected_locations: userSelectedLocations,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    app_time_ms: now - appStartTimestamp,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    how_to_use_time_ms: howToUseTime,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    what_to_explore_time_ms: whatToExploreTime,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_time_reset_count: wwtStats.timeResetCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_reverse_count: wwtStats.reverseCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_play_pause_count: wwtStats.playPauseCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_speedups: wwtStats.speedups,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_slowdowns: wwtStats.slowdowns,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_rate_selections: wwtStats.rateSelections,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_start_stop_times: [wwtStats.startTime, selectedTime.value],\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    aha_moment_response: ahaMomentResponses,\n  } as Record<string, unknown>;\n  fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify(body),\n    keepalive: true,\n  }).then(() => resetData());\n}\n\nwatch(showSplashScreen, (show: boolean) => {\n  if (!show && responseOptOut.value === null) {\n    showPrivacyDialog.value = true; \n  }\n});\n\nwatch(responseOptOut, (optOut: boolean | null) => {\n  if (optOut !== null) {\n    window.localStorage.setItem(OPT_OUT_KEY, String(optOut));\n  }\n});\n\nwatch(ahaOptOut, (optOut: boolean | null) => {\n  if (optOut !== null) {\n    window.localStorage.setItem(AHA_OPT_OUT_KEY, String(optOut));\n  }\n});\n\nwatch(showQuestion, (show: boolean) => {\n  if (show && questionTimeout) {\n    clearTimeout(questionTimeout);\n  }\n});\n\nwindow.addEventListener(\"visibilitychange\", () => {\n  if (document.visibilityState === \"hidden\") {\n    updateUserData();\n  } else {\n    resetData();\n  }\n});\n\nwindow.onbeforeunload = updateUserData;\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_WorldWideTelescope = _resolveComponent(\"WorldWideTelescope\")!\n  const _component_splash_screen = _resolveComponent(\"splash-screen\")!\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_font_awesome_layers = _resolveComponent(\"font-awesome-layers\")!\n  const _component_geolocation_button = _resolveComponent(\"geolocation-button\")!\n  const _component_location_search = _resolveComponent(\"location-search\")!\n  const _component_location_selector = _resolveComponent(\"location-selector\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_icon_button = _resolveComponent(\"icon-button\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_date_picker = _resolveComponent(\"v-date-picker\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n  const _component_v_slider = _resolveComponent(\"v-slider\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_speed_control = _resolveComponent(\"speed-control\")!\n  const _component_daylight_pie_chart = _resolveComponent(\"daylight-pie-chart\")!\n  const _component_credit_logos = _resolveComponent(\"credit-logos\")!\n  const _component_v_tab = _resolveComponent(\"v-tab\")!\n  const _component_v_tabs = _resolveComponent(\"v-tabs\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_container = _resolveComponent(\"v-container\")!\n  const _component_v_window_item = _resolveComponent(\"v-window-item\")!\n  const _component_funding_acknowledgement = _resolveComponent(\"funding-acknowledgement\")!\n  const _component_v_window = _resolveComponent(\"v-window\")!\n  const _component_question_dialog = _resolveComponent(\"question-dialog\")!\n  const _component_v_expand_transition = _resolveComponent(\"v-expand-transition\")!\n  const _component_v_app = _resolveComponent(\"v-app\")!\n  const _directive_ripple = _resolveDirective(\"ripple\")!\n\n  return (_openBlock(), _createBlock(_component_v_app, {\n    id: \"app\",\n    style: _normalizeStyle(cssVars.value)\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_WorldWideTelescope),\n        (splashReady.value)\n          ? (_openBlock(), _createBlock(_component_splash_screen, {\n              key: 0,\n              ref_key: \"splashScreenRef\",\n              ref: splashScreenRef,\n              title: \"Seasons\",\n              cssVars: cssVars.value,\n              onClose: closeSplashScreen,\n              onLocationSelected: setLocationFromSearchFeature\n            }, null, 8, [\"cssVars\"]))\n          : _createCommentVNode(\"\", true),\n        _createVNode(_Transition, { name: \"fade\" }, {\n          default: _withCtx(() => [\n            _withDirectives(_createElementVNode(\"div\", _hoisted_2, [...(_cache[44] || (_cache[44] = [\n              _createElementVNode(\"div\", { class: \"container\" }, [\n                _createElementVNode(\"div\", { class: \"spinner\" }),\n                _createElementVNode(\"p\", null, \"Loading \")\n              ], -1)\n            ]))], 512), [\n              [_vShow, isLoading.value]\n            ])\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", {\n          id: \"top-content\",\n          inert: showSplashScreen.value || undefined\n        }, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createElementVNode(\"div\", _hoisted_6, [\n                _createElementVNode(\"button\", {\n                  onClick: _cache[0] || (_cache[0] = ($event: any) => (showLocationSelector.value = !showLocationSelector.value)),\n                  class: \"icon-location-button clickable-object\"\n                }, [\n                  _createVNode(_component_font_awesome_layers, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_font_awesome_icon, {\n                        icon: \"location-dot\",\n                        color: \"black\"\n                      }),\n                      _createVNode(_component_font_awesome_icon, {\n                        icon: \"location-dot\",\n                        color: accentColor.value,\n                        transform: \"shrink-3\"\n                      }, null, 8, [\"color\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _createElementVNode(\"h4\", {\n                  onClick: _cache[1] || (_cache[1] = ($event: any) => (showLocationSelector.value = !showLocationSelector.value)),\n                  class: \"clickable-object\"\n                }, \"View from\")\n              ]),\n              _createElementVNode(\"button\", {\n                id: \"location-button\",\n                class: \"event-button info-button\",\n                onClick: _cache[2] || (_cache[2] = ($event: any) => (showLocationSelector.value = true))\n              }, [\n                (selectedLocationInfo.value.name)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                      _createElementVNode(\"strong\", null, _toDisplayString(selectedLocationInfo.value.name), 1)\n                    ]))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"div\", null, \"Lat: \" + _toDisplayString(selectedLocationInfo.value.latitude), 1),\n                _createElementVNode(\"div\", null, \"Long: \" + _toDisplayString(selectedLocationInfo.value.longitude), 1)\n              ])\n            ]),\n            _createVNode(_component_v_dialog, {\n              modelValue: showLocationSelector.value,\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((showLocationSelector).value = $event)),\n              \"max-width\": \"fit-content\",\n              transition: \"slide-y-transition\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_card, null, {\n                  default: _withCtx(() => [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                      _createVNode(_component_font_awesome_icon, {\n                        style: {\"cursor\":\"pointer\",\"z-index\":\"1000\"},\n                        icon: \"xmark\",\n                        size: \"xl\",\n                        onClick: _cache[3] || (_cache[3] = ($event: any) => (showLocationSelector.value = false)),\n                        onKeyup: _cache[4] || (_cache[4] = _withKeys(($event: any) => (showLocationSelector.value = false), [\"enter\"])),\n                        tabindex: \"0\",\n                        color: \"black\"\n                      })\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                      _createVNode(_component_geolocation_button, {\n                        id: \"location\",\n                        size: \"30px\",\n                        density: \"default\",\n                        elevation: \"5\",\n                        color: accentColor.value,\n                        onGeolocation: _cache[5] || (_cache[5] = ($event: any) => (selectedLocation.value = {longitudeDeg: $event.longitude, latitudeDeg: $event.latitude}))\n                      }, null, 8, [\"color\"]),\n                      _createVNode(_component_location_search, {\n                        class: _normalizeClass(['location-search']),\n                        small: \"\",\n                        \"button-size\": \"xl\",\n                        \"accent-color\": accentColor.value,\n                        \"search-provider\": searchProvider,\n                        onSetLocation: setLocationFromSearchFeature,\n                        onError: _cache[6] || (_cache[6] = ($event: any) => (searchErrorMessage.value = $event))\n                      }, null, 8, [\"accent-color\"])\n                    ]),\n                    _createVNode(_component_location_selector, {\n                      \"model-value\": selectedLocation.value,\n                      \"onUpdate:modelValue\": updateLocationFromMap\n                    }, null, 8, [\"model-value\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"]),\n            _createElementVNode(\"div\", _hoisted_10, [\n              _createVNode(_component_v_checkbox, {\n                modelValue: trackSun.value,\n                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((trackSun).value = $event)),\n                label: \"Auto-track Sun\",\n                density: \"compact\",\n                \"hide-details\": \"\",\n                onKeydown: [\n                  _cache[9] || (_cache[9] = _withKeys(_withModifiers(($event: any) => (forceCamera.value = !forceCamera.value), [\"prevent\"]), [\"space\"])),\n                  _cache[10] || (_cache[10] = _withKeys(_withModifiers(($event: any) => (forceCamera.value = !forceCamera.value), [\"prevent\"]), [\"enter\"]))\n                ]\n              }, null, 8, [\"modelValue\"])\n            ]),\n            false\n              ? (_openBlock(), _createBlock(_component_icon_button, {\n                  key: 0,\n                  onActivate: goToSun,\n                  icon: \"fa-sun\",\n                  color: accentColor.value,\n                  \"tooltip-text\": 'Go to Sun',\n                  \"tooltip-location\": \"start\",\n                  size: \"sm\"\n                }, null, 8, [\"color\"]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_icon_button, {\n              modelValue: showTextSheet.value,\n              \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((showTextSheet).value = $event)),\n              icon: \"fa-info\",\n              color: accentColor.value,\n              \"tooltip-text\": showTextSheet.value ? 'Hide Info' : 'Learn More',\n              \"tooltip-location\": \"start\",\n              size: \"sm\"\n            }, null, 8, [\"modelValue\", \"color\", \"tooltip-text\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_11, [\n            _createElementVNode(\"div\", _hoisted_12, [\n              _createElementVNode(\"button\", {\n                onClick: _cache[12] || (_cache[12] = ($event: any) => (showDatePicker.value = !showDatePicker.value)),\n                class: \"display-date-button mr-2 clickable-object\"\n              }, [\n                _createVNode(_component_font_awesome_layers, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_font_awesome_icon, {\n                      icon: \"calendar-day\",\n                      color: \"black\"\n                    }),\n                    _createVNode(_component_font_awesome_icon, {\n                      icon: \"calendar-day\",\n                      color: accentColor.value,\n                      transform: \"shrink-3\"\n                    }, null, 8, [\"color\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _createElementVNode(\"h4\", {\n                onClick: _cache[13] || (_cache[13] = ($event: any) => (showDatePicker.value = !showDatePicker.value)),\n                class: \"clickable-object\"\n              }, \"Displayed Date\")\n            ]),\n            _createElementVNode(\"button\", {\n              id: \"date-info\",\n              onClick: _cache[14] || (_cache[14] = ($event: any) => (showDatePicker.value = !showDatePicker.value)),\n              class: \"event-button info-button\"\n            }, [\n              _createElementVNode(\"div\", _hoisted_13, [\n                _createElementVNode(\"strong\", null, _toDisplayString(dayString(displayedDate.value)), 1)\n              ]),\n              _createElementVNode(\"div\", null, \"Length of Day: \" + _toDisplayString(formatDayLength(endTime.value - startTime.value, currentDayInfo.value[2])), 1),\n              _createElementVNode(\"div\", null, \"Distance to Sun: \" + _toDisplayString(sunDistance.value.toFixed(2)) + \" au\", 1)\n            ]),\n            _createElementVNode(\"div\", _hoisted_14, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sortedDatesOfInterest.value, ([event], index) => {\n                return _withDirectives((_openBlock(), _createElementBlock(\"button\", {\n                  class: _normalizeClass([[event === selectedEvent.value ? 'selected' : ''], \"event-button\"]),\n                  key: index,\n                  onClick: ($event: any) => {selectedEvent.value = event;}\n                }, [\n                  _createElementVNode(\"div\", null, _toDisplayString(eventName(event)), 1)\n                ], 10, _hoisted_15)), [\n                  [_directive_ripple]\n                ])\n              }), 128)),\n              _createElementVNode(\"div\", _hoisted_16, [\n                _createElementVNode(\"button\", {\n                  onClick: _cache[15] || (_cache[15] = ($event: any) => (showDatePicker.value = !showDatePicker.value)),\n                  color: accentColor.value,\n                  variant: \"outlined\",\n                  size: \"small\",\n                  class: \"calendar-button event-button\"\n                }, [\n                  _createVNode(_component_font_awesome_icon, { icon: \"calendar-day\" }),\n                  _cache[45] || (_cache[45] = _createTextVNode(\" Choose Any Date \", -1))\n                ], 8, _hoisted_17),\n                _createVNode(_component_v_dialog, {\n                  modelValue: showDatePicker.value,\n                  \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((showDatePicker).value = $event)),\n                  \"max-width\": \"fit-content\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_card, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_card_title, { class: \"text-h6 mb-0 mt-2\" }, {\n                          default: _withCtx(() => [...(_cache[46] || (_cache[46] = [\n                            _createTextVNode(\" Select Date \", -1)\n                          ]))]),\n                          _: 1\n                        }),\n                        _createVNode(_component_v_card_text, { class: \"my-0 mx-2 pa-0\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_date_picker, {\n                              \"model-value\": selectedCustomDate.value,\n                              \"onUpdate:modelValue\": handleDateSelection,\n                              color: accentColor.value,\n                              \"hide-header\": \"\"\n                            }, null, 8, [\"model-value\", \"color\"])\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_v_card_actions, { class: \"my-0\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_btn, {\n                              text: \"\",\n                              onClick: _cache[16] || (_cache[16] = ($event: any) => (showDatePicker.value = false))\n                            }, {\n                              default: _withCtx(() => [...(_cache[47] || (_cache[47] = [\n                                _createTextVNode(\" Cancel \", -1)\n                              ]))]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ])\n            ])\n          ])\n        ], 8, _hoisted_3),\n        _createElementVNode(\"div\", {\n          id: \"bottom-content\",\n          inert: showSplashScreen.value || undefined\n        }, [\n          _createElementVNode(\"div\", _hoisted_19, [\n            _createElementVNode(\"div\", _hoisted_20, [\n              (!smallSize.value)\n                ? (_openBlock(), _createBlock(_component_v_slider, {\n                    key: 0,\n                    min: sliderMin,\n                    max: sliderMax,\n                    value: null,\n                    disabled: \"\",\n                    class: \"dummy-time-slider\"\n                  }))\n                : _createCommentVNode(\"\", true),\n              _createVNode(_component_v_slider, {\n                modelValue: sliderValue.value,\n                \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => ((sliderValue).value = $event)),\n                color: sunAlways.value === 'down' ? NIGHTTIME : accentColor.value,\n                min: sliderMin,\n                max: sliderMax,\n                \"thumb-label\": \"always\",\n                class: _normalizeClass(['time-slider', { 'time-slider-large': !smallSize.value }]),\n                onEnd: onTimeSliderEnd\n              }, {\n                \"thumb-label\": _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_21, _toDisplayString(selectedLocaledTimeDateString.value), 1)\n                ]),\n                _: 1\n              }, 8, [\"modelValue\", \"color\", \"class\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_22, [\n              _createVNode(_component_v_chip, {\n                onClick: _cache[19] || (_cache[19] = () => {\n              sliderValue.value = sliderMin;\n              resetView(MAX_ZOOM);\n              _unref(events).push('sunrise');\n            }),\n                color: accentColor.value,\n                variant: \"elevated\",\n                size: \"x-small\",\n                class: \"time-chip\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString((currentDayInfo.value[2].sunAlwaysDown || currentDayInfo.value[2].sunAlwaysUp) ?  'Midnight' : 'Sunrise'), 1)\n                ]),\n                _: 1\n              }, 8, [\"color\"]),\n              _createVNode(_component_v_chip, {\n                onClick: _cache[20] || (_cache[20] = () => {\n              sliderValue.value = (sliderMin + sliderMax) / 2;\n              resetView(MAX_ZOOM);\n              _unref(events).push('midday');\n            }),\n                color: accentColor.value,\n                variant: \"elevated\",\n                size: \"x-small\",\n                class: \"time-chip\"\n              }, {\n                default: _withCtx(() => [...(_cache[48] || (_cache[48] = [\n                  _createTextVNode(\" Midday \", -1)\n                ]))]),\n                _: 1\n              }, 8, [\"color\"]),\n              _createVNode(_component_v_chip, {\n                onClick: _cache[21] || (_cache[21] = () => {\n              sliderValue.value = sliderMax;\n              resetView(MAX_ZOOM);\n              _unref(events).push('sunset');\n            }),\n                color: accentColor.value,\n                variant: \"elevated\",\n                size: \"x-small\",\n                class: \"time-chip\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString((currentDayInfo.value[2].sunAlwaysDown || currentDayInfo.value[2].sunAlwaysUp) ?  'Midnight' : 'Sunset'), 1)\n                ]),\n                _: 1\n              }, 8, [\"color\"])\n            ])\n          ]),\n          (!smallSize.value)\n            ? (_openBlock(), _createBlock(_component_speed_control, {\n                key: 0,\n                \"model-value\": playing.value,\n                store: _unref(store),\n                color: accentColor.value,\n                \"default-rate\": 1000,\n                \"max-speed\": 10000,\n                \"rate-delta\": 5,\n                \"show-status\": \"\",\n                \"hide-more-controls\": true,\n                onReset: _cache[22] || (_cache[22] = () => {\n          selectedEvent.value && goToEvent(selectedEvent.value);\n          _unref(wwtStats).timeResetCount += 1;\n          _unref(events).push('wwt_time_reset');\n        }),\n                \"onUpdate:reverse\": _cache[23] || (_cache[23] = (_reverse) => {\n          _unref(wwtStats).reverseCount += 1;\n          _unref(events).push('wwt_reverse');\n        }),\n                \"onUpdate:modelValue\": handlePlaying,\n                onSlowDown: _cache[24] || (_cache[24] = (rate) => {\n          _unref(wwtStats).slowdowns.push(rate);\n          _unref(events).push(`wwt_slowdown ${rate}`);\n        }),\n                onSpeedUp: _cache[25] || (_cache[25] = (rate) => {\n          _unref(wwtStats).speedups.push(rate);\n          _unref(events).push(`wwt_speedup ${rate}`);\n        }),\n                onSetRate: _cache[26] || (_cache[26] = (rate) => {\n          _unref(wwtStats).rateSelections.push(rate);\n          _unref(events).push(`wwt_rate ${rate}`);\n        })\n              }, null, 8, [\"model-value\", \"store\", \"color\"]))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [\n                _createVNode(_component_icon_button, {\n                  id: \"play-pause\",\n                  icon: playing.value ? 'pause' : 'play',\n                  onActivate: _cache[27] || (_cache[27] = () => {\n            playing.value = !playing.value;\n            _unref(store).setClockRate(playing.value ? 1000 : 0);\n            _unref(store).setClockSync(playing.value);\n            handlePlaying(playing.value);\n          }),\n                  \"tooltip-text\": playing.value ? 'Pause' : 'Play',\n                  \"tooltip-offset\": \"5px\",\n                  \"show-tooltip\": \"\",\n                  color: accentColor.value,\n                  \"focus-color\": accentColor.value\n                }, null, 8, [\"icon\", \"tooltip-text\", \"color\", \"focus-color\"]),\n                _createVNode(_component_daylight_pie_chart, {\n                  rise: startTime.value,\n                  set: endTime.value,\n                  always: sunAlways.value,\n                  size: \"50px\",\n                  \"timezone-offset\": _unref(selectedTimezoneOffset)\n                }, null, 8, [\"rise\", \"set\", \"always\", \"timezone-offset\"])\n              ]))\n        ], 8, _hoisted_18),\n        _createElementVNode(\"div\", {\n          id: \"change-flags\",\n          inert: showSplashScreen.value || undefined\n        }, [\n          _createVNode(_component_icon_button, {\n            icon: \"mdi-comment-quote\",\n            onActivate: _cache[28] || (_cache[28] = ($event: any) => (showQuestion.value = true)),\n            color: accentColor.value,\n            \"focus-color\": accentColor.value,\n            \"tooltip-text\": \"Share your thoughts\",\n            \"tooltip-location\": \"bottom\",\n            \"tooltip-offset\": \"5px\",\n            \"show-tooltip\": !mobile.value,\n            size: \"1.2em\"\n          }, null, 8, [\"color\", \"focus-color\", \"show-tooltip\"]),\n          _createVNode(_component_icon_button, {\n            icon: \"mdi-lock\",\n            onActivate: _cache[29] || (_cache[29] = () => showPrivacyDialog.value = true),\n            color: accentColor.value,\n            \"focus-color\": accentColor.value,\n            \"tooltip-text\": \"Change privacy settings\",\n            \"tooltip-location\": \"bottom\",\n            \"tooltip-offset\": \"5px\",\n            \"show-tooltip\": !mobile.value,\n            size: \"1.2em\"\n          }, null, 8, [\"color\", \"focus-color\", \"show-tooltip\"])\n        ], 8, _hoisted_24),\n        (!smallSize.value)\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 1,\n              id: \"body-logos\",\n              inert: showSplashScreen.value || undefined\n            }, [\n              _createVNode(_component_credit_logos, { \"default-logos\": ['cosmicds', 'wwt', 'sciact', 'nasa'] })\n            ], 8, _hoisted_25))\n          : _createCommentVNode(\"\", true),\n        _createVNode(_component_v_dialog, {\n          id: \"video-container\",\n          modelValue: showVideoSheet.value,\n          \"onUpdate:modelValue\": _cache[32] || (_cache[32] = ($event: any) => ((showVideoSheet).value = $event)),\n          transition: \"slide-y-transition\",\n          fullscreen: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_26, [\n              _createVNode(_component_font_awesome_icon, {\n                id: \"video-close-icon\",\n                class: \"close-icon\",\n                icon: \"times\",\n                size: \"lg\",\n                onClick: _cache[30] || (_cache[30] = ($event: any) => (showVideoSheet.value = false)),\n                onKeyup: _cache[31] || (_cache[31] = _withKeys(($event: any) => (showVideoSheet.value = false), [\"enter\"])),\n                tabindex: \"0\"\n              }),\n              _cache[49] || (_cache[49] = _createElementVNode(\"video\", {\n                controls: \"\",\n                id: \"info-video\"\n              }, [\n                _createElementVNode(\"source\", {\n                  src: \"\",\n                  type: \"video/mp4\"\n                })\n              ], -1))\n            ])\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"]),\n        _createVNode(_component_v_dialog, {\n          style: _normalizeStyle(cssVars.value),\n          class: _normalizeClass(['info-sheet', `info-sheet-${infoSheetLocation.value}`]),\n          id: \"text-info-sheet\",\n          \"hide-overlay\": \"\",\n          persistent: \"\",\n          \"no-click-animation\": \"\",\n          absolute: \"\",\n          width: \"100%\",\n          scrim: false,\n          location: \"bottom\",\n          modelValue: showTextSheet.value,\n          \"onUpdate:modelValue\": _cache[37] || (_cache[37] = ($event: any) => ((showTextSheet).value = $event)),\n          transition: infoSheetTransition.value\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_v_card, { height: \"100%\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_tabs, {\n                  modelValue: tab.value,\n                  \"onUpdate:modelValue\": _cache[33] || (_cache[33] = ($event: any) => ((tab).value = $event)),\n                  height: \"32px\",\n                  color: accentColor.value,\n                  \"slider-color\": accentColor.value,\n                  id: \"tabs\",\n                  dense: \"\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_tab, {\n                      class: \"info-tabs\",\n                      tabindex: \"0\"\n                    }, {\n                      default: _withCtx(() => [...(_cache[50] || (_cache[50] = [\n                        _createElementVNode(\"h3\", null, \"How to Use\", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_tab, {\n                      class: \"info-tabs\",\n                      tabindex: \"0\"\n                    }, {\n                      default: _withCtx(() => [...(_cache[51] || (_cache[51] = [\n                        _createElementVNode(\"h3\", null, \"What to Explore\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\", \"color\", \"slider-color\"]),\n                _createVNode(_component_font_awesome_icon, {\n                  id: \"close-text-icon\",\n                  class: \"control-icon\",\n                  icon: \"times\",\n                  size: \"lg\",\n                  onClick: _cache[34] || (_cache[34] = ($event: any) => (showTextSheet.value = false)),\n                  onKeyup: _cache[35] || (_cache[35] = _withKeys(($event: any) => (showTextSheet.value = false), [\"enter\"])),\n                  tabindex: \"0\"\n                }),\n                _createVNode(_component_v_window, {\n                  modelValue: tab.value,\n                  \"onUpdate:modelValue\": _cache[36] || (_cache[36] = ($event: any) => ((tab).value = $event)),\n                  id: \"tab-items\",\n                  class: \"pb-2 no-bottom-border-radius\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_window_item, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_card, { class: \"no-bottom-border-radius scrollable\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_card_text, { class: \"info-text no-bottom-border-radius\" }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_v_container, null, {\n                                  default: _withCtx(() => [\n                                    _cache[80] || (_cache[80] = _createElementVNode(\"p\", null, \" This interactive lets you view the path of the Sun in the sky on the solstices and equinoxes from any location on Earth! \", -1)),\n                                    _createElementVNode(\"ul\", _hoisted_27, [\n                                      _createElementVNode(\"li\", _hoisted_28, [\n                                        _cache[52] || (_cache[52] = _createTextVNode(\" Click \", -1)),\n                                        _createVNode(_component_font_awesome_icon, {\n                                          icon: \"location-dot\",\n                                          color: accentColor.value\n                                        }, null, 8, [\"color\"]),\n                                        _cache[53] || (_cache[53] = _createTextVNode(\" in the upper left to choose a different location. \", -1))\n                                      ]),\n                                      _cache[71] || (_cache[71] = _createElementVNode(\"li\", { class: \"pb-3\" }, \" Click the buttons in the upper right to choose a different date. \", -1)),\n                                      _cache[72] || (_cache[72] = _createElementVNode(\"li\", null, \" Use the time slider at the bottom to see how the Sun moves through the sky on your chosen date from your chosen location. \", -1)),\n                                      _cache[73] || (_cache[73] = _createElementVNode(\"div\", { class: \"py-1 pl-3\" }, \" or \", -1)),\n                                      _createElementVNode(\"li\", null, [\n                                        _cache[54] || (_cache[54] = _createTextVNode(\" Press \", -1)),\n                                        _createVNode(_component_font_awesome_icon, {\n                                          icon: \"play\",\n                                          color: accentColor.value\n                                        }, null, 8, [\"color\"]),\n                                        _cache[55] || (_cache[55] = _createTextVNode(\"/ \", -1)),\n                                        _createVNode(_component_font_awesome_icon, {\n                                          icon: \"pause\",\n                                          color: accentColor.value\n                                        }, null, 8, [\"color\"]),\n                                        _cache[56] || (_cache[56] = _createTextVNode(\" to start/stop time. \", -1))\n                                      ]),\n                                      _createElementVNode(\"li\", null, [\n                                        _createVNode(_component_font_awesome_icon, {\n                                          icon: \"angles-up\",\n                                          color: accentColor.value\n                                        }, null, 8, [\"color\"]),\n                                        _cache[57] || (_cache[57] = _createTextVNode(\" and \", -1)),\n                                        _createVNode(_component_font_awesome_icon, {\n                                          icon: \"angles-down\",\n                                          color: accentColor.value\n                                        }, null, 8, [\"color\"]),\n                                        _cache[58] || (_cache[58] = _createTextVNode(\" to speed up and slow down time. \", -1))\n                                      ]),\n                                      _createElementVNode(\"li\", null, [\n                                        _createVNode(_component_v_icon, { color: accentColor.value }, {\n                                          default: _withCtx(() => [...(_cache[59] || (_cache[59] = [\n                                            _createTextVNode(\"mdi-step-backward-2\", -1)\n                                          ]))]),\n                                          _: 1\n                                        }, 8, [\"color\"]),\n                                        _cache[61] || (_cache[61] = _createTextVNode(\"/\", -1)),\n                                        _createVNode(_component_v_icon, { color: accentColor.value }, {\n                                          default: _withCtx(() => [...(_cache[60] || (_cache[60] = [\n                                            _createTextVNode(\"mdi-step-forward-2\", -1)\n                                          ]))]),\n                                          _: 1\n                                        }, 8, [\"color\"]),\n                                        _cache[62] || (_cache[62] = _createTextVNode(\" to play time in reverse/forwards. \", -1))\n                                      ]),\n                                      _createElementVNode(\"li\", null, [\n                                        _createVNode(_component_font_awesome_icon, {\n                                          icon: \"rotate\",\n                                          color: accentColor.value\n                                        }, null, 8, [\"color\"]),\n                                        _cache[63] || (_cache[63] = _createTextVNode(\" to reset the time and view to sunrise for the day. \", -1))\n                                      ]),\n                                      _cache[74] || (_cache[74] = _createElementVNode(\"div\", { class: \"py-1 pl-3\" }, \" or \", -1)),\n                                      _createElementVNode(\"li\", null, [\n                                        _cache[67] || (_cache[67] = _createTextVNode(\" Jump directly to \", -1)),\n                                        _createVNode(_component_v_chip, {\n                                          color: accentColor.value,\n                                          variant: \"elevated\",\n                                          size: \"small\",\n                                          class: \"time-chip\"\n                                        }, {\n                                          default: _withCtx(() => [...(_cache[64] || (_cache[64] = [\n                                            _createTextVNode(\" Sunrise \", -1)\n                                          ]))]),\n                                          _: 1\n                                        }, 8, [\"color\"]),\n                                        _cache[68] || (_cache[68] = _createTextVNode(\", \", -1)),\n                                        _createVNode(_component_v_chip, {\n                                          color: accentColor.value,\n                                          variant: \"elevated\",\n                                          size: \"small\",\n                                          class: \"time-chip\"\n                                        }, {\n                                          default: _withCtx(() => [...(_cache[65] || (_cache[65] = [\n                                            _createTextVNode(\" Midday \", -1)\n                                          ]))]),\n                                          _: 1\n                                        }, 8, [\"color\"]),\n                                        _cache[69] || (_cache[69] = _createTextVNode(\", or \", -1)),\n                                        _createVNode(_component_v_chip, {\n                                          color: accentColor.value,\n                                          variant: \"elevated\",\n                                          size: \"small\",\n                                          class: \"time-chip\"\n                                        }, {\n                                          default: _withCtx(() => [...(_cache[66] || (_cache[66] = [\n                                            _createTextVNode(\" Sunrise \", -1)\n                                          ]))]),\n                                          _: 1\n                                        }, 8, [\"color\"]),\n                                        _cache[70] || (_cache[70] = _createTextVNode(\" using the buttons under the time slider. \", -1))\n                                      ]),\n                                      _cache[75] || (_cache[75] = _createElementVNode(\"li\", { class: \"py-3\" }, \" Move around the sky: \", -1))\n                                    ]),\n                                    _createVNode(_component_v_row, {\n                                      align: \"center\",\n                                      class: \"pb-5\"\n                                    }, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, { cols: \"4\" }, {\n                                          default: _withCtx(() => [\n                                            _createVNode(_component_v_chip, {\n                                              label: \"\",\n                                              outlined: \"\"\n                                            }, {\n                                              default: _withCtx(() => [...(_cache[76] || (_cache[76] = [\n                                                _createTextVNode(\" Pan \", -1)\n                                              ]))]),\n                                              _: 1\n                                            })\n                                          ]),\n                                          _: 1\n                                        }),\n                                        _createVNode(_component_v_col, {\n                                          cols: \"8\",\n                                          class: \"pt-1\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \"press + drag\" : \"click + drag\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"or\") + \" \", 1),\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \":\" : \"W-A-S-D\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"keys\"), 1),\n                                            _cache[77] || (_cache[77] = _createElementVNode(\"br\", null, null, -1))\n                                          ]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    }),\n                                    _createVNode(_component_v_row, { align: \"center\" }, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, { cols: \"4\" }, {\n                                          default: _withCtx(() => [\n                                            _createVNode(_component_v_chip, {\n                                              label: \"\",\n                                              outlined: \"\"\n                                            }, {\n                                              default: _withCtx(() => [...(_cache[78] || (_cache[78] = [\n                                                _createTextVNode(\" Zoom \", -1)\n                                              ]))]),\n                                              _: 1\n                                            })\n                                          ]),\n                                          _: 1\n                                        }),\n                                        _createVNode(_component_v_col, {\n                                          cols: \"8\",\n                                          class: \"pt-1\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \"pinch in and out\" : \"scroll in and out\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"or\") + \" \", 1),\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \":\" : \"I-O\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"keys\"), 1),\n                                            _cache[79] || (_cache[79] = _createElementVNode(\"br\", null, null, -1))\n                                          ]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    }),\n                                    _createVNode(_component_v_spacer, { class: \"end-spacer\" })\n                                  ]),\n                                  _: 1\n                                })\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_window_item, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_card, { class: \"no-bottom-border-radius scrollable\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_card_text, { class: \"info-text no-bottom-border-radius\" }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_v_container, null, {\n                                  default: _withCtx(() => [\n                                    _cache[82] || (_cache[82] = _createElementVNode(\"h3\", { class: \"pb-1\" }, \" The Reason for Seasons \", -1)),\n                                    _cache[83] || (_cache[83] = _createElementVNode(\"p\", null, \" Earth's axis has a 23.4 degree tilt, which causes the seasons we experience. \", -1)),\n                                    _cache[84] || (_cache[84] = _createElementVNode(\"p\", null, \" The key factors are how high in the sky the Sun gets, and how long it stays in the sky on a particular day. The higher the Sun and the longer it is in the sky, the more energy we receive. \", -1)),\n                                    _cache[85] || (_cache[85] = _createElementVNode(\"p\", null, \" You can explore how the Sun moves in the sky on different dates for a single location, or for multiple locations. \", -1)),\n                                    _cache[86] || (_cache[86] = _createElementVNode(\"h4\", { class: \"pt-2\" }, \"Explore a single location\", -1)),\n                                    _cache[87] || (_cache[87] = _createElementVNode(\"p\", null, \" For a single location, here are some questions you might try to answer: \", -1)),\n                                    _cache[88] || (_cache[88] = _createElementVNode(\"ul\", { class: \"ml-5 pb-1 explore-list\" }, [\n                                      _createElementVNode(\"li\", null, \" What is the angle of the Sun in the sky when it reaches its peak height on each of the four equinox and solstice dates? \"),\n                                      _createElementVNode(\"li\", null, \" On which of those dates is the Sun's peak height the highest? \"),\n                                      _createElementVNode(\"li\", null, \" On which of those dates is the Sun's peak height the lowest? \"),\n                                      _createElementVNode(\"li\", null, \" How many hours is the Sun in the sky on each of the four equinox and solstice dates? \"),\n                                      _createElementVNode(\"li\", null, \" On which of those dates is the Sun in the sky for the most amount of time? \"),\n                                      _createElementVNode(\"li\", null, \" On which of those dates is the Sun in the sky for the least amount of time? \"),\n                                      _createElementVNode(\"li\", null, \" Why do you think the equinoxes are called equinoxes? \"),\n                                      _createElementVNode(\"li\", null, \" What are the differences in the peak heights for those four dates, and how does it relate to the tilt of the Earth's axis? \"),\n                                      _createElementVNode(\"li\", null, \" What is notable about where the Sun rises and sets on the equinoxes? \")\n                                    ], -1)),\n                                    _cache[89] || (_cache[89] = _createElementVNode(\"h4\", { class: \"pt-2\" }, \"Explore multiple locations\", -1)),\n                                    _cache[90] || (_cache[90] = _createElementVNode(\"p\", null, \" Use the location selector to try answering some of these questions: \", -1)),\n                                    _cache[91] || (_cache[91] = _createElementVNode(\"ul\", { class: \"ml-5 pb-1 explore-list\" }, [\n                                      _createElementVNode(\"li\", null, \" What seasons would be experienced by someone at your latitude, but roughly on the opposite side of the equator? (For example, Cambridge, MA has a latitude 42 NORTH of the equator. How would the seasons compare at a latitude that is 42 SOUTH of the equator?) \"),\n                                      _createElementVNode(\"li\", null, \" At what latitude ranges will the Sun never rise or never set on the solstices? \"),\n                                      _createElementVNode(\"li\", null, \" What latitude ranges will never experience the Sun being directly overhead (at a sky angle of 90) on any date? \"),\n                                      _createElementVNode(\"li\", null, \" What latitude ranges will experience equal day and night every single day? \")\n                                    ], -1)),\n                                    _createVNode(_component_v_row, { class: \"mt-5\" }, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, { cols: \"12\" }, {\n                                          default: _withCtx(() => [...(_cache[81] || (_cache[81] = [\n                                            _createElementVNode(\"div\", { class: \"credits\" }, [\n                                              _createElementVNode(\"h3\", null, \"Credits:\"),\n                                              _createElementVNode(\"h4\", null, [\n                                                _createElementVNode(\"a\", {\n                                                  href: \"https://www.cosmicds.cfa.harvard.edu/\",\n                                                  target: \"_blank\",\n                                                  rel: \"noopener noreferrer\"\n                                                }, \"CosmicDS\"),\n                                                _createTextVNode(\" Vue Data Stories Team:\")\n                                              ]),\n                                              _createTextVNode(\" Pat Udomprasert\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Jon Carifio\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Azm Tariq\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Harry Houghton\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" John Lewis\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Alyssa Goodman\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Mary Dussault\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Harry Houghton\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Evaluator: Sue Sunbury\"),\n                                              _createElementVNode(\"br\"),\n                                              _createElementVNode(\"h4\", { class: \"pt-4\" }, \"WorldWide Telescope Team:\"),\n                                              _createTextVNode(\" Peter Williams\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" A. David Weigel\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Jon Carifio\"),\n                                              _createElementVNode(\"br\")\n                                            ], -1)\n                                          ]))]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    }),\n                                    _createVNode(_component_v_row, null, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, null, {\n                                          default: _withCtx(() => [\n                                            _createVNode(_component_funding_acknowledgement)\n                                          ]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    }),\n                                    _createVNode(_component_v_spacer, { class: \"end-spacer\" })\n                                  ]),\n                                  _: 1\n                                })\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"style\", \"class\", \"modelValue\", \"transition\"]),\n        _createVNode(_component_v_dialog, {\n          scrim: \"false\",\n          modelValue: showPrivacyDialog.value,\n          \"onUpdate:modelValue\": _cache[40] || (_cache[40] = ($event: any) => ((showPrivacyDialog).value = $event)),\n          \"max-width\": \"400px\",\n          id: \"privacy-popup-dialog\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_v_card, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_card_text, null, {\n                  default: _withCtx(() => [...(_cache[92] || (_cache[92] = [\n                    _createTextVNode(\" To evaluate usage of this app, \", -1),\n                    _createElementVNode(\"strong\", null, \"anonymized\", -1),\n                    _createTextVNode(\" data may be collected, including user feedback and locations searched or selected on map. Places selected via geolocation services on your device are NOT collected. \", -1)\n                  ]))]),\n                  _: 1\n                }),\n                _createVNode(_component_v_card_actions, { class: \"pt-3\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_spacer),\n                    _createVNode(_component_v_btn, {\n                      color: \"#BDBDBD\",\n                      href: \"https://www.cfa.harvard.edu/privacy-statement\",\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\"\n                    }, {\n                      default: _withCtx(() => [...(_cache[93] || (_cache[93] = [\n                        _createTextVNode(\" Privacy Policy \", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_btn, {\n                      color: \"#ff6666\",\n                      onClick: _cache[38] || (_cache[38] = () => {\n              responseOptOut.value = true;\n              showPrivacyDialog.value = false;\n            })\n                    }, {\n                      default: _withCtx(() => [...(_cache[94] || (_cache[94] = [\n                        _createTextVNode(\" Opt out \", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_btn, {\n                      color: \"green\",\n                      onClick: _cache[39] || (_cache[39] = () => {\n              responseOptOut.value = false;\n              showPrivacyDialog.value = false;\n            })\n                    }, {\n                      default: _withCtx(() => [...(_cache[95] || (_cache[95] = [\n                        _createTextVNode(\" Allow \", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"]),\n        _createVNode(_component_v_expand_transition, null, {\n          default: _withCtx(() => [\n            _withDirectives(_createVNode(_component_question_dialog, {\n              onDismiss: _cache[41] || (_cache[41] = () => showQuestion.value = false),\n              onOptOut: _cache[42] || (_cache[42] = () => {\n          showQuestion.value = false;\n          ahaOptOut.value = true;\n        }),\n              onFinish: _cache[43] || (_cache[43] = (response) => {\n          _unref(ahaMomentResponses).push(response);\n          showQuestion.value = false;\n        })\n            }, null, 512), [\n              [_vShow, showQuestion.value]\n            ])\n          ]),\n          _: 1\n        })\n      ])\n    ]),\n    _: 1\n  }, 8, [\"style\"]))\n}\n}\n\n})","<template>\n<v-app\n  id=\"app\"\n  :style=\"cssVars\"\n>\n  <div\n    id=\"main-content\"\n  >\n    <WorldWideTelescope></WorldWideTelescope>\n      \n\n    <!-- This contains the splash screen content -->\n  <splash-screen\n    ref=\"splashScreenRef\"\n    v-if=\"splashReady\"\n    title=\"Seasons\"\n    :cssVars=\"cssVars\"\n    @close=\"closeSplashScreen\"\n    @location-selected=\"setLocationFromSearchFeature\"\n  />\n\n    <transition name=\"fade\">\n      <div\n        class=\"modal\"\n        id=\"modal-loading\"\n        v-show=\"isLoading\"\n      >\n        <div class=\"container\">\n          <div class=\"spinner\"></div>\n          <p>Loading </p>\n        </div>\n      </div>\n    </transition>\n\n\n    <!-- This block contains the elements (e.g. icon buttons displayed at/near the top of the screen -->\n\n    <div id=\"top-content\" :inert=\"showSplashScreen || undefined\">\n      <div id=\"left-buttons\">\n        <div class=\"location-display\">\n          <div\n            id=\"location-title\"\n            class=\"event-title\"\n          >\n\n            <button \n              @click=\"showLocationSelector = !showLocationSelector\"\n              class=\"icon-location-button clickable-object\"\n            >\n              <font-awesome-layers>\n                <font-awesome-icon\n                  icon=\"location-dot\"\n                  color=\"black\"\n                />\n                <font-awesome-icon\n                  icon=\"location-dot\"\n                  :color=\"accentColor\"\n                  transform=\"shrink-3\"\n                />\n              </font-awesome-layers>\n            </button>\n\n            <!-- <icon-button\n              v-model=\"showLocationSelector\"\n              icon=\"fa-location-dot\"\n              size=\"sm\"\n              :color=\"accentColor\"\n              tooltip-text=\"Select Location\"\n              tooltip-location=\"start\"\n            ></icon-button> -->\n            <h4 @click=\"showLocationSelector = !showLocationSelector\" class=\"clickable-object\">View from</h4>\n          </div>\n          <!-- eslint-disable-next-line vue/no-v-text-v-html-on-component -->\n          <button\n            id=\"location-button\"\n            class=\"event-button info-button\"\n            @click=\"showLocationSelector = true\"\n          > \n          <div v-if=\"selectedLocationInfo.name\" class=\"mb-1\"><strong>{{ selectedLocationInfo.name }}</strong></div>\n          <div>Lat: {{ selectedLocationInfo.latitude }}</div>\n          <div>Long: {{ selectedLocationInfo.longitude }}</div>\n          </button>\n        </div>\n        <v-dialog\n          v-model=\"showLocationSelector\"\n          max-width=\"fit-content\"\n          transition=\"slide-y-transition\"\n        >\n          <v-card>\n            <div id=\"geolocation-close\">\n              <font-awesome-icon\n                style=\"cursor: pointer; z-index: 1000;\"\n                icon=\"xmark\"\n                size=\"xl\"\n                @click=\"showLocationSelector = false\"\n                @keyup.enter=\"showLocationSelector = false\"\n                tabindex=\"0\"\n                color=\"black\"\n              ></font-awesome-icon>\n            </div>\n            <div id=\"geolocation-controls\">\n              <geolocation-button\n                id=\"location\"\n                size=\"30px\"\n                density=\"default\"\n                elevation=\"5\"\n                :color=\"accentColor\"\n                @geolocation=\"selectedLocation = {longitudeDeg: $event.longitude, latitudeDeg: $event.latitude}\"\n              />\n              <location-search\n                :class=\"['location-search']\"\n                small\n                button-size=\"xl\"\n                :accent-color=\"accentColor\"\n                :search-provider=\"searchProvider\"\n                @set-location=\"setLocationFromSearchFeature\"\n                @error=\"searchErrorMessage = $event\"\n              >\n              </location-search>\n            </div>\n            <location-selector\n              :model-value=\"selectedLocation\"\n              @update:modelValue=\"updateLocationFromMap\"\n            />\n          </v-card>\n        </v-dialog>\n        <div\n          class=\"options\"\n        >\n          <v-checkbox\n            v-model=\"trackSun\"\n            label=\"Auto-track Sun\"\n            density=\"compact\"\n            hide-details\n            @keydown.space.prevent=\"forceCamera = !forceCamera\"\n            @keydown.enter.prevent=\"forceCamera = !forceCamera\"\n          />\n        </div>\n        <!-- go to sun -->\n        <icon-button\n          v-if=\"false\"\n          @activate=\"goToSun\"\n          icon=\"fa-sun\"\n          :color=\"accentColor\"\n          :tooltip-text=\"'Go to Sun'\"\n          tooltip-location=\"start\"\n          size=\"sm\"\n        >\n      </icon-button>\n        <icon-button\n          v-model=\"showTextSheet\"\n          icon=\"fa-info\"\n          :color=\"accentColor\"\n          :tooltip-text=\"showTextSheet ? 'Hide Info' : 'Learn More'\"\n          tooltip-location=\"start\"\n          size=\"sm\"\n\n        >\n        </icon-button>\n      </div>\n      <div id=\"right-buttons\">\n        <div\n          id=\"date-title\"\n          class=\"event-title\"\n        >\n        <button \n            @click=\"showDatePicker = !showDatePicker\"\n            class=\"display-date-button mr-2 clickable-object\"\n          >\n            <font-awesome-layers>\n              <font-awesome-icon\n                icon=\"calendar-day\"\n                color=\"black\"\n              />\n              <font-awesome-icon\n                icon=\"calendar-day\"\n                :color=\"accentColor\"\n                transform=\"shrink-3\"\n              />\n            </font-awesome-layers>\n          </button>\n          <h4 @click=\"showDatePicker = !showDatePicker\" class=\"clickable-object\">Displayed Date</h4>\n          </div>\n          <button id=\"date-info\" @click=\"showDatePicker = !showDatePicker\" class=\"event-button info-button\">\n            <div class=\"mb-1\"><strong>{{ dayString(displayedDate) }}</strong></div>       \n            <div>Length of Day: {{ formatDayLength(endTime - startTime, currentDayInfo[2]) }}</div>\n            <div>Distance to Sun: {{ sunDistance.toFixed(2) }} au</div>\n          </button>\n        \n        <div class=\"date-buttons\">\n          <button\n            :class=\"[event === selectedEvent ? 'selected' : '']\"\n            v-for=\"([event], index) in sortedDatesOfInterest\"\n            v-ripple\n            class=\"event-button\"\n            :key=\"index\"\n            @click=\"selectedEvent = event;\"\n          >\n            <div>{{ eventName(event) }}</div>\n          </button>\n          \n          <!-- Calendar date picker -->\n          <div class=\"date-picker-section date-button\">\n            <button\n              @click=\"showDatePicker = !showDatePicker\"\n              :color=\"accentColor\"\n              variant=\"outlined\"\n              size=\"small\"\n              class=\"calendar-button event-button\"\n            >\n              <font-awesome-icon\n                icon=\"calendar-day\"\n              />\n              Choose Any Date\n            </button>\n            \n            <v-dialog\n              v-model=\"showDatePicker\"\n              max-width=\"fit-content\"\n            >\n              <v-card>\n                <v-card-title class=\"text-h6 mb-0 mt-2\">\n                  Select Date\n                </v-card-title>\n                <v-card-text class=\"my-0 mx-2 pa-0\">\n                  <v-date-picker\n                    :model-value=\"selectedCustomDate\"\n                    @update:model-value=\"handleDateSelection\"\n                    :color=\"accentColor\"\n                    hide-header\n                  />\n                </v-card-text>\n                <v-card-actions class=\"my-0\">\n                  <v-btn\n                    text\n                    @click=\"showDatePicker = false\"\n                  >\n                    Cancel\n                  </v-btn>\n                </v-card-actions>\n              </v-card>\n            </v-dialog>\n          </div>\n        </div>\n        <!-- <div>\n          <p>Current Time: {{ currentTime  }}</p>\n          <p>Clockrate: {{  store.clockRate }}</p>\n          <p>At or after endtime: {{ currentTime >= endTime }}</p>\n          <p>At or before starttime: {{ currentTime <= startTime }}</p>\n        </div> -->\n      </div>\n    </div>\n    \n    <!-- This block contains the elements (e.g. the project icons) displayed along the bottom of the screen -->\n\n    <div id=\"bottom-content\" :inert=\"showSplashScreen || undefined\">\n\n      <div id=\"time-slider-chips\">\n        <div\n          class=\"slider-container\"\n        >\n          <v-slider\n            v-if=\"!smallSize\"\n            :min=\"sliderMin\"\n            :max=\"sliderMax\"\n            :value=\"null\"\n            disabled\n            class=\"dummy-time-slider\"\n          >\n          </v-slider>\n          <v-slider\n            v-model=\"sliderValue\"\n            :color=\"sunAlways === 'down' ? NIGHTTIME : accentColor\"\n            :min=\"sliderMin\"\n            :max=\"sliderMax\"\n            thumb-label=\"always\"\n            :class=\"['time-slider', { 'time-slider-large': !smallSize }]\"\n            @end=\"onTimeSliderEnd\"\n          >\n            <template v-slot:thumb-label>\n              <div class=\"thumb-label\">\n                {{ selectedLocaledTimeDateString }}\n              </div>\n            </template>\n          </v-slider>\n        </div>\n\n        <div class=\"time-chips\">\n          <v-chip\n            @click=\"() => {\n              sliderValue = sliderMin;\n              resetView(MAX_ZOOM);\n              events.push('sunrise');\n            }\"\n            :color=\"accentColor\"\n            variant=\"elevated\"\n            size=\"x-small\"\n            class=\"time-chip\"\n          >\n            {{ (currentDayInfo[2].sunAlwaysDown || currentDayInfo[2].sunAlwaysUp) ?  'Midnight' : 'Sunrise' }}\n          </v-chip>\n          <v-chip\n            @click=\"() => {\n              sliderValue = (sliderMin + sliderMax) / 2;\n              resetView(MAX_ZOOM);\n              events.push('midday');\n            }\"\n            :color=\"accentColor\"\n            variant=\"elevated\"\n            size=\"x-small\"\n            class=\"time-chip\"\n          >\n            Midday\n          </v-chip>\n          <v-chip\n            @click=\"() => {\n              sliderValue = sliderMax;\n              resetView(MAX_ZOOM);\n              events.push('sunset');\n            }\"\n            :color=\"accentColor\"\n            variant=\"elevated\"\n            size=\"x-small\"\n            class=\"time-chip\"\n          >\n            {{ (currentDayInfo[2].sunAlwaysDown || currentDayInfo[2].sunAlwaysUp) ?  'Midnight' : 'Sunset' }}\n          </v-chip>\n        </div>\n      </div>\n      \n      <!-- eslint-disable-next-line vue/no-v-model-argument -->\n      <speed-control\n        v-if=\"!smallSize\"\n        :model-value=\"playing\" \n        :store=\"store\"\n        :color=\"accentColor\" \n        :default-rate=\"1000\"\n        :max-speed=\"10000\"\n        :rate-delta=\"5\"\n        show-status\n        :hide-more-controls=\"true\"\n        @reset=\"() => {\n          selectedEvent && goToEvent(selectedEvent);\n          wwtStats.timeResetCount += 1;\n          events.push('wwt_time_reset');\n        }\"\n        @update:reverse=\"(_reverse: boolean) => {\n          wwtStats.reverseCount += 1;\n          events.push('wwt_reverse');\n        }\"\n        @update:model-value=\"handlePlaying\"\n        @slow-down=\"(rate: number) => {\n          wwtStats.slowdowns.push(rate);\n          events.push(`wwt_slowdown ${rate}`);\n        }\"\n        @speed-up=\"(rate: number) => {\n          wwtStats.speedups.push(rate);\n          events.push(`wwt_speedup ${rate}`);\n        }\"\n        @set-rate=\"(rate: number) => {\n          wwtStats.rateSelections.push(rate);\n          events.push(`wwt_rate ${rate}`);\n        }\"\n        />\n      <div\n        v-else\n        id=\"small-play-pie-chart\"\n      >\n        <icon-button\n          id=\"play-pause\"\n          :icon=\"playing ? 'pause' : 'play'\"\n          @activate=\"() => {\n            playing = !playing;\n            store.setClockRate(playing ? 1000 : 0);\n            store.setClockSync(playing);\n            handlePlaying(playing);\n          }\"\n          :tooltip-text=\"playing ? 'Pause' : 'Play'\"\n          tooltip-offset=\"5px\"\n          show-tooltip\n          :color=\"accentColor\"\n          :focus-color=\"accentColor\"\n        ></icon-button>\n        <daylight-pie-chart\n          :rise=\"startTime\"\n          :set=\"endTime\"\n          :always=\"sunAlways\"\n          size=\"50px\"\n          :timezone-offset=\"selectedTimezoneOffset\"\n        />\n      </div>\n    </div>\n    <div id=\"change-flags\" :inert=\"showSplashScreen || undefined\">\n      <icon-button\n        icon=\"mdi-comment-quote\"\n        @activate=\"showQuestion = true\"\n        :color=\"accentColor\"\n        :focus-color=\"accentColor\"\n        tooltip-text=\"Share your thoughts\"\n        tooltip-location=\"bottom\"\n        tooltip-offset=\"5px\"\n        :show-tooltip=\"!mobile\"\n        size=\"1.2em\"\n      >\n      </icon-button>\n      <icon-button\n        icon=\"mdi-lock\"\n        @activate=\"() => showPrivacyDialog = true\"\n        :color=\"accentColor\"\n        :focus-color=\"accentColor\"\n        tooltip-text=\"Change privacy settings\"\n        tooltip-location=\"bottom\"\n        tooltip-offset=\"5px\"\n        :show-tooltip=\"!mobile\"\n        size=\"1.2em\"\n      >\n      </icon-button>\n    </div>\n    <div id=\"body-logos\" v-if=\"!smallSize\" :inert=\"showSplashScreen || undefined\">\n      <credit-logos\n        :default-logos=\"['cosmicds', 'wwt', 'sciact', 'nasa']\"\n      />\n    </div>\n\n\n    <!-- This dialog contains the video that is displayed when the video icon is clicked -->\n\n    <v-dialog\n      id=\"video-container\"\n      v-model=\"showVideoSheet\"\n      transition=\"slide-y-transition\"\n      fullscreen\n    >\n      <div class=\"video-wrapper\">\n        <font-awesome-icon\n          id=\"video-close-icon\"\n          class=\"close-icon\"\n          icon=\"times\"\n          size=\"lg\"\n          @click=\"showVideoSheet = false\"\n          @keyup.enter=\"showVideoSheet = false\"\n          tabindex=\"0\"\n        ></font-awesome-icon>\n        <video\n          controls\n          id=\"info-video\"\n        >\n          <source src=\"\" type=\"video/mp4\">\n        </video>\n      </div>\n    </v-dialog>\n\n\n    <!-- This dialog contains the informational content that is displayed when the book icon is clicked -->\n\n    <v-dialog\n      :style=\"cssVars\"\n      :class=\"['info-sheet', `info-sheet-${infoSheetLocation}`]\"\n      id=\"text-info-sheet\"\n      hide-overlay\n      persistent\n      no-click-animation\n      absolute\n      width=\"100%\"\n      :scrim=\"false\"\n      location=\"bottom\"\n      v-model=\"showTextSheet\"\n     :transition=\"infoSheetTransition\"\n    >\n      <v-card height=\"100%\">\n        <v-tabs\n          v-model=\"tab\"\n          height=\"32px\"\n          :color=\"accentColor\"\n          :slider-color=\"accentColor\"\n          id=\"tabs\"\n          dense\n        >\n          <v-tab class=\"info-tabs\" tabindex=\"0\"><h3>How to Use</h3></v-tab>\n          <v-tab class=\"info-tabs\" tabindex=\"0\"><h3>What to Explore</h3></v-tab>\n        </v-tabs>\n        <font-awesome-icon\n          id=\"close-text-icon\"\n          class=\"control-icon\"\n          icon=\"times\"\n          size=\"lg\"\n          @click=\"showTextSheet = false\"\n          @keyup.enter=\"showTextSheet = false\"\n          tabindex=\"0\"\n        ></font-awesome-icon>\n        <v-window v-model=\"tab\" id=\"tab-items\" class=\"pb-2 no-bottom-border-radius\">\n          <v-window-item>\n            <v-card class=\"no-bottom-border-radius scrollable\">\n              <v-card-text class=\"info-text no-bottom-border-radius\">\n                <v-container>\n                  <p>\n                    This interactive lets you view the path of the Sun in the sky on the solstices and equinoxes from any location on Earth! \n                  </p>\n                  <ul class=\"ml-5 pt-3\">\n                    <li class=\"pb-3\">\n                      Click \n                      <font-awesome-icon\n                        icon=\"location-dot\"\n                        :color=\"accentColor\"\n                      /> \n                      in the upper left to choose a different location.\n                    </li>\n                    <li class=\"pb-3\">\n                      Click the buttons in the upper right to choose a different date.\n                    </li>\n                    <li>\n                      Use the time slider at the bottom to see how the Sun moves through the sky on your chosen date from your chosen location.\n                    </li>\n                    <div class=\"py-1 pl-3\">\n                      or\n                    </div>\n                    <li>\n                      Press \n                      <font-awesome-icon\n                        icon=\"play\"\n                        :color=\"accentColor\"\n                      />/\n                      <font-awesome-icon\n                        icon=\"pause\"\n                        :color=\"accentColor\"\n                      />\n                      to start/stop time.\n                    </li>\n                    <li>\n                      <font-awesome-icon\n                        icon=\"angles-up\"\n                        :color=\"accentColor\"\n                      />\n                      and\n                      <font-awesome-icon\n                        icon=\"angles-down\"\n                        :color=\"accentColor\"\n                      /> to speed up and slow down time.\n                    </li>\n                    <li>\n                      <v-icon :color=\"accentColor\">mdi-step-backward-2</v-icon>/<v-icon :color=\"accentColor\">mdi-step-forward-2</v-icon> to play time in reverse/forwards.\n                    </li>\n                    <li>\n                      <font-awesome-icon\n                        icon=\"rotate\"\n                        :color=\"accentColor\"\n                      /> to reset the time and view to sunrise for the day.\n                    </li>\n                    <div class=\"py-1 pl-3\">\n                      or\n                    </div>\n                    <li>\n                      Jump directly to \n                      <v-chip\n                        :color=\"accentColor\"\n                        variant=\"elevated\"\n                        size=\"small\"\n                        class=\"time-chip\"\n                      >\n                        Sunrise\n                      </v-chip>,\n                      <v-chip\n                        :color=\"accentColor\"\n                        variant=\"elevated\"\n                        size=\"small\"\n                        class=\"time-chip\"\n                      >\n                        Midday\n                      </v-chip>, or\n                      <v-chip\n                        :color=\"accentColor\"\n                        variant=\"elevated\"\n                        size=\"small\"\n                        class=\"time-chip\"\n                      >\n                        Sunrise\n                      </v-chip> using the buttons under the time slider.\n                    </li>\n                    <li class=\"py-3\">\n                      Move around the sky:\n                    </li>\n                  </ul>  \n                  <v-row align=\"center\" class=\"pb-5\">\n                    <v-col cols=\"4\">\n                      <v-chip\n                        label\n                        outlined\n                      >\n                        Pan\n                      </v-chip>\n                    </v-col>\n                    <v-col cols=\"8\" class=\"pt-1\">\n                      <strong>{{ touchscreen ? \"press + drag\" : \"click + drag\" }}</strong>  {{ touchscreen ? \":\" : \"or\" }}  <strong>{{ touchscreen ? \":\" : \"W-A-S-D\" }}</strong> {{ touchscreen ? \":\" : \"keys\" }}<br>\n                    </v-col>\n                  </v-row>\n                  <v-row align=\"center\">\n                    <v-col cols=\"4\">\n                      <v-chip\n                        label\n                        outlined\n                      >\n                        Zoom\n                      </v-chip>\n                    </v-col>\n                    <v-col cols=\"8\" class=\"pt-1\">\n                      <strong>{{ touchscreen ? \"pinch in and out\" : \"scroll in and out\" }}</strong> {{ touchscreen ? \":\" : \"or\" }} <strong>{{ touchscreen ? \":\" : \"I-O\" }}</strong> {{ touchscreen ? \":\" : \"keys\" }}<br>\n                    </v-col>\n                  </v-row>\n                  <v-spacer class=\"end-spacer\"></v-spacer>\n                </v-container>              \n              </v-card-text>\n            </v-card>\n          </v-window-item>\n          <v-window-item>\n            <v-card class=\"no-bottom-border-radius scrollable\">\n              <v-card-text class=\"info-text no-bottom-border-radius\">\n                <v-container>\n                  <h3 class=\"pb-1\">\n                    The Reason for Seasons\n                  </h3>\n                  <p>\n                    Earth's axis has a 23.4 degree tilt, which causes the seasons we experience.\n                  </p>\n                  <p>\n                    The key factors are how high in the sky the Sun gets, and how long it stays in the sky on a particular day. The higher the Sun and the longer it is in the sky, the more energy we receive.\n                  </p>\n                  <p>\n                    You can explore how the Sun moves in the sky on different dates for a single location, or for multiple locations. \n                  </p>\n                  <h4 class=\"pt-2\">Explore a single location</h4>\n                  <p>\n                    For a single location, here are some questions you might try to answer:\n                  </p>\n                  <ul class=\"ml-5 pb-1 explore-list\">\n                    <li>\n                      What is the angle of the Sun in the sky when it reaches its peak height on each of the four equinox and solstice dates?\n                    </li>\n                    <li>\n                      On which of those dates is the Sun's peak height the highest?\n                    </li>\n                    <li>\n                      On which of those dates is the Sun's peak height the lowest?\n                    </li>\n                    <li>\n                      How many hours is the Sun in the sky on each of the four equinox and solstice dates?\n                    </li>\n                    <li>\n                      On which of those dates is the Sun in the sky for the most amount of time?\n                    </li>\n                    <li>\n                      On which of those dates is the Sun in the sky for the least amount of time?\n                    </li>\n                    <li>\n                      Why do you think the equinoxes are called equinoxes?\n                    </li>\n                    <li>\n                      What are the differences in the peak heights for those four dates, and how does it relate to the tilt of the Earth's axis?\n                    </li>\n                    <li>\n                      What is notable about where the Sun rises and sets on the equinoxes?\n                    </li>\n                  </ul>\n                  <h4 class=\"pt-2\">Explore multiple locations</h4>\n                  <p>\n                    Use the location selector to try answering some of these questions:\n                  </p>\n                  <ul class=\"ml-5 pb-1 explore-list\">\n                    <li>\n                      What seasons would be experienced by someone at your latitude, but roughly on the opposite side of the equator? (For example, Cambridge, MA has a latitude 42 NORTH of the equator. How would the seasons compare at a latitude that is 42 SOUTH of the equator?)\n                    </li>\n                    <li>\n                      At what latitude ranges will the Sun never rise or never set on the solstices?\n                    </li>\n                    <li>\n                      What latitude ranges will never experience the Sun being directly overhead (at a sky angle of 90) on any date?\n                    </li>\n                    <li>\n                      What latitude ranges will experience equal day and night every single day?\n                    </li>\n\n                  </ul>\n                  <v-row class=\"mt-5\">\n                    <v-col cols=\"12\">\n                      <div class=\"credits\">\n                        <h3>Credits:</h3>\n                        <h4><a href=\"https://www.cosmicds.cfa.harvard.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">CosmicDS</a> Vue Data Stories Team:</h4>\n                        Pat Udomprasert<br>\n                        Jon Carifio<br>\n                        Azm Tariq<br>\n                        Harry Houghton<br>\n                        John Lewis<br>\n                        Alyssa Goodman<br>\n                        Mary Dussault<br>\n                        Harry Houghton<br>\n                        Evaluator: Sue Sunbury<br>\n                        <h4 class=\"pt-4\">WorldWide Telescope Team:</h4>\n                        Peter Williams<br>\n                        A. David Weigel<br>\n                        Jon Carifio<br>\n                      </div>\n                    </v-col>\n                  </v-row>\n                  <v-row>\n                    <v-col>\n                      <funding-acknowledgement/>\n                    </v-col>\n                  </v-row>\n                  <v-spacer class=\"end-spacer\"></v-spacer>\n                </v-container>\n              </v-card-text>\n            </v-card>\n          </v-window-item>\n        </v-window>\n      </v-card>\n    </v-dialog>\n\n    <!-- Data collection opt-out dialog -->\n    <v-dialog\n      scrim=\"false\"\n      v-model=\"showPrivacyDialog\"\n      max-width=\"400px\"\n      id=\"privacy-popup-dialog\"\n    >\n      <v-card>\n        <v-card-text>\n          To evaluate usage of this app, <strong>anonymized</strong> data may be collected, including user feedback and locations searched or selected on map. Places selected via geolocation services on your device are NOT collected.\n        </v-card-text>\n        <v-card-actions class=\"pt-3\">\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"#BDBDBD\"\n            href=\"https://www.cfa.harvard.edu/privacy-statement\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n          Privacy Policy\n          </v-btn>\n          <v-btn\n            color=\"#ff6666\"\n            @click=\"() => {\n              responseOptOut = true;\n              showPrivacyDialog = false;\n            }\"\n          >\n          Opt out\n          </v-btn>\n          <v-btn \n            color=\"green\"\n            @click=\"() => {\n              responseOptOut = false;\n              showPrivacyDialog = false;\n            }\"\n          >\n            Allow\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-expand-transition>\n      <question-dialog\n        v-show=\"showQuestion\"\n        @dismiss=\"() => showQuestion = false\"\n        @opt-out=\"() => {\n          showQuestion = false;\n          ahaOptOut = true;\n        }\"\n        @finish=\"(response: string) => {\n          ahaMomentResponses.push(response);\n          showQuestion = false;\n        }\"\n      >\n      </question-dialog>\n    </v-expand-transition>\n\n  </div>\n</v-app>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, computed, markRaw, onMounted, nextTick, watch } from \"vue\";\nimport { useDisplay } from \"vuetify\";\nimport { storeToRefs } from \"pinia\";\nimport { getTimezoneOffset } from \"date-fns-tz\";\nimport tzlookup from \"tz-lookup\";\nimport { v4 } from \"uuid\";\n\nimport { AstroTime, Seasons } from \"astronomy-engine\";\n\nimport { Color, Grids, Planets, Settings, WWTControl } from \"@wwtelescope/engine\";\nimport { GotoRADecZoomParams, engineStore } from \"@wwtelescope/engine-pinia\";\nimport {\n  BackgroundImageset,\n  LocationDeg,\n  skyBackgroundImagesets,\n  supportsTouchscreen,\n  blurActiveElement,\n  useWWTKeyboardControls,\n  D2R,\n  R2D,\n  API_BASE_URL,\n} from \"@cosmicds/vue-toolkit\";\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch, textForLocation } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\nimport { useTimezone } from \"./timezones\";\nimport { dayFractionForTimestamp, equatorialToHorizontal, horizontalToEquatorial } from \"./utils\";\nimport { resetNSEWText, drawPlanets, renderOneFrame, drawEcliptic, drawSkyOverlays } from \"./wwt-hacks\";\nimport { useSun } from \"./composables/useSun\";\nimport { formatInTimeZone } from \"date-fns-tz\";\nimport { sunPlace } from \"./horizon_sky\";\n\ntype SheetType = \"text\" | \"video\";\ntype CameraParams = Omit<GotoRADecZoomParams, \"instant\">;\nexport interface SeasonsStoryProps {\n  wwtNamespace?: string;\n  initialCameraParams?: CameraParams;\n}\n\nconst store = engineStore();\nconst {\n  currentTime,\n} = storeToRefs(store);\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst wwtSettings: Settings = Settings.get_active();\n\nuseWWTKeyboardControls(store);\n\nconst touchscreen = supportsTouchscreen();\nconst { smAndDown } = useDisplay();\n\nconst splash = new URLSearchParams(window.location.search).get(\"splash\")?.toLowerCase() !== \"false\";\nconst showSplashScreen = ref(splash);\nconst splashReady = computed(() => splash && selectedEvent.value !== null);\nconst splashScreenRef = ref<HTMLElement | null>(null);\nconst backgroundImagesets = reactive<BackgroundImageset[]>([]);\nconst sheet = ref<SheetType | null>(null);\nconst layersLoaded = ref(false);\nconst positionSet = ref(false);\nconst trackSun = ref(true);\nconst pathInFoV = ref(false);\nconst forceCamera = computed(() => trackSun.value && !pathInFoV.value);\nconst showQuestion = ref(false);\nlet questionTimeout: ReturnType<typeof setTimeout> | null = null;\n\n\nconst tab = ref(0);\nlet howToUseTimeMs = 0;\nlet whatToExploreTimeMs = 0;\nlet howToUseStartTimestamp = null as number | null;\nlet whatToExploreStartTimestamp = null as number | null;\n\nconst playing = ref(false);\nconst showLocationSelector = ref(false);\n\nconst showHorizon = ref(true);\n\nconst startAzOffset = ref(40 * D2R);\nconst endAzOffset = ref(-startAzOffset.value);\nconst azOffsetSlope = computed(() => (endAzOffset.value - startAzOffset.value) / (endTime.value - startTime.value));\n\nconst sunDistance = ref(sunPlace.get_distance());\n\n// Get the next 4 \"dates of interest\"\n// i.e. equinoxes and solstices\nconst currentDate = new Date();\nconst currentYear = currentDate.getUTCFullYear();\nconst datesOfInterest = Seasons(currentYear);\n\n// Find dates that have passed and sort them by date\nconst pastEvents = Object.entries(datesOfInterest)\n  .filter(([_key, value]: [string, AstroTime]) => value.date < currentDate)\n  .map(entry => entry[0]);\n\n// If we have more than 1 past event, replace the older ones with next year's events\n// Keep only the most recent past event as our starting point\nif (pastEvents.length > 0) {\n  const nextSeasonsInfo = Seasons(currentYear + 1);\n  pastEvents.forEach(key => {\n    datesOfInterest[key] = nextSeasonsInfo[key];\n  });\n}\n\nconst startTime = ref(0);\nconst endTime = ref(0);\nconst sliderMin = 0;\nconst sliderMax = 500;\nconst sliderRange = sliderMax - sliderMin;\nconst sliderValue = computed({\n  get() {\n    const fraction = (currentTime.value.getTime() - startTime.value) / (endTime.value - startTime.value);\n    return sliderMin + fraction * sliderRange;\n  },\n  set(value: number) {\n    const fraction = (value - sliderMin) / sliderRange;\n    const time = fraction * (endTime.value - startTime.value) + startTime.value;\n    store.setTime(new Date(time));\n  }\n});\n\nconst middayTime = computed(() => 0.5 * (startTime.value + endTime.value));\nconst middayAltAz = computed(() => getSunPositionAtTime(new Date(middayTime.value)));\nconst highAltDeg = 70;\nconst highAltTimes = computed(() => {\n  const { rising: start, setting: end} = getTimeforSunAlt(highAltDeg, middayTime.value);\n  return { start, end }; \n});\nconst highAltCoordinates = computed(() => {\n  if (!(highAltTimes.value.start && highAltTimes.value.end)) {\n    return { start: null, end : null };\n  }\n  return {\n    start: getSunPositionAtTime(new Date(highAltTimes.value.start)),\n    end: getSunPositionAtTime(new Date(highAltTimes.value.end)),\n  };\n});\n\nconst sortedDatesOfInterest = computed(() => {\n  const entries: ([EventOfInterest, AstroTime])[] = Object.entries(datesOfInterest) as [EventOfInterest, AstroTime][];\n  const sortedEntries = entries.sort((a, b) => a[1].date.getTime() - b[1].date.getTime());\n  \n  // Add \"today\" as the first entry\n  const today: [EventOfInterest, AstroTime] = [\"today\", { date: new Date() } as AstroTime];\n  return [today, ...sortedEntries];\n});\n\nconst EVENTS_OF_INTEREST = [\n  \"today\",\n  \"mar_equinox\",\n  \"jun_solstice\",\n  \"sep_equinox\",\n  \"dec_solstice\",\n  \"custom\",\n] as const;\ntype EventOfInterest = typeof EVENTS_OF_INTEREST[number];\n\nconst selectedEvent = ref<EventOfInterest | null>(null);\n// const selectedDateType = ref<DateSelection | null>(null);\nconst selectedCustomDate = ref<Date | null>(null);\nconst showDatePicker = ref(false);\n\nconst getDateForEvent = (event: EventOfInterest): Date => {\n  if (event === \"today\") {\n    return new Date();\n  } else if (event === \"custom\" && selectedCustomDate.value) {\n    return selectedCustomDate.value;\n  } else {\n    return datesOfInterest[event].date;\n  }\n};\n\n\nconst handleDateSelection = (date: Date | null) => {\n  if (date) {\n    showDatePicker.value = false;\n    selectedCustomDate.value = date;\n    selectedEvent.value = 'custom';\n  }\n};\n\nfunction eventName(event: EventOfInterest): string {\n  const isSmall = smallSize.value;\n  switch (event) {\n  case \"today\":\n    return \"Today\";\n  case \"mar_equinox\":\n    return isSmall ? \"Mar Equinox\" : \"March Equinox\";\n  case \"jun_solstice\":\n    return isSmall ? \"Jun Solstice\" : \"June Solstice\";\n  case \"sep_equinox\":\n    return isSmall ? \"Sep Equinox\" : \"September Equinox\";\n  case \"dec_solstice\":\n    return isSmall ? \"Dec Solstice\" : \"December Solstice\";\n  case \"custom\":\n    return \"Custom\";\n  }\n}\n\nfunction getCurrentSeason(event: string, latitude: number): 'spring' | 'summer' | 'autumn' | 'winter' {\n\n  if (latitude >= 0) {\n    switch (event) {\n    case \"mar_equinox\":\n      return \"spring\";\n    case \"jun_solstice\":\n      return \"summer\";\n    case \"sep_equinox\":\n      return \"autumn\";\n    case \"dec_solstice\":\n      return \"winter\";      \n    }\n  } else {\n    switch (event) {\n    case \"mar_equinox\":\n      return \"autumn\";\n    case \"jun_solstice\":\n      return \"winter\";\n    case \"sep_equinox\":\n      return \"spring\";\n    case \"dec_solstice\":\n      return \"summer\";      \n    }\n  }\n  return \"spring\"; // fallback\n}\n\nfunction getCurrentSeasonForDate(date: Date, latitude: number): 'spring' | 'summer' | 'autumn' | 'winter' {\n  const year = date.getFullYear();\n  const seasonsForYear = Seasons(year);\n  \n  // Get the season dates for the year\n  const marEquinox = seasonsForYear.mar_equinox.date;\n  const junSolstice = seasonsForYear.jun_solstice.date;\n  const sepEquinox = seasonsForYear.sep_equinox.date;\n  const decSolstice = seasonsForYear.dec_solstice.date;\n  \n  // Determine which season the date falls into\n  let season: 'spring' | 'summer' | 'autumn' | 'winter';\n  \n  const getDate = (d: Date) => new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  \n  if (getDate(date) >= getDate(marEquinox) && getDate(date) < getDate(junSolstice)) {\n    season = 'spring';\n  } else if (getDate(date) >= getDate(junSolstice) && getDate(date) < getDate(sepEquinox)) {\n    season = 'summer';\n  } else if (getDate(date) >= getDate(sepEquinox) && getDate(date) < getDate(decSolstice)) {\n    season = 'autumn';\n  } else {\n    // Either before March equinox or after December solstice (winter)\n    season = 'winter';\n  }\n  \n  // Adjust for hemisphere\n  if (latitude < 0) {\n    // Southern hemisphere - seasons are opposite\n    switch (season) {\n    case 'spring': return 'autumn';\n    case 'summer': return 'winter';\n    case 'autumn': return 'spring';\n    case 'winter': return 'summer';\n    }\n  }\n  \n  return season;\n}\n\nconst seasonalColors = {\n  spring: '#FFA0D7',  \n  summer: '#F7EB67',  \n  autumn: '#FEB770',  \n  winter: '#c1e2fc'   \n};\n\nconst NIGHTTIME = \"rgb(120, 120, 120)\";\n\nconst accentColor = computed(() => {\n\n  const event = selectedEvent.value;\n  if (!event) {\n    return seasonalColors.spring;\n  }\n  const latitude = selectedLocation.value.latitudeDeg;\n  // Handle \"today\" case\n  if (event === 'today') {\n    const today = new Date();\n    const currentSeason = getCurrentSeasonForDate(today, latitude);\n    return seasonalColors[currentSeason];\n  }\n  \n  // Handle custom date case\n  if (event === 'custom' && selectedCustomDate.value) {\n    const customSeason = getCurrentSeasonForDate(selectedCustomDate.value, latitude);\n    return seasonalColors[customSeason];\n  }\n  \n  const currentSeason = getCurrentSeason(event, latitude);\n  return seasonalColors[currentSeason];\n});\n\nconst displayedDate = computed(() => {\n  if (selectedEvent.value === 'today') {\n    return new Date();\n  } else if (selectedEvent.value === 'custom' && selectedCustomDate.value) {\n    return selectedCustomDate.value;\n  } else if (selectedEvent.value) {\n    return datesOfInterest[selectedEvent.value].date;\n  }\n  return new Date(); // fallback\n});\n\nconst currentDayInfo = computed(() => {\n  const day = getDateForEvent(selectedEvent.value || 'today');\n  return getStartAndEndTimes(day);\n});\n\nconst sunAlways = computed<\"up\" | \"down\" | null>(() => {\n  let polarInfo: ReturnType<typeof getStartAndEndTimes>[2] | null = null;\n  if (selectedEvent.value != null) {\n    polarInfo = currentDayInfo.value[2];\n  } else if (selectedCustomDate.value != null) {\n    polarInfo = getStartAndEndTimes(selectedCustomDate.value)[2];\n  }\n  return polarInfo != null ? \n    (polarInfo.sunAlwaysUp ? \"up\" : (polarInfo.sunAlwaysDown ? \"down\" : null)) :\n    null;\n});\n\nfunction updatePathInFoV() {\n  // If the Sun is always up, no need to do the width check, which is problematic then anyways\n  if (sunAlways.value === \"up\") {\n    pathInFoV.value = false;\n    return;\n  }\n  const startPos = getSunPositionAtTime(new Date(startTime.value));\n  const endPos = getSunPositionAtTime(new Date(endTime.value));\n  const context = WWTControl.singleton.renderContext;\n  let azWidth = Math.abs(endPos.azRad - startPos.azRad) * R2D;\n  const widthToFit = 47.8 * Math.log(0.9 * context.width) - 245;\n  const peakNorth = Math.min(Math.abs(middayAltAz.value.azRad), Math.abs(middayAltAz.value.azRad - 2 * Math.PI)) < Math.abs(middayAltAz.value.azRad - Math.PI);\n  if (peakNorth) {\n    azWidth = 360 - azWidth;\n  }\n  pathInFoV.value = (azWidth < widthToFit);\n}\n\nfunction dayString(date: Date) {\n  return date.toLocaleString(\"en-US\", {\n    year: \"numeric\",\n    month: smallSize.value ? \"short\" : \"long\",\n    day: \"numeric\",\n  });\n}\n\nfunction formatDayLength(milliseconds: number, polarInfo: { sunAlwaysUp: boolean; sunAlwaysDown: boolean }): string {\n  if (polarInfo.sunAlwaysDown) {\n    return \"0h 0m\";\n  }\n  \n  if (polarInfo.sunAlwaysUp) {\n    return \"24h 0m\";\n  }\n  \n  // Normal calculation for days with sunrise/sunset\n  const totalMinutes = Math.round(milliseconds / 60000);\n  const hours = Math.floor(totalMinutes / 60);\n  const minutes = totalMinutes % 60;\n  return `${hours}h ${minutes}m`;\n}\n\nfunction goToSun() {\n  const sunPos = getSunPositionAtTime(currentTime.value);\n  const radec = horizontalToEquatorial(\n    sunPos.altRad, \n    sunPos.azRad, \n    selectedLocation.value.latitudeDeg * D2R,\n    selectedLocation.value.longitudeDeg * D2R,  \n    currentTime.value\n  );\n  store.gotoRADecZoom({\n    ...radec,\n    zoomDeg: Math.min(store.zoomDeg, 180),\n    instant: false,\n  });\n}\nfunction getStartAndEndTimes(day: Date): [Date, Date, { sunAlwaysUp: boolean; sunAlwaysDown: boolean }] {\n  const time = day.getTime();\n  const { rising: dayStart, setting: dayEnd, always } = getTimeforSunAlt(0, time);\n\n  let start: Date;\n  let end: Date;\n  const sunAlwaysUp = always === 'up';\n  const sunAlwaysDown = always === 'down';\n\n  if (dayStart === null || dayEnd === null) {\n    console.log(\"Polar day or night detected\");\n    // moved checking for polar day/night to useSun\n    \n    // It don't know if it really make sense to have the slider go \n    // from 00:00 to 23:59 when for both polar night and noon\n    //  But I think that is the only choice we have\n    // utcMidnight = time - (time % (24 * 60 * 60 * 1000))\n    // localMidnight = utcMidnight - timezone offset\n    const localMidnight = time - (time % (24 * 60 * 60 * 1000)) - selectedTimezoneOffset.value;\n    start = new Date(localMidnight);\n    end = new Date(localMidnight + 86400000 - 60);\n  } else {\n    start = new Date(dayStart);\n    end = new Date(dayEnd);\n  }\n\n  return [start, end, { sunAlwaysUp, sunAlwaysDown }];\n}\n\nfunction updateSliderBounds(_newLocation: LocationDeg, oldLocation: LocationDeg) {\n  if (selectedEvent.value === null) {\n    return;\n  }\n  const [start, end, _polarInfo] = getStartAndEndTimes(getDateForEvent(selectedEvent.value));\n  startTime.value = start.getTime();\n  endTime.value = end.getTime();\n\n  const oldOffset = getTimezoneOffset(tzlookup(oldLocation.latitudeDeg, oldLocation.longitudeDeg));\n\n  const diff = oldOffset - selectedTimezoneOffset.value;\n  let newSelectedTime = currentTime.value.getTime() + diff;\n  newSelectedTime = Math.min(Math.max(startTime.value, newSelectedTime), endTime.value);\n  selectedTime.value = newSelectedTime;\n  \n  // Update time in WWT to reflect the new location's timing\n  store.setTime(new Date(newSelectedTime));\n}\n\nfunction handlePlaying(play: boolean) {\n  if (forceCamera.value) {\n    resetView(MAX_ZOOM);\n  }\n  // Auto-pause when time reaches sunset or sunrise, accounting for playing direction\n  if (playing.value && ((currentTime.value.getTime() >= endTime.value && store.clockRate >= 0) || ( currentTime.value.getTime() <= startTime.value && store.clockRate <= 0))) {\n    playing.value = false;\n    return;\n  }  \n\n  playing.value = play;\n  wwtStats.playPauseCount += 1;\n  events.push(play ? 'wwt_play' : 'wwt_pause');\n}\n\nfunction centerOnMidday(altitudeDeg: number | null =null) {\n  let altToUse: number;\n  if (altitudeDeg == null) {\n    const currentAltAz = equatorialToHorizontal(\n      store.raRad,\n      store.decRad,\n      selectedLocation.value.latitudeDeg * D2R,\n      selectedLocation.value.longitudeDeg * D2R,\n      store.currentTime,\n    );\n    altToUse = currentAltAz.altRad;\n  } else {\n    altToUse = altitudeDeg * D2R;\n  }\n  const middayRADec = horizontalToEquatorial(\n    altToUse,\n    middayAltAz.value.azRad,\n    selectedLocation.value.latitudeDeg * D2R,\n    selectedLocation.value.longitudeDeg * D2R,\n    store.currentTime,\n  );\n  store.gotoRADecZoom({\n    raRad: middayRADec.raRad,\n    decRad: middayRADec.decRad,\n    zoomDeg: store.zoomDeg,\n    instant: true,\n  });\n}\n\nfunction goToEvent(event: EventOfInterest) {\n  const day = getDateForEvent(event);\n  if (event !== 'custom') {\n    selectedCustomDate.value = day;\n  }\n  updateSliderBounds(selectedLocation.value, selectedLocation.value);\n  resetView();\n}\n\nconst wwtStats = markRaw({\n  timeResetCount: 0,\n  reverseCount: 0,\n  playPauseCount: 0,\n  speedups: [] as number[],\n  slowdowns: [] as number[],\n  rateSelections: [] as number[],\n  startTime: Date.now(),\n});\n\n// get lat and lon url query parameters for initial location\nconst urlParams = new URLSearchParams(window.location.search);\nconst urlLat = urlParams.get(\"lat\");\nconst urlLon = urlParams.get(\"lon\");\nlet initialLat: number = 42.3581;\nlet initialLon: number = -71.1056;\nif (urlLat && urlLon) {\n  initialLat = parseFloat(urlLat);\n  initialLon = parseFloat(urlLon);\n}\nconst selectedLocation = ref<LocationDeg>({\n  longitudeDeg: initialLon,\n  latitudeDeg: initialLat,\n  // latitudeDeg: 72.40 // test polar latitude\n});\n\nfunction createQueryUrl(): string {\n  const lat = `${selectedLocation.value.latitudeDeg}`;\n  const lon = `${selectedLocation.value.longitudeDeg}`;\n  const params = new URLSearchParams(window.location.search);\n  params.set(\"lat\", lat);\n  params.set(\"lon\", lon);\n  return `${window.location.origin}/?${params.toString()}`;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(window as any).createQueryUrl = createQueryUrl;\n\nconst selectedLocationInfo = ref<LocationInfo>({ name: \"\", latitude: \"\", longitude: \"\" });\nconst searchErrorMessage = ref<string | null>(null);\nconst geocodingOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  access_token: process.env.VUE_APP_MAPBOX_ACCESS_TOKEN ?? \"\", \n};\n\nfunction updateLocationFromMap(location: LocationDeg) {\n  console.log(\"Updating location from map:\", location);\n  selectedLocation.value = location;\n  userSelectedLocations.push([location.latitudeDeg, location.longitudeDeg]);\n  events.push(`location_update ${location.latitudeDeg} ${location.longitudeDeg}`);\n}\n\nfunction latText(latitudeDeg: number): string {\n  const ns = latitudeDeg >= 0 ? 'N' : 'S';\n  const lat = Math.abs(latitudeDeg).toFixed(2);\n  return `${lat} ${ns}`;\n}\n\nfunction lonText(longitudeDeg: number): string {\n  const ew = longitudeDeg >= 0 ? 'E' : 'W';\n  const lon = Math.abs(longitudeDeg).toFixed(2);\n  return `${lon} ${ew}`;\n}\n\ninterface LocationInfo {\n  name: string;\n  latitude: string;\n  longitude: string;\n}\n\nasync function getLocationInfo(longitudeDeg: number, latitudeDeg: number): Promise<LocationInfo> {\n  let location: string = \"\";\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  try {\n    location = await textForLocation(longitudeDeg, latitudeDeg, geocodingOptions);\n  } catch (err) {\n    console.error(\"Error getting location text:\", err);\n  }\n  const locationName = !startsWithNumber(location) ? `${location}` : \"\";\n  const formattedLat = latText(latitudeDeg);\n  const formattedLon = lonText(longitudeDeg);\n\n  return {\n    name: locationName,\n    latitude: formattedLat,\n    longitude: formattedLon,\n  };\n}\n\nfunction startsWithNumber(text: string): boolean {\n  return text.charAt(0).match(/[0-9]|-/) !== null;\n}\n\nfunction setLocationFromFeature(feature: MapBoxFeature) {\n  selectedLocation.value = { longitudeDeg: feature.center[0], latitudeDeg: feature.center[1] };\n  getLocationInfo(feature.center[0], feature.center[1]).then(locationInfo => {\n    selectedLocationInfo.value = locationInfo;\n  }).catch(_err => {\n    searchErrorMessage.value = \"An error occurred while searching\";\n  });\n  userSelectedLocations.push(feature.center);\n  events.push(`location_update ${feature.center[0]} ${feature.center[1]}`);\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  setLocationFromFeature(feature);\n}\n\nasync function updateSelectedLocationInfo() {\n  const locationInfo = await getLocationInfo(selectedLocation.value.longitudeDeg, selectedLocation.value.latitudeDeg);\n  selectedLocationInfo.value = locationInfo;\n}\n\nfunction searchProvider(text: string): Promise<MapBoxFeatureCollection> {\n  return geocodingInfoForSearch(text, geocodingOptions);\n}\n\nconst selectedTime = ref(Date.now());\n// setInterval(() => {\n//   if (playing.value) {\n//     selectedTime.value = currentTime.value.getTime();\n//   }\n// }, 40);\n\nconst { selectedTimezone, selectedTimezoneOffset } = useTimezone(selectedLocation);\n  \nconst { getTimeforSunAlt, getSunPositionAtTime } = useSun({\n  store,\n  location: selectedLocation,\n  selectedTime: currentTime,\n  selectedTimezoneOffset,\n  zoomLevel: 360,\n});\n\nconst selectedLocaledTimeDateString = computed(() => {\n  const formatString = \"h:mm aa (zzz)\";\n  return formatInTimeZone(currentTime.value, selectedTimezone.value, formatString);\n});\n\n// import { getTimezoneOffset } from \"date-fns-tz\";\n// const testTime = ref(new Date('Sep 22 2025 00:00:00 GMT-0400').getTime());\n// const testSun = useSun({\n//   store,\n//   location: selectedLocation,\n//   selectedTime: testTime,\n//   selectedTimezoneOffset: getTimezoneOffset(\"America/New_York\", testTime.value),\n//   zoomLevel: 360,\n// });\n// console.log(\"Testing sun values\");\n// const { rising: testRising, setting: testSetting } = testSun.getTimeforSunAlt(0);\n// if (testRising !== null && testSetting !== null) {\n//   console.log(`Test Sun Rising: ${new Date(testRising)}`);\n//   console.log(`Test Sun Setting: ${new Date(testSetting)}`);\n// }\n\nconst MAX_ZOOM = 500;\n\nfunction aspectRatioSetup() {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error WWTControl does have a canvas element (that's not TS-exposed)\n  const canvas = WWTControl.singleton.canvas as HTMLCanvasElement;\n\n  function updateAzOffsets() {\n    const aspectRatio = canvas.width / canvas.height;\n    startAzOffset.value = 0.35 * (60 * aspectRatio + 13.5) * D2R;\n    endAzOffset.value = -startAzOffset.value;\n  }\n\n  const observer = new ResizeObserver((entries) => {\n    for (const entry of entries) {\n      if (entry.target === canvas) {\n        updateAzOffsets();\n        resetView();\n        return;\n      }\n    }\n  });\n\n  observer.observe(canvas);\n  updateAzOffsets();\n}\n\nonMounted(() => {\n  updateSelectedLocationInfo();\n  store.waitForReady().then(async () => {\n    WWTControl.singleton.set_zoomMax(MAX_ZOOM);\n    skyBackgroundImagesets.forEach(iset => backgroundImagesets.push(iset));\n\n    updateWWTLocation(selectedLocation.value);\n    \n    aspectRatioSetup();\n\n    store.setClockSync(false);\n    store.setClockRate(0);\n\n    // Adding Alt-Az grid here\n    store.applySetting([\"showAltAzGrid\", true]);\n    store.applySetting([\"showAltAzGridText\", true]);\n    store.applySetting([\"altAzGridColor\", Color.fromArgb(255, 255, 255, 255)]);\n    store.applySetting([\"localHorizonMode\", true]);\n\n    doWWTModifications();\n\n    // Set the initial event after everything is ready\n    selectedEvent.value = sortedDatesOfInterest.value[0][0];\n\n    // If there are layers to set up, do that here!\n    positionSet.value = true;\n    layersLoaded.value = true;\n\n    questionDisplaySetup();\n  });\n\n  createUserEntry();\n});\n\nconst ready = computed(() => layersLoaded.value && positionSet.value);\n\n/* `isLoading` is a bit redundant here, but it could potentially have independent logic */\nconst isLoading = computed(() => !ready.value);\n\nconst inNorthernHemisphere = computed(() => selectedLocation.value.latitudeDeg > 0);\n\n/* Properties related to device/screen characteristics */\nconst smallSize = computed(() => smAndDown.value);\nconst mobile = computed(() => smallSize.value && touchscreen);\n\nconst infoFraction = 34;\nconst infoSheetLocation = computed(() => smallSize.value ? \"bottom\" : \"left\");\nconst infoSheetHeight = computed(() => infoSheetLocation.value === \"bottom\" ? `${infoFraction}%` : \"100%\");\nconst infoSheetWidth = computed(() => infoSheetLocation.value === \"bottom\" ? \"100%\" : `${infoFraction}%`);\nconst infoTextHeight = computed(() => infoSheetLocation.value === \"bottom\" ? `calc(${infoFraction}vh - 25px)` : \"calc(100vh - 25px)\");\nconst infoSheetTransition = computed(() => infoSheetLocation.value === \"bottom\" ? \"dialog-bottom-transition\" : \"slide-x-transition\");\n\n/* This lets us inject component data into element CSS */\nconst cssVars = computed(() => {\n  return {\n    \"--accent-color\": accentColor.value,\n    \"--app-content-height\": showTextSheet.value && infoSheetLocation.value === \"bottom\" ? `${100 - infoFraction}vh` : \"100dvh\",\n    \"--app-content-width\": showTextSheet.value && infoSheetLocation.value === \"left\" ? `${100 - infoFraction}vw` : \"100dvw\",\n    \"--time-slider-width\": `${daylightPercentage.value.toFixed(2)}%`,\n    \"--time-slider-left\": `${(100 * Math.min(1, dayFractionForTimestamp(startTime.value + selectedTimezoneOffset.value))).toFixed(2)}%`,\n    \"--thumb-label-color\": sunAlways.value === \"down\" ? NIGHTTIME : accentColor.value,\n    \"--info-sheet-width\": infoSheetWidth.value,\n    \"--info-sheet-height\": infoSheetHeight.value,\n    \"--info-text-height\": infoTextHeight.value,\n  };\n});\n\nconst daylightPercentage = computed(() => 100 * Math.min(1, dayFractionForTimestamp(endTime.value - startTime.value)));\n\n\n\n/**\n  Computed flags that control whether the relevant dialogs display.\n  The `sheet` data member stores which sheet is open, so these are just\n  computed wrappers around modifying/querying that which can be used as\n  dialog v-model values\n*/\nconst showTextSheet = computed({\n  get() {\n    return sheet.value === \"text\";\n  },\n  set(_value: boolean) {\n    selectSheet(\"text\");\n  }\n});\n\nconst showVideoSheet = computed({\n  get() {\n    return sheet.value === \"video\";\n  },\n  set(value: boolean) {\n    selectSheet(\"video\");\n    if (!value) {\n      const video = document.querySelector(\"#info-video\") as HTMLVideoElement;\n      video.pause();\n    }\n  }\n});\n\n/**\n  This is convenient if there's any other logic that we want to run\n  when the splash screen is closed\n*/\nfunction closeSplashScreen() {\n  showSplashScreen.value = false;\n}\n\nfunction selectSheet(sheetType: SheetType | null) {\n  if (sheet.value === sheetType) {\n    sheet.value = null;\n    nextTick(() => {\n      blurActiveElement();\n    });\n  } else {\n    sheet.value = sheetType;\n  }\n}\n\nfunction resetView(zoomDeg?: number, withAzOffset=true) {\n\n  let altDeg = 33;\n  updatePathInFoV();\n  if (pathInFoV.value) {\n    setTimeout(() => centerOnMidday(altDeg), 100);\n    return;\n  }\n\n  const time = store.currentTime;\n  const t = time.getTime();\n\n  const latRad = selectedLocation.value.latitudeDeg * D2R;\n  const lonRad = selectedLocation.value.longitudeDeg * D2R;\n\n  const sunAltAz = getSunPositionAtTime(time);\n  let az = sunAltAz.azRad;\n\n  const middayAltDeg = middayAltAz.value.altRad * R2D;\n  const middayAzDeg = middayAltAz.value.azRad * R2D;\n  const peakNorth = Math.min(Math.abs(middayAzDeg), Math.abs(middayAzDeg - 360)) < Math.abs(middayAzDeg - 180);\n  if (middayAltDeg > highAltDeg) {\n\n    // Altitude modifications\n    const dayFrac  = (time.getTime() - startTime.value) / (endTime.value - startTime.value);\n    const dayAzFactor = -2 * Math.abs(0.5 - dayFrac) + 1;\n    altDeg = middayAltDeg * dayAzFactor;\n    altDeg = Math.max(90 - Math.abs(altDeg - 90), 33);\n\n    // Azimuth modifications\n    const { start: highStartTime, end: highEndTime } = highAltTimes.value;\n    const { start, end } = highAltCoordinates.value;\n    if (highStartTime && highEndTime && start && end && t > highStartTime && t < highEndTime) {\n      const topStartAz = start.azRad;\n      let topEndAz = end.azRad;\n      const tSouth = (Math.PI - topStartAz) / (topEndAz - topStartAz);\n      const passThroughSouth = tSouth >= 0 && tSouth <= 1;\n      if (peakNorth === passThroughSouth) {\n        topEndAz -= 2 * Math.PI;\n      }\n\n      const tTop = (t - highStartTime) / (highEndTime - highStartTime);\n      az = tTop * (topEndAz - topStartAz) + topStartAz;\n    }\n  }\n  const alt = altDeg * D2R;\n\n  if (t > 0 && withAzOffset) {\n    const offset = (azOffsetSlope.value * (t - startTime.value) + startAzOffset.value);\n    const sgn = peakNorth ? -1 : 1;\n    az += (offset * sgn);\n  }\n  const raDec = horizontalToEquatorial(\n    alt,\n    az,\n    latRad,\n    lonRad,\n    time,\n  );\n\n  store.gotoRADecZoom({\n    raRad: raDec.raRad,\n    decRad: raDec.decRad,\n    zoomDeg: zoomDeg ?? MAX_ZOOM,\n    instant: true,\n  });\n}\n\nfunction updateWWTLocation(location: LocationDeg) {\n  wwtSettings.set_locationLat(location.latitudeDeg);\n  wwtSettings.set_locationLng(location.longitudeDeg);\n}\n\nfunction doWWTModifications() {\n  Grids.drawEcliptic = drawEcliptic;\n\n  // We need to render one frame ahead of time\n  // as there's a lot of setup done on the first frame\n  // render that we need to use\n  WWTControl.singleton.renderOneFrame();\n\n  const boundRenderOneFrame = renderOneFrame.bind(WWTControl.singleton);\n  const newFrameRender = function() { \n    boundRenderOneFrame(\n      showHorizon.value,\n      showHorizon.value,\n      false,\n    );\n  };\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton._drawSkyOverlays = drawSkyOverlays.bind(WWTControl.singleton);\n\n  // as well as our custom text overlays\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton.renderOneFrame = newFrameRender;\n\n  const originalUpdatePlanetLocations = Planets.updatePlanetLocations;\n  function newUpdatePlanetLocations(threeD: boolean) {\n    originalUpdatePlanetLocations(threeD);\n    // Only scale the Sun (index 0)\n    // Use smaller scale (1) during polar night, normal scale (4) otherwise\n    const polarInfo = currentDayInfo.value[2];\n    Planets._planetScales[0] = Planets._planetScales[0] * (polarInfo.sunAlwaysDown ? 1 : 4);\n  }\n  Planets.updatePlanetLocations = newUpdatePlanetLocations;\n  Planets.drawPlanets = drawPlanets;\n}\n\nwatch(selectedLocation, (location: LocationDeg, oldLocation: LocationDeg) => {\n  updateSelectedLocationInfo();\n  updateWWTLocation(location);\n  updateSliderBounds(location, oldLocation);\n  resetView();\n});\n\nwatch(currentTime, (_time: Date) => {\n  // Auto-pause when time reaches sunset or sunrise, accounting for playing direction\n  if (playing.value && ((_time.getTime() >= endTime.value && store.clockRate >= 0) || ( _time.getTime() <= startTime.value && store.clockRate <= 0))) {\n    playing.value = false;\n    return;\n  }  \n  if (forceCamera.value) {\n    resetView(store.zoomDeg);\n  }\n  sunDistance.value = sunPlace.get_distance();\n});\n\nwatch(forceCamera, (value: boolean) => {\n  if (value) {\n    resetView();\n  }\n});\n\nwatch(selectedEvent, (event: EventOfInterest | null) => {\n  if (!event) {\n    return;\n  }\n\n  goToEvent(event);\n  const representation = event === \"custom\" ? `event_custom ${selectedCustomDate.value?.toISOString()}` : event as string;\n  userSelectedDates.push(representation);\n  events.push(representation);\n});\n\nwatch(selectedCustomDate, (date: Date | null) => {\n  if (date && selectedEvent.value === \"custom\") {\n    goToEvent(\"custom\");\n\n    const representation = `event_custom ${selectedCustomDate.value?.toISOString()}`;\n    userSelectedDates.push(representation);\n    events.push(representation);\n  }\n});\n\nwatch(inNorthernHemisphere, (_inNorth: boolean) => resetNSEWText());\nwatch(splashReady, (ready: boolean) => {\n  if (ready) {\n    nextTick(() => {\n      if (splashScreenRef.value) {\n        const firstFocusable = splashScreenRef.value.querySelector<HTMLElement>('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n        if (firstFocusable) {\n          firstFocusable.focus();\n        }\n      }\n    });\n  }\n});\n\nfunction updateTabTime(leavingTab: number, timestamp: number) {\n  if (leavingTab === 0) {\n    howToUseTimeMs += (timestamp - (howToUseStartTimestamp ?? timestamp));\n    howToUseStartTimestamp = null;\n  } else {\n    whatToExploreTimeMs += (timestamp - (whatToExploreStartTimestamp ?? timestamp));\n    whatToExploreStartTimestamp = null;\n  }\n}\n\nfunction startTabTime(enteringTab: number, timestamp: number) {\n  if (enteringTab === 0) {\n    howToUseStartTimestamp = timestamp;\n  } else {\n    whatToExploreStartTimestamp = timestamp;    \n  }\n}\n\nwatch(showTextSheet, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    startTabTime(tab.value, now);\n  } else {\n    updateTabTime(tab.value, now);\n  }\n});\n\nwatch(tab, (newTab: number) => {\n  // This shouldn't ever happen\n  if (!showTextSheet.value) {\n    return;\n  }\n  // We're going to `newTab`\n  // The tab indices are 0 and 1, so we're leaving `1 - newTab`\n  const now = Date.now();\n  startTabTime(newTab, now);\n  updateTabTime(1 - newTab, now);\n});\n\n\nconst STORY_DATA_URL = `${API_BASE_URL}/seasons/data`;\nconst OPT_OUT_KEY = \"seasons-optout\" as const;\nconst AHA_OPT_OUT_KEY = \"seasons-aha-optout\" as const;\nconst UUID_KEY = \"seasons-uuid\" as const;\nconst storedOptOut = window.localStorage.getItem(OPT_OUT_KEY);\nconst storedAhaOptOut = window.localStorage.getItem(AHA_OPT_OUT_KEY);\nconst maybeUUID = window.localStorage.getItem(UUID_KEY);\nconst optOut = typeof storedOptOut === \"string\" ? storedOptOut === \"true\" : null;\nconst responseOptOut = ref(optOut);\nconst ahaOptOut = ref(typeof storedAhaOptOut === \"string\" ? storedAhaOptOut === \"true\" : null);\nconst showPrivacyDialog = ref(false);\nconst existingUser = maybeUUID !== null;\nconst uuid = maybeUUID ?? v4();\nif (!existingUser) {\n  window.localStorage.setItem(UUID_KEY, uuid);\n}\n\nlet timeSliderUsedCount = 0;\nlet events: string[] = [];\nlet userSelectedDates: string[] = [];\nlet userSelectedLocations: [number, number][] = [];\nlet ahaMomentResponses: string[] = [];\nlet appStartTimestamp = Date.now();\n\nfunction onTimeSliderEnd(_value: number) {\n  timeSliderUsedCount += 1;\n  events.push(\"time_slider_used\");\n}\n\nasync function questionDisplaySetup() {\n  if (responseOptOut.value || ahaOptOut.value) {\n    return;\n  }\n\n  const existingDataResponse = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" }\n  });\n\n  const existingDataContent = await existingDataResponse.json();\n  const alreadyAnswered = existingDataResponse.status === 200 && existingDataContent.response.aha_moment_responses.length > 0;\n\n  if (alreadyAnswered) {\n    return;\n  }\n\n  setQuestionTimeout();\n}\n\nfunction setQuestionTimeout(timeout=4 * 60_000) {\n  questionTimeout = setTimeout(() => {\n    showQuestion.value = true;\n  }, timeout);\n}\n\nasync function createUserEntry() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const response = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" },\n  });\n  const content = await response.json();\n  const exists = response.status === 200 && content.response?.user_uuid != undefined;\n  if (exists) {\n    return;\n  }\n\n  fetch(`${STORY_DATA_URL}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_uuid: uuid,\n    }),\n  });\n}\n\nfunction resetData() {\n  howToUseTimeMs = 0;\n  whatToExploreTimeMs = 0;\n\n  timeSliderUsedCount = 0;\n  events = [];\n  userSelectedDates = [];\n  userSelectedLocations = [];\n  ahaMomentResponses = [];\n  Object.assign(wwtStats, {\n    timeResetCount: 0,\n    reverseCount: 0,\n    playPauseCount: 0,\n    speedups: [],\n    slowdowns: [],\n    rateSelections: [],\n    startTime: selectedTime.value,\n  });\n\n  const now = Date.now();\n  appStartTimestamp = now;\n  howToUseStartTimestamp = (showTextSheet.value && tab.value == 0) ? now : null;\n  whatToExploreStartTimestamp = (showTextSheet.value && tab.value == 1) ? now : null;\n}\n\nfunction updateUserData() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const now = Date.now();\n  const howToUseTime = (showTextSheet.value && howToUseStartTimestamp !== null) ? now - howToUseStartTimestamp : howToUseTimeMs;\n  const whatToExploreTime = (showTextSheet.value && whatToExploreStartTimestamp !== null) ? now - whatToExploreStartTimestamp : whatToExploreTimeMs;\n  const body = {\n    events,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    time_slider_used_count: timeSliderUsedCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    user_selected_dates: userSelectedDates,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    user_selected_locations: userSelectedLocations,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    app_time_ms: now - appStartTimestamp,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    how_to_use_time_ms: howToUseTime,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    what_to_explore_time_ms: whatToExploreTime,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_time_reset_count: wwtStats.timeResetCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_reverse_count: wwtStats.reverseCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_play_pause_count: wwtStats.playPauseCount,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_speedups: wwtStats.speedups,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_slowdowns: wwtStats.slowdowns,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_rate_selections: wwtStats.rateSelections,\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    wwt_start_stop_times: [wwtStats.startTime, selectedTime.value],\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    aha_moment_response: ahaMomentResponses,\n  } as Record<string, unknown>;\n  fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify(body),\n    keepalive: true,\n  }).then(() => resetData());\n}\n\nwatch(showSplashScreen, (show: boolean) => {\n  if (!show && responseOptOut.value === null) {\n    showPrivacyDialog.value = true; \n  }\n});\n\nwatch(responseOptOut, (optOut: boolean | null) => {\n  if (optOut !== null) {\n    window.localStorage.setItem(OPT_OUT_KEY, String(optOut));\n  }\n});\n\nwatch(ahaOptOut, (optOut: boolean | null) => {\n  if (optOut !== null) {\n    window.localStorage.setItem(AHA_OPT_OUT_KEY, String(optOut));\n  }\n});\n\nwatch(showQuestion, (show: boolean) => {\n  if (show && questionTimeout) {\n    clearTimeout(questionTimeout);\n  }\n});\n\nwindow.addEventListener(\"visibilitychange\", () => {\n  if (document.visibilityState === \"hidden\") {\n    updateUserData();\n  } else {\n    resetData();\n  }\n});\n\nwindow.onbeforeunload = updateUserData;\n\n\n</script>\n\n<style lang=\"less\">\n@font-face {\n  font-family: \"Highway Gothic Narrow\";\n  src: url(\"./assets/HighwayGothicNarrow.ttf\");\n}\n\n:root {\n  font-size: clamp(0.8rem, min(1.7vh, 1.7vw), 1.1rem);\n}\n\nhtml {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  background-color: #000;\n  overflow: auto !important;\n\n  -ms-overflow-style: none;\n  // scrollbar-width: none;\n}\n\nbody {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: auto !important;\n\n  font-family: Verdana, Arial, Helvetica, sans-serif;\n}\n\n#main-content {\n  position: fixed;\n  right: 0;\n  width: var(--app-content-width);\n  height: var(--app-content-height);\n  overflow: hidden;\n\n  transition: all 0.3s ease-in-out;\n}\n\n#app {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  font-size: 11pt;\n  overflow: auto !important;\n\n  .wwtelescope-component {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    border-style: none;\n    border-width: 0;\n    margin: 0;\n    padding: 0;\n  }\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.modal {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#modal-loading {\n  background-color: #000;\n  .container {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    .spinner {\n      background-image: url(\"https://projects.cosmicds.cfa.harvard.edu/cds-website/misc/lunar_loader.gif\");\n      background-repeat: no-repeat;\n      background-size: contain;\n      width: 3rem;\n      height: 3rem;\n    }\n    p {\n      margin: 0 0 0 1rem;\n      padding: 0;\n      font-size: 150%;\n    }\n  }\n}\n\n#top-content {\n  position: absolute;\n  top: 1rem;\n  left: 1rem;\n  width: calc(100% - 2rem);\n  pointer-events: none;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n#left-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  align-items: flex-start;\n}\n\n#left-buttons .icon-wrapper {\n  width: 30%;\n  flex-shrink: 0;\n}\n\n#right-buttons {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  height: auto;\n\n  .date-buttons {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;    \n  }\n}\n\n// From Sara Soueidan (https://www.sarasoueidan.com/blog/focus-indicators/) & Erik Kroes (https://www.erikkroes.nl/blog/the-universal-focus-state/)\n// checkbox will only get oreo styling when user tabs by keyboard.\n:focus-visible, .v-checkbox .v-selection-control__input:has(:focus-visible) {\n  outline: 9px double white !important;\n  box-shadow: 0 0 0 6px black !important;\n  border-radius: .125rem;\n}\n\n// Reduce focus indicator for text input fields only (they have their own built-in indicators) and from v-slider thumb when focused via mouse (not keyboard)\n.v-text-field input:focus-visible, .v-slider .v-slider-thumb:focus:not(:focus-visible) {\n  outline: none !important;\n  box-shadow: none !important;\n}\n\n.video-wrapper {\n  height: 100%;\n  background: black;\n  text-align: center;\n  z-index: 1000;\n\n  #video-close-icon {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 15;\n    \n    &:hover {\n      cursor: pointer;\n    }\n\n    &:focus {\n      color: white;\n      border: 2px solid white;\n    }\n  }\n}\n\nvideo {\n  height: 100%;\n  width: auto;\n  max-width: 100%;\n  object-fit: contain;\n}\n\n#info-video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  padding: 0px;\n  z-index: 10;\n}\n\n.info-sheet {\n  .v-overlay__content {\n    align-self: flex-end;\n    padding: 0 !important;\n    margin: 0 !important;\n    max-width: 100% !important;\n    height: var(--info-sheet-height) !important;\n    width: var(--info-sheet-width) !important;\n  }\n\n  &.info-sheet-left .v-overlay__content {\n    position: absolute;\n    top: 0;\n    left: 0;\n    max-height: 100%;\n    & .v-card, & .v-card .v-window {\n      height: 100%;\n    }\n    \n    & .info-tabs h3 {\n      font-size: 10pt;\n    }\n  }\n\n  #tabs {\n    width: calc(100% - 3em);\n    align-self: left;\n  }\n  \n  .info-text {\n    height: var(--info-text-height);\n    padding-bottom: 25px;\n  \n    & a {\n      text-decoration: none;\n    }\n  }\n  \n  .close-icon {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 15;\n  \n    &:hover {\n      cursor: pointer;\n    }\n  \n    &:focus {\n      color: white;\n      border: 2px solid white;\n    }\n  }\n  \n  .scrollable {\n    overflow-y: auto;\n  }\n  \n  #tab-items {\n    // padding-bottom: 2px !important;\n  \n    .v-card-text {\n      font-size: ~\"max(14px, calc(0.7em + 0.3vw))\";\n      line-height: 1.6;\n      padding-top: 0;\n      padding-left: ~\"max(4vw, 16px)\";\n      padding-right: ~\"max(4vw, 16px)\";\n\n      h3 {\n        padding-top: 5px;\n      }\n\n      h4 {\n        padding-top: 5px;\n        padding-bottom: 4px;\n      }\n\n      p {\n        padding-block: 3px;\n      }\n\n      @media (max-width: 699px) {\n        h3 {\n          font-size: 1.3rem;\n        }\n\n        h4 {\n          font-size: 1.1rem;\n        }\n      }\n\n      .explore-list {\n        li {\n          padding-block: 2px;\n        }\n      }\n      \n  \n      .end-spacer {\n        height: 25px;\n      }\n    }\n  \n  }\n  \n  #close-text-icon {\n    position: absolute;\n    top: 0.25em;\n    right: calc((3em - 0.6875em) / 3); // font-awesome-icons have width 0.6875em\n    color: white;\n  }\n\n  // This prevents the tabs from having some extra space to the left when the screen is small\n  // (around 400px or less)\n  .v-tabs:not(.v-tabs--vertical).v-tabs--right>.v-slide-group--is-overflowing.v-tabs-bar--is-mobile:not(.v-slide-group--has-affixes) .v-slide-group__next, .v-tabs:not(.v-tabs--vertical):not(.v-tabs--right)>.v-slide-group--is-overflowing.v-tabs-bar--is-mobile:not(.v-slide-group--has-affixes) .v-slide-group__prev {\n    display: none;\n  }\n}\n\n#date-picker {\n  pointer-events: auto;\n}\n\n#location-title {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.icon-location-button {\n  cursor: pointer;\n  pointer-events: auto;\n}\n\n.event-button {\n  font-size: 0.9rem;\n  background: black;\n  border: 1px solid;\n  border-radius: 5px;\n  padding: 0.5rem;\n  pointer-events: auto;\n  border-color: white;\n  width: 100%;\n\n  &.selected {\n    color: var(--accent-color);\n    border-color: var(--accent-color);\n    border-radius: 5px !important;\n    box-shadow: none !important;\n\n    &:hover {\n      border-color: color-mix(in srgb, var(--accent-color) 70%, black);\n    }\n  }\n\n  transition: opacity 0.2s ease;\n  \n  &:hover {\n    border-color: color-mix(in srgb, white 70%, black);\n  }  \n}\n\n.options {\n  color: var(--accent-color);\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  pointer-events: auto;\n}\n\n.event-title {\n  font-size: 1rem;\n  padding-bottom: 5px;\n  display: flex;\n  align-content: center;\n  color: var(--accent-color);\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n}\n\n#date-title {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 5px;\n  align-items: flex-end;\n\n  .displayed-date-info {\n    background: rgba(0, 0, 0, 0.7);\n    border: 1px solid var(--accent-color);\n    border-radius: 5px;\n    padding: 0.5rem;\n    text-align: right;\n    pointer-events: auto;\n\n    .date-display {\n      font-weight: bold;\n      font-size: 0.9rem;\n    }\n\n    .event-display {\n      font-size: 0.8rem;\n      opacity: 0.9;\n    }\n  }\n}\n\n.date-picker-section {\n  display: flex;\n  justify-content: flex-end;\n  pointer-events: auto;\n  width: 100%;\n\n  .calendar-button {\n    font-size: 0.7rem;\n    text-transform: none;\n  }\n}\n\n\n.map-container {\n  @media (max-width: 600px) {\n    width: 90vw;\n    height: 70vh;\n  }\n\n@media (min-width: 601px) {\n    width: 70vw;\n    height: 60vh;\n  }\n}\n\n.control-icon {\n  pointer-events: auto; \n}\n\n#bottom-content {\n  width: 75%;\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  bottom: 1.5rem;\n  left: 50%;\n  transform: translateX(-50%);\n  pointer-events: none;\n  align-items: center;\n  justify-content: center;\n  gap: 30px;\n\n  @media (max-width: 959px) {\n    gap: 5px;\n    bottom: 1rem;\n  }\n\n  #speed-control-icon-button {\n    display: none;\n  }\n\n  @media (max-width: 699px) {\n    #reset-button {\n      display: none;\n    }\n  }  \n\n  @media (max-height: 599px) {\n    bottom: 0.5rem;\n  }\n\n  #speed-text {\n    font-size: 1rem;\n    background-color: transparent !important;\n    color: var(--accent-color);\n    text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  }\n\n}\n\n#time-slider-chips {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  padding-left: 3rem;\n  padding-right: 2rem;\n\n  .v-input__details {\n    height: 0;\n    min-height: 0;\n    padding-top: 0;\n  }\n  \n  @media (max-width: 699px) {\n    padding-left: 2rem;\n    padding-right: 1rem;\n    min-width: 50%;\n  }\n\n  @media (max-width: 969px) {\n    width: 70%;\n  }\n}\n\n.slider-container {\n  position: relative;\n  height: 32px;\n}\n\n.dummy-time-slider {\n  position: absolute;\n  left: 0;\n  width: 100%;\n\n  .v-slider-thumb {\n    display: none;\n  }\n}\n\n.v-slider {\n  pointer-events: auto;\n}\n\n.time-slider {\n\n  &.time-slider-large {\n    position: absolute;\n    width: var(--time-slider-width);\n    left: var(--time-slider-left);\n  }\n\n  .v-slider-thumb {\n\n    .v-slider-thumb__label {\n      color: white;\n      background-color: rgba(0, 0, 0, 0.5);\n      font-weight: 600;\n      border: 2px solid var(--thumb-label-color);\n      border-radius: 5px;\n      width: max-content;\n      padding: 10px;\n      font-size: 0.8rem;\n\n      &::before {\n        color: var(--thumb-label-color);\n      }\n\n      @media (max-width: 699px) {\n        padding-inline: 5px;\n      }\n    }\n  }\n  @media (max-width: 699px) {\n    padding-left: 5px;\n  }\n\n}\n\n.time-chips {\n  display: flex;\n  justify-content: space-between;\n  pointer-events: auto;\n\n  .time-chip {\n    cursor: pointer;\n    font-size: 0.8rem;\n\n    &:hover {\n      opacity: 0.8;\n    }\n  }\n\n  @media (max-width: 699px) {\n    font-size: 0.7rem;\n    padding-inline: 1px;\n  }\n}\n\n#bottom-content #speed-buttons {\n  @media (max-width: 699px) {\n    gap: 6px !important;\n  }\n}\n\n#small-play-pie-chart {\n  display: flex;\n  flex-direction: row;\n  gap: 20px;\n\n  #play-pause {\n    height: auto;\n    flex-shrink: 0;\n  }\n}\n\n#geolocation-close {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  z-index: 1000;\n}\n\n#geolocation-controls {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n  position: absolute;\n  width: 350px;\n  bottom: 1rem;\n  right: 1rem;\n  z-index: 1000;\n  gap: 5px;\n\n  .location-search {\n    flex-grow: 1;\n\n    .v-list-item {\n      z-index: 5000;\n    }\n  }\n\n  @media (max-width: 600px) {\n    width: 300px;\n  }\n}\n\n#geolocation-wrapper-location .v-btn {\n  background-color: black;\n}\n\n.location-display {\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n}\n\n#location-button {\n  pointer-events: auto;\n  height: fit-content;\n  text-align: left;\n  padding-inline: 0.5rem;\n}\n\n#body-logos {\n  position: absolute;\n  right: 0.5em;\n  bottom: 0.1em;\n\n  #logo-credits img {\n    height: 32px !important;\n  }\n\n  @media (max-height: 599px) {\n    img {\n      display: none;\n    }\n  }\n}\n\n.info-tabs {\n  @media (max-width: 699px) {\n    .v-btn {\n      padding-inline: 0px;\n    }\n\n    h3 {\n      font-size: 1rem;\n    }\n  }  \n}\n\nsvg.fa-xmark {\n  padding: 0.5em;\n  margin: -0.5em;\n  aspect-ratio: 1 / 1;\n  border-radius: 50%;\n}\n\n#geolocation-close >  svg.fa-xmark:hover {\n  background-color: rgba(255, 255, 255, 0.5);\n  overflow: visible;\n  z-index: 9000;\n}\n\n#date-info {\n  margin-bottom: 10px;\n}\n\n#change-flags {\n  position: absolute;\n  right: 0.5rem;\n  bottom: 4rem;\n  display: flex;\n  flex-direction: row;\n  gap: 6px;\n  pointer-events: none;\n\n  @media (max-width: 959px) {\n    right: 0.5rem;\n    bottom: 0.5rem;\n  }\n\n  @media (max-width: 699px) {\n    display: none;\n  }\n\n  @media (max-height: 599px) {\n    bottom: 0.5rem;\n  }\n    \n  .icon-wrapper {\n    margin: 0;\n    padding: 0.15em;\n    border: none;\n    min-width: 0;\n  }\n}\n\n.info-button {\n  /* most of the styling comes from .event-button */\n  border: 1px solid var(--accent-color);\n  text-align: right;\n  user-select: none; /* Standard */\n  pointer-events: auto;\n\n  &:hover {\n    border-color: color-mix(in srgb, var(--accent-color) 70%, black);\n  }  \n}\n\n.display-date-button {\n  cursor: pointer;\n  pointer-events: auto;\n}\n\n.clickable-object {\n  cursor: pointer;\n  pointer-events: auto;\n  transition: opacity 0.2s ease;\n  \n  &:hover {\n    opacity: 0.7;\n  }\n}\n\n.icon-wrapper, .options {\n  &:hover {\n    opacity: 0.7;\n  }  \n}\n\n#privacy-popup-dialog {\n\n  .v-card-text {\n    color: #BDBDBD;\n  }\n\n  .v-overlay__content {\n    font-size: var(--default-font-size);\n    background-color: purple;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  .v-btn--size-default {\n      font-size: calc(0.9 * var(--default-font-size));\n    }  \n\n  .v-card-actions .v-btn {\n    padding: 0 4px;\n  }\n}\n\n.question-root {\n  position: absolute !important;\n  right: 0.5rem;\n  bottom: 0.5rem;\n  padding: 5px;\n  width: fit-content !important;\n  // left: 50%;\n  // transform: translateX(-50%);\n  gap: 0 !important;\n  border: solid 1px #EFEFEF !important;\n  border-radius: 10px !important;\n  background-color: #222222 !important;\n  opacity: 0.95 !important;\n  z-index: 20000;\n\n  .question-title {\n    color: #EFEFEF;\n    font-size: 0.9rem;\n  }\n\n  .response-box {\n    width: 100%;\n    margin-top: 10px;\n  }\n\n  .v-card-actions {\n    padding: 0;\n  }\n\n  .privacy-button {\n    font-size: 10px;\n    position: absolute;\n    left: 5px;\n  }\n}\n\n</style>\n","import script from \"./SeasonsStory.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SeasonsStory.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SeasonsStory.vue?vue&type=style&index=0&id=37ce8d48&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, withKeys as _withKeys, createVNode as _createVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, normalizeStyle as _normalizeStyle, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"location-input-section\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"error-message\"\n}\nconst _hoisted_3 = { id: \"splash-screen-acknowledgements\" }\nconst _hoisted_4 = { id: \"splash-screen-logos\" }\n\nimport {computed, ref } from 'vue';\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\nexport interface Props {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  cssVars?: any;\n  title: string;\n  color?: string,\n  highlightColor?: string\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SplashScreen',\n  props: /*@__PURE__*/_mergeModels({\n    cssVars: { default: () => ({}) },\n    title: {},\n    color: {},\n    highlightColor: {}\n  }, {\n    \"modelValue\": { default: true },\n    \"modelModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels(['close', 'location-selected'], [\"update:modelValue\"]),\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst cssVars = computed(() => {\n  return {\n    ...props.cssVars,\n    ...{'--accent-color': props.color == null ? props.cssVars['--accent-color'] : props.color},\n  };\n});\n\nconst emits = __emit;\n\nconst showSplashScreen = _useModel(__props, \"modelValue\");\nconst searchErrorMessage = ref<string | null>(null);\n\nconst geocodingOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  access_token: process.env.VUE_APP_MAPBOX_ACCESS_TOKEN ?? \"\", \n};\n\nfunction searchProvider(text: string): Promise<MapBoxFeatureCollection> {\n  return geocodingInfoForSearch(text, geocodingOptions);\n}\n\nfunction handleLocationSet(feature: MapBoxFeature) {\n  emits('location-selected', feature);\n  searchErrorMessage.value = null;\n}\n\nfunction closeSplashScreen() {\n  showSplashScreen.value = false;\n  emits('close');\n}\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_location_search = _resolveComponent(\"location-search\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_credit_logos = _resolveComponent(\"credit-logos\")!\n  const _component_focus_trap = _resolveComponent(\"focus-trap\")!\n  const _component_v_overlay = _resolveComponent(\"v-overlay\")!\n  const _directive_click_outside = _resolveDirective(\"click-outside\")!\n\n  return (_openBlock(), _createBlock(_component_v_overlay, {\n    \"model-value\": showSplashScreen.value,\n    absolute: \"\",\n    opacity: \"0.6\",\n    style: _normalizeStyle(cssVars.value),\n    id: \"splash-overlay\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_focus_trap, null, {\n        default: _withCtx(() => [\n          _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n            id: \"splash-screen\",\n            style: _normalizeStyle(cssVars.value)\n          }, [\n            _createVNode(_component_font_awesome_icon, {\n              id: \"close-splash-button\",\n              onClick: closeSplashScreen,\n              onKeyup: _withKeys(closeSplashScreen, [\"enter\"]),\n              icon: \"xmark\",\n              tabindex: \"0\"\n            }),\n            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { id: \"splash-title\" }, [\n              _createElementVNode(\"p\", null, \"The Sun's Seasonal Journey\")\n            ], -1)),\n            _cache[5] || (_cache[5] = _createElementVNode(\"div\", { id: \"invitation\" }, \" See how the Sun's path changes on the solstices and equinoxes from any location on Earth! \", -1)),\n            _createElementVNode(\"div\", _hoisted_1, [\n              _cache[1] || (_cache[1] = _createElementVNode(\"p\", { class: \"location-prompt\" }, \"Enter a location:\", -1)),\n              _createVNode(_component_location_search, {\n                class: _normalizeClass(['splash-location-search']),\n                small: \"\",\n                \"button-size\": \"large\",\n                \"accent-color\": cssVars.value['--accent-color'],\n                \"search-provider\": searchProvider,\n                onSetLocation: handleLocationSet,\n                onError: _cache[0] || (_cache[0] = ($event: any) => (searchErrorMessage.value = $event)),\n                placeholder: \"Enter city, state, or address\"\n              }, null, 8, [\"accent-color\"]),\n              (searchErrorMessage.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(searchErrorMessage.value), 1))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"medium\" }, \" or \", -1)),\n            _createElementVNode(\"div\", null, [\n              _createVNode(_component_v_btn, {\n                class: \"splash-get-started\",\n                onClick: closeSplashScreen,\n                onKeyup: _withKeys(closeSplashScreen, [\"enter\"]),\n                color: cssVars.value['--accent-color'],\n                density: _ctx.$vuetify.display.xs ? 'compact' : 'default',\n                size: _ctx.$vuetify.display.width < 500 || _ctx.$vuetify.display.height < 550 ? 'medium' : 'x-large',\n                variant: \"elevated\",\n                rounded: \"lg\"\n              }, {\n                default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n                  _createTextVNode(\" Use Cambridge, MA \", -1)\n                ]))]),\n                _: 1\n              }, 8, [\"color\", \"density\", \"size\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_3, [\n              _cache[3] || (_cache[3] = _createElementVNode(\"span\", null, [\n                _createTextVNode(\" Brought to you by \"),\n                _createElementVNode(\"a\", {\n                  href: \"https://www.cosmicds.cfa.harvard.edu/\",\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }, \"Cosmic Data Stories\"),\n                _createTextVNode(\" and \"),\n                _createElementVNode(\"a\", {\n                  href: \"https://www.worldwidetelescope.org/home/\",\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }, \"WorldWide Telescope\"),\n                _createTextVNode(\". \")\n              ], -1)),\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createVNode(_component_credit_logos, { \"default-logos\": ['cosmicds', 'wwt', 'sciact', 'nasa'] })\n              ])\n            ])\n          ], 4)), [\n            [_directive_click_outside, closeSplashScreen]\n          ])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"model-value\", \"style\"]))\n}\n}\n\n})","<template>\n  <v-overlay\n    :model-value=\"showSplashScreen\"\n    absolute\n    opacity=\"0.6\"\n    :style=\"cssVars\"\n    id=\"splash-overlay\"\n  >\n    <focus-trap>\n    <div\n      id=\"splash-screen\"\n      v-click-outside=\"closeSplashScreen\"\n      :style=\"cssVars\"\n    >\n      <font-awesome-icon\n        id=\"close-splash-button\"\n        @click=\"closeSplashScreen\"\n        @keyup.enter=\"closeSplashScreen\"\n        icon=\"xmark\"\n        tabindex=\"0\"\n      />\n      <div id=\"splash-title\">\n        <p>The Sun's Seasonal Journey</p>\n      </div>\n      <div id=\"invitation\">\n        See how the Sun's path changes on the solstices and equinoxes from any location on Earth!\n      </div>\n\n      <div id=\"location-input-section\">\n        <p class=\"location-prompt\">Enter a location:</p>\n        <location-search\n          :class=\"['splash-location-search']\"\n          small\n          button-size=\"large\"\n          :accent-color=\"cssVars['--accent-color']\"\n          :search-provider=\"searchProvider\"\n          @set-location=\"handleLocationSet\"\n          @error=\"searchErrorMessage = $event\"\n          placeholder=\"Enter city, state, or address\"\n        >\n        </location-search>\n        <div v-if=\"searchErrorMessage\" class=\"error-message\">\n          {{ searchErrorMessage }}\n        </div>\n      </div>\n      <div class=\"medium\">\n        or\n      </div>\n      <div>\n        <v-btn\n          class=\"splash-get-started\"\n          @click=\"closeSplashScreen\"\n          @keyup.enter=\"closeSplashScreen\"\n          :color=\"cssVars['--accent-color']\"\n          :density=\"$vuetify.display.xs ? 'compact' : 'default'\"\n          :size=\"$vuetify.display.width < 500 || $vuetify.display.height < 550 ? 'medium' : 'x-large'\"\n          variant=\"elevated\"\n          rounded=\"lg\"\n        >\n          Use Cambridge, MA\n        </v-btn>\n      </div>\n    \n      <div id=\"splash-screen-acknowledgements\">\n        <span>\n        Brought to you by <a href=\"https://www.cosmicds.cfa.harvard.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Cosmic Data Stories</a> and <a href=\"https://www.worldwidetelescope.org/home/\" target=\"_blank\" rel=\"noopener noreferrer\">WorldWide Telescope</a>.\n        </span>\n        <div id=\"splash-screen-logos\">\n          <credit-logos\n            :default-logos=\"['cosmicds', 'wwt', 'sciact', 'nasa']\"\n          />\n        </div>\n      </div>\n    </div>\n    </focus-trap>\n  </v-overlay>\n</template>\n\n\n<script setup lang=\"ts\">\nimport {computed, defineProps, ref } from 'vue';\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\nexport interface Props {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  cssVars?: any;\n  title: string;\n  color?: string,\n  highlightColor?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  cssVars: () => ({}),\n});\n\nconst cssVars = computed(() => {\n  return {\n    ...props.cssVars,\n    ...{'--accent-color': props.color == null ? props.cssVars['--accent-color'] : props.color},\n  };\n});\n\nconst emits = defineEmits(['close', 'location-selected']);\n\nconst showSplashScreen = defineModel({ default: true });\nconst searchErrorMessage = ref<string | null>(null);\n\nconst geocodingOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  access_token: process.env.VUE_APP_MAPBOX_ACCESS_TOKEN ?? \"\", \n};\n\nfunction searchProvider(text: string): Promise<MapBoxFeatureCollection> {\n  return geocodingInfoForSearch(text, geocodingOptions);\n}\n\nfunction handleLocationSet(feature: MapBoxFeature) {\n  emits('location-selected', feature);\n  searchErrorMessage.value = null;\n}\n\nfunction closeSplashScreen() {\n  showSplashScreen.value = false;\n  emits('close');\n}\n\n\n</script>\n\n\n<style lang=\"less\">\n\n#splash-overlay {\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  transition: width 0.5s, height 0.5s;\n}\n\n#splash-screen {\n  color: #E0E0E0;\n  background-color: #000000;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  align-content: center;\n  justify-content: space-around;\n  height: fit-content;\n  max-height: 85vh;\n\n  backdrop-filter: blur(5px);\n\n  border-radius: 30px;\n  border: min(1.2vw, 0.9vh) solid var(--accent-color);\n  overflow: auto;\n  padding-block: 2rem;\n\n  @media (max-width: 699px) {\n    max-width: 90vw;\n  }\n\n  @media (max-height: 600px) {\n    max-width: 95vw;\n  }\n\n  div {\n    margin-inline: auto;\n    text-align: center;\n  }\n\n  // make a paragraph inside the div centered horizontally and vertically\n  p {\n    font-family: 'Highway Gothic Narrow', 'Roboto', sans-serif;\n    font-weight: bold;\n    vertical-align: middle;\n  }\n\n  .small {\n    font-size: var(--default-font-size);\n    font-weight: bold;\n  }\n\n  #close-splash-button {\n    position: absolute;\n    top: 1rem;\n    right: 1.75rem;\n    text-align: end;\n    color: var(--accent-color);\n    font-size: 2rem;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n\n  #splash-title {\n    display: flex;\n    flex-direction: column;\n    font-family: 'Highway Gothic Narrow', 'Roboto', sans-serif;\n    font-size: 3.5rem;\n    line-height: 1.1;\n    width: 90%;\n    text-align: center;\n    padding-block: 1rem;\n    margin: auto;\n\n    @media (max-width: 699px) {\n      font-size: 2.5rem;\n    }\n\n    @media (max-height: 600px) {\n      font-size: 2.5rem;\n      padding-block: 0.25rem;\n    }\n  }\n\n  #invitation {\n    font-family: Verdana, Arial, Helvetica, sans-serif;\n    font-size: 1.1rem;\n    font-weight: 500;\n    width: 80%;\n    padding-block: 0.5rem;\n\n    @media (max-width: 699px) {\n      display: none;\n    }\n\n    @media (max-height: 600px) {\n      display: none;\n    }\n  }\n\n  #location-input-section {\n    margin: 1rem auto;\n    width: 100%;\n    \n    .location-prompt {\n      font-size: 1.2rem;\n      margin-bottom: 1rem;\n    }\n    \n    .splash-location-search {\n      width: 75%;\n      max-width: 400px;\n      margin: 0 auto;\n\n      // Make the v-field width match the v-input width\n\n      .v-field {\n        padding: 0 !important;\n      }\n      \n      .v-field__field {\n        width: 100% !important;\n      }\n\n      .v-field__input {\n        padding: 0 !important;\n      }\n      \n      .v-input__control {\n        width: 100% !important;\n        pointer-events: auto !important;\n        cursor: text !important;\n      }\n\n      // Make sure the input element itself is full width\n      input {\n        width: 100% !important;\n        height: 100% !important;\n        pointer-events: auto !important;\n        cursor: text !important;\n        padding: 0;\n      }\n    }\n    \n    .error-message {\n      color: #ff6b6b;\n      font-size: 1rem;\n      margin-top: 1rem;\n    }\n  }\n\n  .medium {\n    font-family: Verdana, Arial, Helvetica, sans-serif;\n    font-size: 1.1rem;\n    font-weight: 500;\n  }\n  \n  // Make the div containing the Get Started button only as tall as the button\n  div:has(.splash-get-started) {\n    height: fit-content;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 1rem;\n  }\n\n  .splash-get-started {\n    border: 2px solid white;\n    font-size: 1.1rem;\n    font-weight: bold !important;\n    text-transform: none !important;\n\n    @media (max-width: 500px) {\n      font-size: 1rem;\n      padding: 0.5rem;\n    }\n\n    @media (max-height: 550px) {\n      font-size: 1rem;\n      padding: 0.5rem;\n    }\n  }\n\n  #splash-screen-acknowledgements {\n    // margin-top: 3rem;\n    margin-top: clamp(0.5rem, 3vh, 3rem);\n    font-size: 1rem;\n    width: 60%; \n    margin-bottom: 1rem;\n\n    // @media (max-width: 600px) {\n    //   display: none;\n    // }\n\n    @media (max-height: 500px) {\n      display: none;\n    }\n  }\n\n  #splash-screen-logos {\n    margin-top: 1.5em;\n\n    img {\n      height: 5vmin;\n      vertical-align: middle;\n      margin: 2px;\n    }\n\n    @media only screen and (max-width: 600px) {\n      img {\n        height: 24px;\n      }\n    }\n\n    svg {\n      vertical-align: middle;\n      height: 24px;\n    }\n    @media (max-height: 600px) {\n      display: none;\n    }\n  }\n}\n\n</style>\n","import script from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SplashScreen.vue?vue&type=style&index=0&id=79fc8ae4&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, withKeys as _withKeys, withModifiers as _withModifiers, normalizeClass as _normalizeClass, withCtx as _withCtx, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { computed, ref, watch } from \"vue\";\nimport { MapBoxFeature, MapBoxFeatureCollection, textForMapboxFeature } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\ntype SearchProvider = (searchText: string) => Promise<MapBoxFeatureCollection | null>;\n\nexport interface LocationSearchProps {\n  searchProvider?: SearchProvider;\n  modelValue?: boolean;\n  stayOpen?: boolean;\n  accentColor?: string;\n  small?: boolean;\n  theme?: string;\n  buttonSize?: string;\n  bgColor?: string;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'LocationSearch',\n  props: {\n    searchProvider: { type: Function, default: (_searchText: string) => null },\n    modelValue: { type: Boolean, default: true },\n    stayOpen: { type: Boolean, default: false },\n    accentColor: { default: \"white\" },\n    small: { type: Boolean, default: false },\n    theme: { default: \"dark\" },\n    buttonSize: { default: \"1x\" },\n    bgColor: { default: \"black\" }\n  },\n  emits: [\"error\", \"set-location\", \"update:modelValue\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst searchOpen = ref(props.modelValue || props.stayOpen);\nconst searchItem = ref<string | null>(null);\nconst searchResults = ref<MapBoxFeatureCollection | null>(null);\nconst searchErrorMessage = ref<string | null>(null);\nconst locationJustUpdated = ref(false);\nconst menuOpen = ref(false);\nconst comboFocused = ref(false);\nconst searchInput = ref<HTMLInputElement | null>(null);\n\nconst cssStyles = computed(() => {\n  return {\n    \"--accent-color\": props.accentColor,\n    \"--bg-color\": props.bgColor,\n    \"--fg-container-padding\": searchOpen.value ? (props.small ? \"0px 5px 0px 0px\" : \"5px 10px 12px 10px\") : \"0px\",\n    \"--border-radius\": searchOpen.value ? \"7px\" : \"20px\",\n  };\n});\n\nfunction itemText(item: string | MapBoxFeature): string {\n  if (typeof item === \"string\") {\n    return item;\n  }\n  return textForMapboxFeature(item);\n}\n\nfunction performForwardGeocodingSearch() {\n  const search = searchItem.value;\n  if (search === null || search.length < 3) {\n    return;\n  }\n\n  props.searchProvider(search).then(info => {\n    if (info !== null && info.features.length === 1) {\n      setLocationFromSearchFeature(info.features[0]);\n    } else if (info !== null && info.features.length === 0) {\n      searchErrorMessage.value = \"No matching places were found\";\n      emit(\"error\", searchErrorMessage.value); \n    } else {\n      searchResults.value = info;\n    }\n  });\n}\n\nfunction focusCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.focus();\n}\n\nfunction blurCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.blur();\n}\n\nfunction toggleSearch() {\n  if (searchOpen.value) {\n    performForwardGeocodingSearch();\n    menuOpen.value = true;\n    focusCombobox();\n  } else {\n    searchOpen.value = true;\n  }\n}\n\n// function closeSearch() {\n//   searchOpen.value = false;\n//   clearSearchData();\n// }\n\nfunction onFocusChange(focused: boolean) {\n  comboFocused.value = focused;\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  blurCombobox();\n  timedJustUpdatedLocation();\n  clearSearchData();\n  emit(\"set-location\", feature);\n}\n\nfunction clearSearchData() {\n  searchResults.value = null;\n  searchItem.value = null;\n  searchErrorMessage.value = null;\n}\n\nfunction timedJustUpdatedLocation() {\n  locationJustUpdated.value = true;\n  setTimeout(() => {\n    locationJustUpdated.value = false;\n  }, 5000);\n}\n\nwatch(() => props.modelValue, (value: boolean) => { searchOpen.value = value; });\n\nwatch(searchOpen, (value: boolean) => emit(\"update:modelValue\", value));\n\nwatch(searchItem, function(item: string | MapBoxFeature | null) {\n  if (searchErrorMessage.value) {\n    searchErrorMessage.value = null;\n  }\n  if (!item || (typeof item === \"string\" && item.length === 0)) {\n    searchResults.value = null;\n  }\n  if (item && typeof item !== \"string\") {\n    setLocationFromSearchFeature(item);\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_combobox = _resolveComponent(\"v-combobox\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"forward-geocoding-container\",\n    style: _normalizeStyle(cssStyles.value)\n  }, [\n    _withDirectives(_createVNode(_component_v_combobox, {\n      class: _normalizeClass(['forward-geocoding-input', locationJustUpdated.value ? 'geocode-success' : '', __props.small ? 'forward-geocoding-input-small' : '']),\n      modelValue: searchItem.value,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((searchItem).value = $event)),\n      items: searchResults.value ? searchResults.value.features : [],\n      \"item-title\": itemText,\n      \"bg-color\": __props.bgColor,\n      label: \"Enter city or zip\",\n      density: __props.small ? 'compact' : 'default',\n      \"hide-details\": \"\",\n      solo: \"\",\n      color: __props.accentColor,\n      onInput: () => {},\n      onKeydown: [\n        _withKeys(performForwardGeocodingSearch, [\"enter\"]),\n        _cache[1] || (_cache[1] = _withKeys(($event: any) => (searchResults.value = null), [\"esc\"])),\n        _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"stop\"]))\n      ],\n      \"error-messages\": searchErrorMessage.value,\n      \"onClick:append\": focusCombobox,\n      \"onUpdate:focused\": _cache[3] || (_cache[3] = ($event: any) => (onFocusChange($event))),\n      ref_key: \"searchInput\",\n      ref: searchInput,\n      menu: menuOpen.value,\n      \"onUpdate:menu\": _cache[4] || (_cache[4] = ($event: any) => (menuOpen.value = $event))\n    }, {\n      append: _withCtx(() => [\n        _createVNode(_component_font_awesome_icon, {\n          class: \"geocoding-search-icon\",\n          icon: \"magnifying-glass\",\n          size: searchOpen.value ? 'xl' : __props.buttonSize,\n          color: \"gray\",\n          onClick: toggleSearch\n        }, null, 8, [\"size\"])\n      ]),\n      _: 1\n    }, 8, [\"class\", \"modelValue\", \"items\", \"bg-color\", \"density\", \"color\", \"error-messages\", \"menu\"]), [\n      [_vShow, searchOpen.value]\n    ]),\n    _withDirectives(_createVNode(_component_font_awesome_icon, {\n      class: \"geocoding-search-icon\",\n      icon: \"magnifying-glass\",\n      size: searchOpen.value ? 'xl' : __props.buttonSize,\n      color: \"gray\",\n      onClick: _withModifiers(toggleSearch, [\"prevent\"])\n    }, null, 8, [\"size\"]), [\n      [_vShow, !searchOpen.value && !__props.stayOpen]\n    ])\n  ], 4))\n}\n}\n\n})","<template>\n  <div\n    class=\"forward-geocoding-container\"\n    :style=\"cssStyles\"\n  >\n    <v-combobox\n      v-show=\"searchOpen\"\n      :class=\"['forward-geocoding-input', locationJustUpdated ? 'geocode-success' : '', small ? 'forward-geocoding-input-small' : '']\"\n      v-model=\"searchItem\"\n      :items=\"searchResults ? searchResults.features : []\"\n      :item-title=\"itemText\"\n      :bg-color=\"bgColor\"\n      label=\"Enter city or zip\"\n      :density=\"small ? 'compact' : 'default'\"\n      hide-details\n      solo\n      :color=\"accentColor\"\n      @input=\"() => {}\"\n      @keydown.enter=\"performForwardGeocodingSearch\"\n      @keydown.esc=\"searchResults = null\"\n      @keydown.stop\n      :error-messages=\"searchErrorMessage\"\n      @click:append=\"focusCombobox\"\n      @update:focused=\"onFocusChange($event)\"\n      ref=\"searchInput\"\n      :menu=\"menuOpen\"\n      @update:menu=\"menuOpen = $event\"\n    >\n    <template v-slot:append>\n      <font-awesome-icon\n        class=\"geocoding-search-icon\"\n        icon=\"magnifying-glass\"\n        :size=\"searchOpen ? 'xl' : buttonSize\"\n        color=\"gray\"\n        @click=\"toggleSearch\"\n      ></font-awesome-icon>\n    </template>\n  </v-combobox>\n  <font-awesome-icon\n      v-show=\"!searchOpen && !stayOpen\"\n      class=\"geocoding-search-icon\"\n      icon=\"magnifying-glass\"\n      :size=\"searchOpen ? 'xl' : buttonSize\"\n      color=\"gray\"\n      @click.prevent=\"toggleSearch\"\n    ></font-awesome-icon>\n  </div>\n</template> \n\n<script setup lang=\"ts\">\nimport { computed, ref, watch } from \"vue\";\nimport { MapBoxFeature, MapBoxFeatureCollection, textForMapboxFeature } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\ntype SearchProvider = (searchText: string) => Promise<MapBoxFeatureCollection | null>;\n\nexport interface LocationSearchProps {\n  searchProvider?: SearchProvider;\n  modelValue?: boolean;\n  stayOpen?: boolean;\n  accentColor?: string;\n  small?: boolean;\n  theme?: string;\n  buttonSize?: string;\n  bgColor?: string;\n}\n\nconst props = withDefaults(defineProps<LocationSearchProps>(), {\n  searchProvider: (_searchText: string) => null,\n  modelValue: true,\n  stayOpen: false,\n  accentColor: \"white\",\n  small: false,\n  theme: \"dark\",\n  buttonSize: \"1x\",\n  bgColor: \"black\",\n});\n\nconst emit = defineEmits<{\n  (e: \"error\", message: string): void\n  (e: \"set-location\", feature: MapBoxFeature): void\n  (e: \"update:modelValue\", value: boolean): void\n}>();\n\nconst searchOpen = ref(props.modelValue || props.stayOpen);\nconst searchItem = ref<string | null>(null);\nconst searchResults = ref<MapBoxFeatureCollection | null>(null);\nconst searchErrorMessage = ref<string | null>(null);\nconst locationJustUpdated = ref(false);\nconst menuOpen = ref(false);\nconst comboFocused = ref(false);\nconst searchInput = ref<HTMLInputElement | null>(null);\n\nconst cssStyles = computed(() => {\n  return {\n    \"--accent-color\": props.accentColor,\n    \"--bg-color\": props.bgColor,\n    \"--fg-container-padding\": searchOpen.value ? (props.small ? \"0px 5px 0px 0px\" : \"5px 10px 12px 10px\") : \"0px\",\n    \"--border-radius\": searchOpen.value ? \"7px\" : \"20px\",\n  };\n});\n\nfunction itemText(item: string | MapBoxFeature): string {\n  if (typeof item === \"string\") {\n    return item;\n  }\n  return textForMapboxFeature(item);\n}\n\nfunction performForwardGeocodingSearch() {\n  const search = searchItem.value;\n  if (search === null || search.length < 3) {\n    return;\n  }\n\n  props.searchProvider(search).then(info => {\n    if (info !== null && info.features.length === 1) {\n      setLocationFromSearchFeature(info.features[0]);\n    } else if (info !== null && info.features.length === 0) {\n      searchErrorMessage.value = \"No matching places were found\";\n      emit(\"error\", searchErrorMessage.value); \n    } else {\n      searchResults.value = info;\n    }\n  });\n}\n\nfunction focusCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.focus();\n}\n\nfunction blurCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.blur();\n}\n\nfunction toggleSearch() {\n  if (searchOpen.value) {\n    performForwardGeocodingSearch();\n    menuOpen.value = true;\n    focusCombobox();\n  } else {\n    searchOpen.value = true;\n  }\n}\n\n// function closeSearch() {\n//   searchOpen.value = false;\n//   clearSearchData();\n// }\n\nfunction onFocusChange(focused: boolean) {\n  comboFocused.value = focused;\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  blurCombobox();\n  timedJustUpdatedLocation();\n  clearSearchData();\n  emit(\"set-location\", feature);\n}\n\nfunction clearSearchData() {\n  searchResults.value = null;\n  searchItem.value = null;\n  searchErrorMessage.value = null;\n}\n\nfunction timedJustUpdatedLocation() {\n  locationJustUpdated.value = true;\n  setTimeout(() => {\n    locationJustUpdated.value = false;\n  }, 5000);\n}\n\nwatch(() => props.modelValue, (value: boolean) => { searchOpen.value = value; });\n\nwatch(searchOpen, (value: boolean) => emit(\"update:modelValue\", value));\n\nwatch(searchItem, function(item: string | MapBoxFeature | null) {\n  if (searchErrorMessage.value) {\n    searchErrorMessage.value = null;\n  }\n  if (!item || (typeof item === \"string\" && item.length === 0)) {\n    searchResults.value = null;\n  }\n  if (item && typeof item !== \"string\") {\n    setLocationFromSearchFeature(item);\n  }\n});\n</script>\n\n<style lang=\"less\">\n\n// https://vue-loader.vuejs.org/guide/scoped-css.html#deep-selectors\n.forward-geocoding-container {\n  --border-radius: 20px;\n  position: relative;\n  color: var(--accent-color);\n  border: 2px solid var(--accent-color);\n  border-radius: var(--border-radius);\n  background-color: var(--bg-color);\n  margin-left: 0.25rem;\n  margin-bottom: 0.25rem;\n  padding: var(--fg-container-padding);\n\n  // there are two separate labels, we want the 2nd one to be large. the first is the small floating label\n  .v-field > .v-field__field > .v-label.v-field-label:nth-child(2) {\n    font-size: 1.2rem;\n  }\n\n  // .v-input--horizontal .v-input__append {\n  //   margin-inline-start: 0;\n  // }\n  \n  .v-text-field {\n    min-width: 150px;\n  }\n  \n  .v-field--variant-filled.v-field--has-background .v-field__overlay {\n    border-top-right-radius: 0px;\n}\n\n  .forward-geocoding-input > .v-input__control > .v-field {\n    border-radius: var(--border-radius);\n  }\n  \n  .forward-geocoding-input.geocode-success label {\n    opacity: 1;\n  }\n  \n  .forward-geocoding-input-small label {\n    // .v-label sets default to 1rem\n    font-size: 0.8rem;\n  }\n\n  .forward-geocoding-input-row {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    gap: 10px;\n    align-items: center;\n  }\n  \n  .geocoding-search-icon {\n    padding-inline: calc(0.3 * var(--default-line-height));\n    padding-block: calc(0.4 * var(--default-line-height));\n  }\n\n  .geocoding-search-icon:hover, #geocoding-close-icon:hover {\n    cursor: pointer;\n  }\n\n}\n</style>\n","import script from \"./LocationSearch.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LocationSearch.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./LocationSearch.vue?vue&type=style&index=0&id=049c9a1e&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"td__container\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"td__date\"\n}\nconst _hoisted_3 = { class: \"td__date_date\" }\nconst _hoisted_4 = {\n  key: 1,\n  class: \"td__time\"\n}\nconst _hoisted_5 = { class: \"td__time_time\" }\nconst _hoisted_6 = {\n  key: 2,\n  class: \"td__timezone\"\n}\nconst _hoisted_7 = { class: \"td__timezone_tz\" }\nconst _hoisted_8 = {\n  key: 3,\n  class: \"td__time\"\n}\nconst _hoisted_9 = { class: \"td__time_time td__short_time\" }\n\nimport { computed } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimeDisplay',\n  props: {\n  date: { type: Date, required: true },\n  ampm: { type: Boolean, default: false },\n  showDate: { type: Boolean, default: true, required: false },\n  showTimezone: { type: Boolean, default: true, required: false },\n  shortTimeDate: { type: Boolean, default: false, required: false },\n  timezone: { \n    type: String, \n    default: Intl.DateTimeFormat().resolvedOptions().timeZone, \n    required: false \n  }\n},\n  setup(__props) {\n\nconst props = __props;\n\nfunction pad(number: number, length: number = 2): string {\n  return String(number).padStart(length, '0');\n}\n\n\nconst hours = computed(() => {\n  if (props.ampm) {\n    const hour = props.date.getHours() % 12;\n    return hour === 0 ? 12 : hour;\n  } else {\n    return props.date.getHours();\n  }\n});\n\n\nconst ampm = computed(() => {\n  return props.date.getHours() >= 12 ? 'PM' : 'AM';\n});\n\nconst shortTimeDateString = computed(() => {\n  // return date formatted as Oct 3 9:00 AM\n  const year = props.date.getFullYear();\n  const month = props.date.toLocaleString('default', { month: 'short' });\n  const day = props.date.getDate();\n  const h = props.date.getHours() % 12;\n  const hour = h === 0 ? 12 : h;\n  const minute = pad(props.date.getMinutes());\n  const ampm = props.date.getHours() >= 12 ? 'PM' : 'AM';\n  const tz =  props.timezone;\n  return `${month} ${day} ${year} ${hour}:${minute} ${ampm}` + (props.showTimezone ? ` ${tz}` : '');\n});\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (props.showDate && !props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"span\", _hoisted_3, _toDisplayString(props.date.toLocaleString('default', { month: 'long' })) + \" \" + _toDisplayString(pad(props.date.getDate())) + \", \" + _toDisplayString(props.date.getFullYear()), 1)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (!props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(pad(hours.value)) + \":\" + _toDisplayString(pad(props.date.getMinutes())) + \":\" + _toDisplayString(pad(props.date.getSeconds())) + \" \" + _toDisplayString(props.ampm ? ampm.value : ''), 1)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (props.showTimezone && !props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n          _createElementVNode(\"span\", _hoisted_7, _toDisplayString(props.timezone), 1)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n          _createElementVNode(\"span\", _hoisted_9, _toDisplayString(shortTimeDateString.value), 1)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"td__container\">\n      <div class=\"td__date\" v-if=\"props.showDate && !props.shortTimeDate\">\n        <span class=\"td__date_date\">\n          {{ props.date.toLocaleString('default', { month: 'long' }) }} {{ pad(props.date.getDate()) }}, {{ props.date.getFullYear() }}\n        </span>\n      </div>\n      <div class=\"td__time\" v-if=\"!props.shortTimeDate\">\n        <span class=\"td__time_time\">{{ pad(hours) }}:{{ pad(props.date.getMinutes()) }}:{{ pad(props.date.getSeconds()) }} {{ props.ampm ? ampm : '' }}</span>\n      </div>\n      <div class=\"td__timezone\" v-if=\"props.showTimezone && !props.shortTimeDate\">\n        <span class=\"td__timezone_tz\">{{ props.timezone }}</span>\n      </div>\n      <div class=\"td__time\" v-if=\"props.shortTimeDate\"> \n        <span class=\"td__time_time td__short_time\">{{ shortTimeDateString }}</span>\n      </div>\n      \n   </div>  \n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { computed, defineProps } from 'vue';\n\nconst props = defineProps({\n  date: { type: Date, required: true },\n  ampm: { type: Boolean, default: false },\n  showDate: { type: Boolean, default: true, required: false },\n  showTimezone: { type: Boolean, default: true, required: false },\n  shortTimeDate: { type: Boolean, default: false, required: false },\n  timezone: { \n    type: String, \n    default: Intl.DateTimeFormat().resolvedOptions().timeZone, \n    required: false \n  }\n}\n);\n\nfunction pad(number: number, length: number = 2): string {\n  return String(number).padStart(length, '0');\n}\n\n\nconst hours = computed(() => {\n  if (props.ampm) {\n    const hour = props.date.getHours() % 12;\n    return hour === 0 ? 12 : hour;\n  } else {\n    return props.date.getHours();\n  }\n});\n\n\nconst ampm = computed(() => {\n  return props.date.getHours() >= 12 ? 'PM' : 'AM';\n});\n\nconst shortTimeDateString = computed(() => {\n  // return date formatted as Oct 3 9:00 AM\n  const year = props.date.getFullYear();\n  const month = props.date.toLocaleString('default', { month: 'short' });\n  const day = props.date.getDate();\n  const h = props.date.getHours() % 12;\n  const hour = h === 0 ? 12 : h;\n  const minute = pad(props.date.getMinutes());\n  const ampm = props.date.getHours() >= 12 ? 'PM' : 'AM';\n  const tz =  props.timezone;\n  return `${month} ${day} ${year} ${hour}:${minute} ${ampm}` + (props.showTimezone ? ` ${tz}` : '');\n});\n\n\n</script>\n\n<style>\n\n.td__container {\n  margin: 1em;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: currentColor;\n}\n\n.td__container > div > span {\n  -webkit-user-select: none; /* Safari */\n  -ms-user-select: none; /* IE 10 and IE 11 */\n  user-select: none; /* Standard syntax */\n}\n\n.td__time {\n  width: max-content;\n}\n\n.td__time_time {\n  font-size: 1em;\n  color: inherit;\n  text-align: center;\n  text-wrap: nowrap;\n  width: fit-content;\n}\n\n.td__date {\n  width: max-content;\n}\n\n.td__date_date {\n  font-size: 0.75em;\n  color: inherit;\n  text-align: center;\n  text-wrap: nowrap;\n  width: fit-content;\n}\n\n.td__timezone {\n  width: max-content;\n}\n\n.td__timezone_tz {\n  font-size: 0.75em;\n  color: inherit;\n  text-align: center;\n  text-wrap: nowrap;\n  width: fit-content;\n}\n\n</style>","import script from \"./TimeDisplay.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeDisplay.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeDisplay.vue?vue&type=style&index=0&id=63a76c3e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div\n    class=\"daylight-pie-chart\"\n    :style=\"cssVars\"\n  >\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\nimport { dayFractionForTimestamp } from \"../utils\";\n\ninterface Props {\n  dayColor?: string;\n  nightColor?: string;\n  rise: number;\n  set: number;\n  size?: string;\n  always?: \"up\" | \"down\" | null;\n  timezoneOffset?: number;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  dayColor: \"#ffdf22\",\n  nightColor: \"#191970\",\n  size: \"100px\",\n  timezoneOffset: 0,\n  always: null,\n});\n\nconst riseAngle = computed(() => dayFractionForTimestamp(props.rise + props.timezoneOffset));\nconst daylightFraction = computed(() => dayFractionForTimestamp(props.set - props.rise));\n\nconst halfTransitionTurnSize = 0.02;\n\nconst cssVars = computed(() => {\n  const dawnStart = `${(riseAngle.value - halfTransitionTurnSize).toFixed(2)}turn`;\n  const dawnEnd = `${(riseAngle.value + halfTransitionTurnSize).toFixed(2)}turn`;\n  const duskStart = `${(riseAngle.value + daylightFraction.value - halfTransitionTurnSize).toFixed(2)}turn`;\n  const duskEnd = `${(riseAngle.value + daylightFraction.value + halfTransitionTurnSize).toFixed(2)}turn`;\n  return {\n    \"--day-color\": props.dayColor,\n    \"--night-color\": props.nightColor,\n    \"--size\": props.size,\n\n    \"--background\":\n        props.always == \"up\" ? props.dayColor :\n          (props.always == \"down\" ? props.nightColor :\n            `conic-gradient(\n               var(--night-color) ${dawnStart},\n               var(--day-color) ${dawnEnd} ${duskStart},\n               var(--night-color) ${duskEnd}\n             )\n             `),\n  };\n});\n</script>\n\n<style scoped lang=\"less\">\n.daylight-pie-chart {\n  border-radius: 50%;\n  width: var(--size);\n  height: var(--size);\n  background: var(--background);\n}\n</style>\n","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { computed } from \"vue\";\n\nimport { dayFractionForTimestamp } from \"../utils\";\n\ninterface Props {\n  dayColor?: string;\n  nightColor?: string;\n  rise: number;\n  set: number;\n  size?: string;\n  always?: \"up\" | \"down\" | null;\n  timezoneOffset?: number;\n}\n\nconst halfTransitionTurnSize = 0.02;\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DaylightPieChart',\n  props: {\n    dayColor: { default: \"#ffdf22\" },\n    nightColor: { default: \"#191970\" },\n    rise: {},\n    set: {},\n    size: { default: \"100px\" },\n    always: { default: null },\n    timezoneOffset: { default: 0 }\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\nconst riseAngle = computed(() => dayFractionForTimestamp(props.rise + props.timezoneOffset));\nconst daylightFraction = computed(() => dayFractionForTimestamp(props.set - props.rise));\n\nconst cssVars = computed(() => {\n  const dawnStart = `${(riseAngle.value - halfTransitionTurnSize).toFixed(2)}turn`;\n  const dawnEnd = `${(riseAngle.value + halfTransitionTurnSize).toFixed(2)}turn`;\n  const duskStart = `${(riseAngle.value + daylightFraction.value - halfTransitionTurnSize).toFixed(2)}turn`;\n  const duskEnd = `${(riseAngle.value + daylightFraction.value + halfTransitionTurnSize).toFixed(2)}turn`;\n  return {\n    \"--day-color\": props.dayColor,\n    \"--night-color\": props.nightColor,\n    \"--size\": props.size,\n\n    \"--background\":\n        props.always == \"up\" ? props.dayColor :\n          (props.always == \"down\" ? props.nightColor :\n            `conic-gradient(\n               var(--night-color) ${dawnStart},\n               var(--day-color) ${dawnEnd} ${duskStart},\n               var(--night-color) ${duskEnd}\n             )\n             `),\n  };\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"daylight-pie-chart\",\n    style: _normalizeStyle(cssVars.value)\n  }, null, 4))\n}\n}\n\n})","import script from \"./DaylightPieChart.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DaylightPieChart.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DaylightPieChart.vue?vue&type=style&index=0&id=7767cc8e&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7767cc8e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, withCtx as _withCtx, createTextVNode as _createTextVNode, renderSlot as _renderSlot, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"question-title\" }\nconst _hoisted_2 = { class: \"button-row\" }\n\nimport { computed, ref, useSlots } from \"vue\";\n\ninterface QuestionProps {\n  question?: string;\n  color?: string;\n  baseColor?: string;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'QuestionDialog',\n  props: {\n    question: { default: \"Share an aha moment about seasons that you experienced from using this app.\" },\n    color: { default: \"surface\" },\n    baseColor: {}\n  },\n  emits: [\"dismiss\", \"opt-out\", \"finish\"],\n  setup(__props: any, { emit: __emit }) {\n\n/* eslint-disable @typescript-eslint/naming-convention */\n\n\nconst emit = __emit;\n\nconst slots = useSlots();\nconst showFooter = computed(() => !!slots.footer);\n\nconst css = computed(() => ({\n  \"--footer-visible\": showFooter.value ? \"visible\" : \"none\",\n}));\n\nconst response = ref<string | null>(null);\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_VTextarea = _resolveComponent(\"VTextarea\")!\n  const _component_v_expand_transition = _resolveComponent(\"v-expand-transition\")!\n  const _component_v_form = _resolveComponent(\"v-form\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, {\n    class: \"question-root\",\n    color: __props.color,\n    style: _normalizeStyle(css.value)\n  }, {\n    actions: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"footer\")\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_component_v_btn, {\n        density: \"compact\",\n        class: \"close-button\",\n        icon: \"mdi-close\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (emit('dismiss', response.value)))\n      }),\n      _createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_1, _toDisplayString(__props.question), 1),\n          _createVNode(_component_v_form, {\n            onSubmit: _cache[4] || (_cache[4] = _withModifiers(() => { emit('finish', response.value); response.value = null; }, [\"prevent\"]))\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_expand_transition, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_VTextarea, {\n                    modelValue: response.value,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((response).value = $event)),\n                    class: \"response-box text-body-2\",\n                    \"max-rows\": \"4\",\n                    density: \"compact\",\n                    width: \"100%\",\n                    onKeydown: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"stop\"]))\n                  }, null, 8, [\"modelValue\"])\n                ]),\n                _: 1\n              }),\n              _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"mb-4\" }, [\n                _createElementVNode(\"span\", { class: \"info-text\" }, \" Your anonymous response will be used by the CosmicDS team to improve the educational experience. \")\n              ], -1)),\n              _createVNode(_component_v_expand_transition, null, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_2, [\n                    _createVNode(_component_v_btn, {\n                      color: \"#BDBDBD\",\n                      size: \"small\",\n                      variant: \"text\",\n                      onClick: _cache[3] || (_cache[3] = ($event: any) => (emit('opt-out')))\n                    }, {\n                      default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                        _createTextVNode(\" Don't show this again \", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_btn, {\n                      type: \"submit\",\n                      width: \"fit-content\",\n                      color: \"success\"\n                    }, {\n                      default: _withCtx(() => [...(_cache[6] || (_cache[6] = [\n                        _createTextVNode(\" Submit \", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ])\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 3\n  }, 8, [\"color\", \"style\"]))\n}\n}\n\n})","<template>\n  <v-card\n    class=\"question-root\"\n    :color=\"color\"\n    :style=\"css\"\n  >\n    <v-btn\n      density=\"compact\"\n      class=\"close-button\"\n      icon=\"mdi-close\"\n      @click=\"emit('dismiss', response)\"\n    ></v-btn>\n    <v-card-text>\n      <div class=\"question-title\">\n        {{ question }} \n      </div>\n      <v-form\n        @submit.prevent=\"() => { emit('finish', response); response = null; }\"\n      >\n        <v-expand-transition>\n          <VTextarea\n            v-model=\"response\"\n            class=\"response-box text-body-2\"\n            max-rows=\"4\"\n            density=\"compact\"\n            width=\"100%\"\n            @keydown.stop\n          >\n          </VTextarea>\n        </v-expand-transition>\n        <div class=\"mb-4\">\n          <span class=\"info-text\">\n            Your anonymous response will be used by the CosmicDS team to improve the educational experience.\n          </span>\n        </div>\n        <v-expand-transition>\n          <div class=\"button-row\">\n            <v-btn\n              color=\"#BDBDBD\"\n              size=\"small\"\n              variant=\"text\"\n              @click=\"emit('opt-out')\"\n            >\n              Don't show this again\n            </v-btn>\n            <v-btn\n              type=\"submit\"\n              width=\"fit-content\"\n              color=\"success\"\n            >\n              Submit \n            </v-btn>\n          </div>\n        </v-expand-transition>\n      </v-form>\n    </v-card-text>\n    <template #actions>\n      <slot name=\"footer\"></slot>\n    </template>\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { computed, ref, useSlots } from \"vue\";\n\ninterface QuestionProps {\n  question?: string;\n  color?: string;\n  baseColor?: string;\n}\n\nwithDefaults(defineProps<QuestionProps>(), {\n  question: \"Share an aha moment about seasons that you experienced from using this app.\",\n  color: \"surface\",\n});\n\nconst emit = defineEmits<{\n  (event: \"dismiss\", response: string | null): void;\n  (event: \"opt-out\"): void;\n  (event: \"finish\", response: string | null): void;\n}>();\n\nconst slots = useSlots();\nconst showFooter = computed(() => !!slots.footer);\n\nconst css = computed(() => ({\n  \"--footer-visible\": showFooter.value ? \"visible\" : \"none\",\n}));\n\nconst response = ref<string | null>(null);\n</script>\n\n<style lang=\"less\">\n.question-root {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  align-items: center;\n  padding: 5px;\n  max-width: 45%;\n}\n\n.rating {\n  transition: color 0.1s;\n}\n\n.selected {\n  border-radius: 50%;\n  box-shadow: 0 0 0 5px silver;\n}\n\n.v-card-text {\n  padding: 2rem;\n}\n\n.v-card-actions {\n  display: var(--footer-visible);\n}\n\n.question-title {\n  width: 100%;\n  text-align: left;\n  padding: 5px;\n  white-space: normal;\n  word-break: auto-phrase;\n}\n\n.question-text {\n  max-width: calc(100% - 30px);\n}\n\n.button-row {\n  display: flex;\n  flex-direction: row;\n  justify-content: right;\n  align-items: center;\n  gap: 1.5rem;\n}\n\n.info-text {\n  font-size: 0.75rem;\n  color: lightgray;\n}\n\n.close-button {\n  position: absolute !important;\n  top: 0.5rem;\n  right: 0.5rem;\n}\n</style>\n","import script from \"./QuestionDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./QuestionDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./QuestionDialog.vue?vue&type=style&index=0&id=f232dd50&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { aliases, mdi } from 'vuetify/iconsets/mdi';\nimport { createVuetify } from 'vuetify';\n\n// For test use. Do not include createVuetify()\n// see https://next.vuetifyjs.com/en/features/treeshaking/\n//import * as components from 'vuetify/components';\n//import * as directives from 'vuetify/directives';\n\n// Translations provided by Vuetify\nimport { en } from 'vuetify/locale';\n\n// Styles\nimport 'vuetify/styles';\nimport '@mdi/font/css/materialdesignicons.css';\n\nexport default createVuetify({\n  // Icon Fonts\n  icons: {\n    defaultSet: 'mdi',\n    aliases,\n    sets: {\n      mdi,\n    },\n  },\n  locale: {\n    locale: 'en',\n    fallback: 'en',\n    messages: { en },\n  },\n  theme: {\n    defaultTheme: 'dark',\n  },\n});\n\n// Export for test.\n//export { components, directives };\n","import Vue, { createApp, type Plugin } from \"vue\";\n\nimport {\n  FundingAcknowledgement,\n  IconButton,\n  LocationSelector,\n  GeolocationButton,\n  CreditLogos,\n  SpeedControl,\n  DateTimePicker,\n  // LocationSearch,\n} from \"@cosmicds/vue-toolkit\";\nimport SeasonsStory from \"./SeasonsStory.vue\";\n\nimport SplashScreen from \"./components/SplashScreen.vue\";\nimport LocationSearch from \"./components/LocationSearch.vue\";\nimport TimeDisplay from \"./components/TimeDisplay.vue\";\nimport DaylightPieChart from \"./components/DaylightPieChart.vue\";\nimport QuestionDialog from \"./components/QuestionDialog.vue\";\n\nimport vuetify from \"../plugins/vuetify\";\nimport { VIcon } from \"vuetify/components/VIcon\";\n\nimport { FontAwesomeIcon, FontAwesomeLayers } from \"@fortawesome/vue-fontawesome\";\n\nimport { WWTComponent, wwtPinia } from \"@wwtelescope/engine-pinia\";\n\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faBookOpen,\n  faLocationDot,\n  faSun,\n  faTimes,\n  faVideo,\n  faXmark,\n  faInfo,\n  faMagnifyingGlass,\n  faPlay,\n  faPause,\n  faCalendarDay,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nlibrary.add(faBookOpen);\nlibrary.add(faLocationDot);\nlibrary.add(faSun);\nlibrary.add(faTimes);\nlibrary.add(faVideo);\nlibrary.add(faXmark);\nlibrary.add(faInfo);\nlibrary.add(faMagnifyingGlass);\nlibrary.add(faPlay);\nlibrary.add(faPause);\nlibrary.add(faCalendarDay);\n\n/** v-hide directive taken from https://www.ryansouthgate.com/2020/01/30/vue-js-v-hide-element-whilst-keeping-occupied-space/ */\n// Extract the function out, up here, so I'm not writing it twice\nconst update = (el: HTMLElement, binding: Vue.DirectiveBinding) => el.style.visibility = (binding.value) ? \"hidden\" : \"\";\n\ncreateApp(SeasonsStory, {\n  wwtNamespace: \"seasons-story\"\n})\n \n  // Plugins\n  .use(wwtPinia as unknown as Plugin<[]>)\n  .use(vuetify)\n\n  // Directives\n  .directive(\n    /**\n    * Hides an HTML element, keeping the space it would have used if it were visible (css: Visibility)\n    */\n    \"hide\", {\n      // Run on initialisation (first render) of the directive on the element\n      beforeMount(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      },\n      // Run on subsequent updates to the value supplied to the directive\n      updated(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      }\n    })\n\n  // Components\n  .component(\"WorldWideTelescope\", WWTComponent)\n  .component(\"splash-screen\", SplashScreen)\n  .component('font-awesome-icon', FontAwesomeIcon)\n  .component('font-awesome-layers', FontAwesomeLayers)\n  .component('icon-button', IconButton)\n  .component('funding-acknowledgement', FundingAcknowledgement)\n  .component('credit-logos', CreditLogos)\n  .component('speed-control', SpeedControl)\n  .component('geolocation-button', GeolocationButton)\n  .component('location-search', LocationSearch)\n  .component('location-selector', LocationSelector)\n  .component('date-time-picker', DateTimePicker)\n  .component('time-display', TimeDisplay)\n  .component('question-dialog', QuestionDialog)\n  .component('v-icon', VIcon)\n  .component('daylight-pie-chart', DaylightPieChart)\n\n  // Mount\n  .mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_cosmicds_seasons_story\"] = self[\"webpackChunk_cosmicds_seasons_story\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(8261)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["useTimezone","selectedLocation","selectedTimezone","value","latitudeDeg","longitudeDeg","selectedTimezoneOffset","shortTimezone","Date","browserTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","browserTimezoneOffset","getTimezoneOffset","console","log","altAzToHADec","altRad","azRad","latRad","Math","PI","ra","atan2","sin","cos","tan","dec","asin","getJulian","utc","year","getUTCFullYear","month","getUTCMonth","day","getUTCDate","hour","getUTCHours","minute","getUTCMinutes","second","getUTCSeconds","getUTCMilliseconds","a","floor","b","c","d","jd","mstFromUTC2","longRad","lng","R2D","modifiedJD","julianCenturies","mst","horizontalToEquatorial","st","haDec","ha","raRad","D2R","decRad","equatorialToHorizontal","hourAngle","lat","sinAlt","altitude","cosAz","azimuth","acos","skyOpacityForSunAlt","sunAltRad","civilTwilight","astronomicalTwilight","min","max","atan","MILLISECONDS_PER_DAY","dayFractionForTimestamp","timestamp","sunPlace","Place","set_names","set_classification","solarSystem","set_target","sun","set_zoomLevel","drawHorizon","renderContext","options","n","delta","triangleList","color","Color","load","round","opacity","settings","Settings","get_active","longitudeRad","get_locationLng","latitudeRad","get_locationLat","now","SpaceTimeController","get_now","i","points","map","point","raDecRad","Coordinates","raDecTo3d","addSubdividedTriangles","draw","drawSky","sunAltAz","get_RA","get_dec","WWTControl","scriptInterface","setForegroundOpacity","nameForObject","object","name","charAt","toUpperCase","slice","placeForObject","place","maxFOV","minFOV","maxFactor","minFactor","gMax","gMin","planetTextOffsetsY","planetTextOffsetsX","textOverlayForSolarSystemObject","text","glyphHeight","zoom","viewCamera","fov","exp","scale","sign","get_location","get_lat","up","Vector3d","create","location","y","x","Text3d","makeTextOverlays","batch","Text3dBatch","values","Object","keys","filter","key","isNaN","Number","forEach","moon","add","nsewBatch","resetNSEWText","makeNSEWText","alt","directions","v","useCustomGlyphs","drawNSEWText","drawColor","zenithAltAz","zenith","horizonToEquitorial","raPart","decPart","mat","formatDMS","Matrix3d","_rotationY","_multiply","_rotationX","invert","matOldWorld","get_world","clone","matOldWorldBase","get_worldBase","set_worldBase","multiplyMatrix","set_world","makeFrustum","viewTransform","invertMatrix","GLYPH_CACHE","cache","GlyphCache","root","window","origin","pathname","endsWith","length","imageUrl","xmlUrl","_texture","Texture","fromUrl","_webFile","WebFile","onStateChange","prototype","_glyphXmlReady","bind","send","_glyphCache","prepareBatch","drawPlanets","_opacity","Planets","_planetTextures","_loadPlanetTextures","elong","_geocentricElongation","_planetLocations","RA","raDif","_phaseAngle","distance","dista","abs","degreesToRadians","distb","sunMoonDist","sqrt","_planetScales","_drawPlanet","renderOneFrame","showHorizon","showSky","showPlanetLabels","this","get_backgroundImageset","renderType","get_dataSetType","sizeChange","canvas","width","parentNode","clientWidth","height","clientHeight","explorer","refresh","_crossHairs","Tile","lastDeepestLevel","deepestLevel","RenderTriangle","tilesInView","tilesTouched","set_metaNow","get__mover","set_now","get_currentDateTime","updatePlanetLocations","get_solarSystemMode","newCam","get_currentPosition","targetCamera","copy","space","get_galacticMode","gPoint","j2000toGalactic","targetAlt","targetAz","az","get_localHorizonMode","currentAltAz","equitorialToHorizon","fromRaDec","get_alt","get_az","get_complete","_fireArrived","singleton","set__mover","_notifyMoveComplete","updateClock","_updateViewParameters","clear","setupMatricesSpace3d","drawImageSet","get_foregroundImageset","set_foregroundImageset","gl","_foregroundCanvas","saveDevice","device","_fgDevice","clearRect","save","globalAlpha","drawImage","restore","uiController","render","Annotation","prepBatch","_annotations","item","drawBatch","_lastMouseMove","raDecDown","getCoordinatesForScreenPoint","_hoverTextPoint","_annotationHover","_hoverText","_drawHoverText","imageset","get_catalogHipsImagesets","get_hipsProperties","get_catalogSpreadSheetLayer","enabled","lastVersion","get_version","constellation","Constellations","containment","findConstellationForPoint","_drawSkyOverlays","_planetTextOverlays","Grids","_altAzTextBatch","fromArgb","worldSave","viewSave","get_view","projSave","get_projection","get_current","get_showCrosshairs","_drawCrosshairs","tilesAllLoaded","TileCache","get_queueCount","setupMatricesOverlays","_fadeFrame","_frameCount","decimateQueue","processQueue","currentRenderGeneration","TourPlayer","get_playing","set_crossFadeFrame","set_view","set_projection","ms","_lastUpdate","trianglesRendered","trianglesCulled","capturingVideo","dumpFrameParams","waitDownload","captureFrameForVideo","_videoBlobReady","format","nextFrame","get_doneDumping","frameDumping","cancelFrameDump","drawEcliptic","drawCircle","_eclipticOverviewLineList","_eclipticYear","obliquity","meanObliquityOfEcliptic","get_jNow","daysPerYear","DT","isLeap","_monthDays","_eclipticCount","jYear","utcToJulian","dPrev","dStart","SimpleLineList","set_depthBuffered","m","daysThisMonth","sunRaDec","getPlanetLocationJD","sunEcliptic","CT","eq2Ec","dd","addLine","_transformCoordinate","drawLines","drawSkyOverlays","get_showConstellationPictures","freestandingMode","drawArtwork","get_showConstellationFigures","constellationsFigures","URLHelpers","engineAssetUrl","get_showEclipticGrid","drawEclipticGrid","get_eclipticGridColor","get_showEclipticGridText","drawEclipticGridText","get_showGalacticGrid","drawGalacticGrid","get_galacticGridColor","get_showGalacticGridText","drawGalacticGridText","get_showAltAzGrid","drawAltAzGrid","get_altAzGridColor","get_showAltAzGridText","drawAltAzGridText","get_showPrecessionChart","drawPrecessionChart","get_precessionChartColor","get_showEcliptic","get_eclipticColor","get_showEclipticOverviewText","drawEclipticText","get_showGrid","drawEquitorialGrid","get_equatorialGridColor","get_showEquatorialGridText","drawEquitorialGridText","get_showConstellationBoundries","constellationsBoundries","get_showConstellationSelection","get_showConstellationLabels","drawConstellationNames","Colors","get_yellow","SECONDS_PER_DAY","secondsInterval","MILLISECONDS_PER_INTERVAL","RADIANS_TO_ARCSECONDS","R2S","useSun","store","waitForReady","then","onStart","time","selectedTime","getTime","locationRad","zoomLevel","sunPosition","getSunPositionAtTime","currentRaDec","AstroCalc","getPlanet","lerp","x0","y0","x1","y1","_interpolateSunAltitude","step","desiredAltDeg","alt1","alt2","out","meridionalAltitude","sunDec","latitude","offset","upperCulmination","lowerCulmination","alwaysAbove","alwaysBelow","always","getTimeforSunAlt","altDeg","referenceTime","useLimb","useRefraction","rSunDeg","extraDeg","refTime","startOfDay","endOfDay","sunAlt","circumstances","rising","setting","error","searchRise","interp","searchSet","doOnce","sunGoingUp","s","toLocaleString","undefined","r","s2","_hoisted_1","id","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","sliderMin","sliderMax","highAltDeg","NIGHTTIME","MAX_ZOOM","infoFraction","OPT_OUT_KEY","AHA_OPT_OUT_KEY","UUID_KEY","__name","setup","__props","engineStore","currentTime","wwtSettings","useWWTKeyboardControls","touchscreen","supportsTouchscreen","smAndDown","splash","URLSearchParams","search","get","toLowerCase","showSplashScreen","splashReady","selectedEvent","splashScreenRef","backgroundImagesets","sheet","layersLoaded","positionSet","trackSun","pathInFoV","forceCamera","showQuestion","questionTimeout","tab","howToUseTimeMs","whatToExploreTimeMs","howToUseStartTimestamp","whatToExploreStartTimestamp","playing","showLocationSelector","startAzOffset","endAzOffset","azOffsetSlope","endTime","startTime","sunDistance","get_distance","currentDate","currentYear","datesOfInterest","pastEvents","entries","date","entry","sliderRange","sliderValue","fraction","set","setTime","middayTime","middayAltAz","highAltTimes","start","end","highAltCoordinates","sortedDatesOfInterest","sortedEntries","sort","today","selectedCustomDate","showDatePicker","getDateForEvent","event","handleDateSelection","eventName","isSmall","smallSize","getCurrentSeason","getCurrentSeasonForDate","season","getFullYear","seasonsForYear","marEquinox","mar_equinox","junSolstice","jun_solstice","sepEquinox","sep_equinox","decSolstice","dec_solstice","getDate","getMonth","seasonalColors","spring","summer","autumn","winter","accentColor","customSeason","currentSeason","displayedDate","currentDayInfo","getStartAndEndTimes","sunAlways","polarInfo","sunAlwaysUp","sunAlwaysDown","updatePathInFoV","startPos","endPos","context","azWidth","widthToFit","peakNorth","dayString","formatDayLength","milliseconds","totalMinutes","hours","minutes","dayStart","dayEnd","localMidnight","updateSliderBounds","_newLocation","oldLocation","oldOffset","diff","newSelectedTime","handlePlaying","play","resetView","clockRate","wwtStats","playPauseCount","events","push","centerOnMidday","altitudeDeg","altToUse","middayRADec","gotoRADecZoom","zoomDeg","instant","goToEvent","timeResetCount","reverseCount","speedups","slowdowns","rateSelections","urlParams","urlLat","urlLon","initialLat","initialLon","parseFloat","createQueryUrl","lon","params","toString","selectedLocationInfo","longitude","searchErrorMessage","geocodingOptions","access_token","updateLocationFromMap","userSelectedLocations","latText","ns","toFixed","lonText","ew","getLocationInfo","Promise","locationName","startsWithNumber","formattedLat","formattedLon","match","setLocationFromFeature","feature","center","locationInfo","catch","_err","setLocationFromSearchFeature","updateSelectedLocationInfo","searchProvider","selectedLocaledTimeDateString","formatString","aspectRatioSetup","updateAzOffsets","aspectRatio","observer","ResizeObserver","target","observe","set_zoomMax","skyBackgroundImagesets","iset","updateWWTLocation","setClockSync","setClockRate","applySetting","doWWTModifications","questionDisplaySetup","createUserEntry","ready","isLoading","inNorthernHemisphere","mobile","infoSheetLocation","infoSheetHeight","infoSheetWidth","infoTextHeight","infoSheetTransition","cssVars","showTextSheet","daylightPercentage","_value","selectSheet","showVideoSheet","video","document","querySelector","pause","closeSplashScreen","sheetType","blurActiveElement","withAzOffset","setTimeout","t","lonRad","middayAltDeg","middayAzDeg","dayFrac","dayAzFactor","highStartTime","highEndTime","topStartAz","topEndAz","tSouth","passThroughSouth","tTop","sgn","raDec","set_locationLat","set_locationLng","boundRenderOneFrame","newFrameRender","originalUpdatePlanetLocations","newUpdatePlanetLocations","threeD","updateTabTime","leavingTab","startTabTime","enteringTab","_time","representation","toISOString","userSelectedDates","_inNorth","firstFocusable","focus","show","newTab","STORY_DATA_URL","API_BASE_URL","storedOptOut","localStorage","getItem","storedAhaOptOut","maybeUUID","optOut","responseOptOut","ahaOptOut","showPrivacyDialog","existingUser","uuid","v4","setItem","timeSliderUsedCount","ahaMomentResponses","appStartTimestamp","onTimeSliderEnd","fetch","method","headers","VUE_APP_CDS_API_KEY","existingDataResponse","json","existingDataContent","alreadyAnswered","status","response","aha_moment_responses","setQuestionTimeout","timeout","content","exists","user_uuid","body","JSON","stringify","resetData","assign","updateUserData","howToUseTime","whatToExploreTime","time_slider_used_count","user_selected_dates","user_selected_locations","app_time_ms","how_to_use_time_ms","what_to_explore_time_ms","wwt_time_reset_count","wwt_reverse_count","wwt_play_pause_count","wwt_speedups","wwt_slowdowns","wwt_rate_selections","wwt_start_stop_times","aha_moment_response","keepalive","String","clearTimeout","addEventListener","visibilityState","onbeforeunload","_ctx","_cache","_component_WorldWideTelescope","_component_splash_screen","_component_font_awesome_icon","_component_font_awesome_layers","_component_geolocation_button","_component_location_search","_component_location_selector","_component_icon_button","_component_speed_control","_component_daylight_pie_chart","_component_credit_logos","_component_funding_acknowledgement","_component_question_dialog","style","default","ref_key","ref","title","_","inert","icon","transform","modelValue","$event","transition","size","tabindex","density","elevation","small","label","index","variant","disabled","rise","_reverse","rate","fullscreen","controls","src","type","persistent","absolute","scrim","dense","align","cols","outlined","href","rel","__exports__","props","highlightColor","emits","__emit","handleLocationSet","_component_focus_trap","placeholder","$vuetify","display","xs","rounded","Function","_searchText","Boolean","stayOpen","theme","buttonSize","bgColor","emit","searchOpen","searchItem","searchResults","locationJustUpdated","menuOpen","comboFocused","searchInput","cssStyles","itemText","performForwardGeocodingSearch","info","features","focusCombobox","input","blurCombobox","blur","toggleSearch","onFocusChange","focused","timedJustUpdatedLocation","clearSearchData","items","solo","menu","append","required","ampm","showDate","showTimezone","shortTimeDate","timezone","pad","number","padStart","getHours","shortTimeDateString","h","getMinutes","tz","getSeconds","halfTransitionTurnSize","dayColor","nightColor","timezoneOffset","riseAngle","daylightFraction","dawnStart","dawnEnd","duskStart","duskEnd","question","baseColor","slots","showFooter","footer","css","actions","icons","defaultSet","aliases","sets","mdi","locale","fallback","messages","en","defaultTheme","update","el","binding","visibility","SeasonsStory","wwtNamespace","use","wwtPinia","vuetify","directive","beforeMount","_vnode","_prevVnode","updated","component","WWTComponent","SplashScreen","IconButton","FundingAcknowledgement","CreditLogos","SpeedControl","GeolocationButton","LocationSearch","LocationSelector","DateTimePicker","TimeDisplay","QuestionDialog","VIcon","DaylightPieChart","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","e","obj","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}